var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}},$jscomp.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e},$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,t){var i=$jscomp.propertyToPolyfillSymbol[t];return null==i?e[t]:void 0!==(i=e[i])?i:e[t]};$jscomp.polyfill=function(e,t,i,a){t&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,t,i,a):$jscomp.polyfillUnisolated(e,t,i,a))},$jscomp.polyfillUnisolated=function(e,t,i,a){for(i=$jscomp.global,e=e.split("."),a=0;a<e.length-1;a++){var n=e[a];if(!(n in i))return;i=i[n]}(t=t(a=i[e=e[e.length-1]]))!=a&&null!=t&&$jscomp.defineProperty(i,e,{configurable:!0,writable:!0,value:t})},$jscomp.polyfillIsolated=function(e,t,i,a){var n=e.split(".");e=1===n.length,a=n[0],a=!e&&a in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var o=0;o<n.length-1;o++){var s=n[o];if(!(s in a))return;a=a[s]}n=n[n.length-1],null!=(t=t(i=$jscomp.IS_SYMBOL_NATIVE&&"es6"===i?a[n]:null))&&(e?$jscomp.defineProperty($jscomp.polyfills,n,{configurable:!0,writable:!0,value:t}):t!==i&&(void 0===$jscomp.propertyToPolyfillSymbol[n]&&($jscomp.propertyToPolyfillSymbol[n]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(n):$jscomp.POLYFILL_PREFIX+n),$jscomp.defineProperty(a,$jscomp.propertyToPolyfillSymbol[n],{configurable:!0,writable:!0,value:t})))},$jscomp.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,$jscomp.generator={},$jscomp.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},$jscomp.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1},$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},$jscomp.generator.Context.prototype.next_=function(e){this.yieldResult=e},$jscomp.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},$jscomp.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},$jscomp.generator.Context.prototype.yieldAll=function(e,t){var i=$jscomp.makeIterator(e),a=i.next();if($jscomp.generator.ensureIteratorResultIsObject_(a),!a.done)return this.yieldAllIterator_=i,this.yield(a.value,t);this.yieldResult=a.value,this.nextAddress=t},$jscomp.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,null!=t&&(this.finallyAddress_=t)},$jscomp.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},$jscomp.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},$jscomp.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},$jscomp.generator.Context.prototype.enterFinallyBlock=function(e,t,i){i?this.finallyContexts_[i]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},$jscomp.generator.Context.prototype.leaveFinallyBlock=function(e,t){var i=this.finallyContexts_.splice(t||0)[0];if(i=this.abruptCompletion_=this.abruptCompletion_||i){if(i.isException)return this.jumpToErrorHandler_();null!=i.jumpTo&&this.finallyAddress_<i.jumpTo?(this.nextAddress=i.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},$jscomp.generator.Context.prototype.forIn=function(e){return new $jscomp.generator.Context.PropertyIterator(e)},$jscomp.generator.Context.PropertyIterator=function(e){for(var t in this.object_=e,this.properties_=[],e)this.properties_.push(t);this.properties_.reverse()},$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},$jscomp.generator.Engine_=function(e){this.context_=new $jscomp.generator.Context,this.program_=e},$jscomp.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(e){return{value:e,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.yieldAllStep_=function(e,t,i){try{var a=e.call(this.context_.yieldAllIterator_,t);if($jscomp.generator.ensureIteratorResultIsObject_(a),!a.done)return this.context_.stop_(),a;var n=a.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}return this.context_.yieldAllIterator_=null,i.call(this.context_,n),this.nextStep_()},$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},$jscomp.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},$jscomp.generator.createGenerator=function(e,t){var i=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(t));return $jscomp.setPrototypeOf&&e.prototype&&$jscomp.setPrototypeOf(i,e.prototype),i},$jscomp.asyncExecutePromiseGenerator=function(e){function t(t){return e.next(t)}function i(t){return e.throw(t)}return new Promise((function(a,n){!function e(o){o.done?a(o.value):Promise.resolve(o.value).then(t,i).then(e,n)}(e.next())}))},$jscomp.asyncExecutePromiseGeneratorFunction=function(e){return $jscomp.asyncExecutePromiseGenerator(e())},$jscomp.asyncExecutePromiseGeneratorProgram=function(e){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(e)))};var mvpjq=jQuery;!function(e){var t=function(){};t.test=document.createElement("div"),t.isEmpty=function(e){return 0==e.replace(/^\s+|\s+$/g,"").length},t.strip=function(e){return e.replace(/^\s+|\s+$/g,"")},t.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},t.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)},t.isIE=function(){return-1!=t.getInternetExplorerVersion()},t.isChrome=function(){return!(!e.chrome||!e.chrome.webstore&&!e.chrome.runtime)},t.isSafari=function(){return navigator.vendor&&-1<navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")},t.hasLocalStorage=function(){try{return"localStorage"in e&&null!==e.localStorage}catch(e){return!1}},t.getInternetExplorerVersion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,i=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(t=navigator.userAgent,null!=(i=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/).exec(t)&&(e=parseFloat(RegExp.$1)));return e},t.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},t.isiPhoneIpod=function(){var e=navigator.userAgent;return-1<e.indexOf("iPhone")||-1<e.indexOf("iPod")},t.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")},t.hasHistory=function(){return!(!e.history||!history.pushState)},t.hasDownloadSupport=function(){return"download"in document.createElement("a")},t.b64DecodeUnicode=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},t.volumeCanBeSet=function(){var e=document.createElement("audio");return!!e&&(e.volume=0,0==e.volume)},t.supportsWebGL=function(){try{return!!e.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}},t.canPlayMp4=function(){var e=document.createElement("video");return!(!e.canPlayType||!e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))},t.canPlayMp3=function(){var e=document.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/mpeg;").replace(/no/,""))},t.canPlayWav=function(){var e=document.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/wav;").replace(/no/,""))},t.relativePath=function(e){return/^(?:[a-z]+:)?\/\//i.test(e)},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href},t.hasFullscreen=function(){return t.test.requestFullscreen||t.test.mozRequestFullScreen||t.test.msRequestFullscreen||t.test.oRequestFullscreen||t.test.webkitRequestFullScreen},t.selectText=function(t){var i=document;if(i.body.createTextRange)(i=i.body.createTextRange()).moveToElementText(t),i.select();else if(e.getSelection){var a=e.getSelection();(i=i.createRange()).selectNodeContents(t),a.removeAllRanges(),a.addRange(i)}},t.randomiseArray=function(e){var t,i=[],a=[];for(t=0;t<e;t++)i[t]=t;for(t=0;t<e;t++){var n=Math.round(Math.random()*(i.length-1));a[t]=i[n],i.splice(n,1)}return a},t.shuffleArray=function(e){var t;for(t=e.length-1;0<t;t--){var i=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[i],e[i]=a}return e},t.sortArray=function(e,t){var i,a=e.length,n=[];for(i=0;i<a;i++)n[i]=e[t[i]];return n},t.arrayContainsAnotherArray=function(e,t){var i,a=e.length;for(i=0;i<a;i++)if(-1<t.indexOf(e[i]))return!0;return!1},t.regroupArray=function(e){return e.reduce((function(e,t){var i=t.value,a=$jscomp.makeIterator(t.key.split("-"));a.next();var n=a.next().value,o=a.next().value;return e[n]=e[n]||[],i.forEach((function(t,i){return(e[n][i]=e[n][i]||{})[o]=t})),e}),[])},t.keysrt=function(e,t,i){var a=1;return i&&(a=-1),e.sort((function(e,i){var n=e[t],o=i[t];return a*(n<o?-1:n>o?1:0)}))},t.formatTime=function(e){e=parseInt(e,10);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60);return e=e-3600*t-60*i,0<t?(10>t&&(t="0"+t),10>i&&(i="0"+i),10>e&&(e="0"+e),t+":"+i+":"+e):(10>i&&(i="0"+i),10>e&&(e="0"+e),i+":"+e)},t.toSeconds=function(e){return e=e.split(/[\.:,]+/),Number(3600*+e[0]+60*+e[1]+ +e[2])},t.getViewportSize=function(t){return t?{w:e.innerWidth,h:e.innerHeight}:{w:document.documentElement.clientWidth||e.innerWidth,h:document.documentElement.clientHeight||e.innerHeight}},t.isScrolledIntoView=function(t){var i=(t=t.getBoundingClientRect()).bottom;return 0<=t.top+t.height/2&&i-t.height/2<=e.innerHeight},t.getElementOffsetTop=function(t){t=t.getBoundingClientRect();var i=document.body,a=document.documentElement;return Math.round(t.bottom-100+(e.pageYOffset||a.scrollTop||i.scrollTop)-(a.clientTop||i.clientTop||0))},t.getScrollTop=function(t){return t=document.documentElement,(e.pageYOffset||t.scrollTop)-(t.clientTop||0)},t.rgbToHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?e:(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},t.getUrlParameter=function(t){var i={};return e.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,a){i[t]=a})),t?i[t]:i},t.checkCssExist=function(e){for(var t=document.styleSheets,i=0,a=t.length;i<a;i++)if(t[i].href==e)return;(t=document.createElement("link")).rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},e.MVPUtils=t}(window),function(e,t){e.MVPImageSlideshow=function(e){function i(){r||(r=!0,d&&(d.remove(),d=null),o=1e3*m,f&&p.play())}var a,n,o,s,r,l,d,c,p=this,u=e.holder,m=e.settings.slideshowDuration?parseInt(e.settings.slideshowDuration,10):10,h=e.settings.slideshowRandom,v=[],f=e.settings.autoPlay;this.initMedia=function(){0<u.children().length&&(d=u.children().eq(0)),++l>v.length-1&&(l=0);var e=v[l];t(new Image).css({display:"block"}).addClass("mvp-media mvp-media-img").appendTo(u).on("load",(function(){n=t(this),p.resize(),d&&d.removeClass("mvp-slideshow-visible"),r=!1,n.one("transitionend",(function(){i()})).addClass("mvp-slideshow-visible"),s=parseFloat(n.css("transition-duration"),10),setTimeout((function(){i()}),1e3*s)})).attr("src",e)},this.pause=function(){a&&clearTimeout(a);var e=(new Date).getTime()-c;0>(o-=e)&&(o=0)},this.play=function(){f=!0,a&&clearTimeout(a),c=(new Date).getTime(),a=setTimeout(p.ended,o)},this.ended=function(){p.initMedia()},this.dispose=function(){a&&clearTimeout(a),u.empty(),n=null},this.resize=function(){},this.setData=function(e){l=-1,v=e.slideshowImages,h&&MVPUtils.shuffleArray(v),p.initMedia()}}}(window,jQuery),function(e,t){e.MVPPlaylistManager=function(e){function i(){l?(v=l.slice(),l=null):v=MVPUtils.randomiseArray(o),console.log(v)}function a(e,t){if(e[0]==t){var i=e.splice(0,1);e.push(i)}}function n(e,t){if(e[o-1]==t){var i=e.splice(o-1,1);e.unshift(i)}}var o,s,r,l,d=this,c=e.loopingOn,p=e.randomPlay,u=!1,m=-1,h=!1,v=[],f=!1;setTimeout((function(){clearTimeout(this),t(d).trigger("MVPPlaylistManager.RANDOM_CHANGE",p),t(d).trigger("MVPPlaylistManager.LOOP_CHANGE",c)}),50),this.setCounter=function(e,s){void 0===s&&(s=!0),m=s?m+parseInt(e,10):parseInt(e,10),isNaN(m)?alert("MVPPlaylistManager message: No active media, counter = "+m):(u=!1,c?(p?m>o-1?(m=v[o-1],i(),a(v,m),m=0):0>m&&(m=v[0],i(),n(v,m),m=o-1):m>o-1?m=0:0>m&&(m=o-1),t(d).trigger("MVPPlaylistManager.COUNTER_READY",d.getCounter())):(m>o-1?(m=o-1,u=!0):0>m&&(u=!0,m=0),u?t(d).trigger("MVPPlaylistManager.PLAYLIST_END"):t(d).trigger("MVPPlaylistManager.COUNTER_READY",d.getCounter())))},this.getCounter=function(){return p?f?m:v[m]:m},this.getNextCounter=function(e){if(e=m+e,u=!1,c)p?e>o-1?(e=v[o-1],a(l=MVPUtils.randomiseArray(o),e),e=0):0>e&&(e=v[0],n(l=MVPUtils.randomiseArray(o),e),e=o-1):e>o-1?e=0:0>e&&(e=o-1);else if(e>o-1?(u=!0,e=o-1):0>e&&(u=!0,e=0),u)return;return p?f?e:(l||v)[e]:e},this.advanceHandler=function(e){f=!1,h?(h=!1,r+e>o-1?(m=o-1,t(d).trigger("MVPPlaylistManager.COUNTER_READY",d.getCounter())):0>r+e?(m=0,t(d).trigger("MVPPlaylistManager.COUNTER_READY",d.getCounter())):d.setCounter(r+e,!1)):d.setCounter(e)},this.processPlaylistRequest=function(e){f=!1,p&&(f=!0,s=e,h||(r=m,h=!0)),d.setCounter(e,!1)},this.setPlaylistItems=function(e,t){void 0===t&&(t=!0),t&&(m=-1),o=e,p&&i()},this.reSetCounter=function(e){void 0===e?m=-1:(e=parseInt(e,10),o?(e>o-1?e=o-1:0>e&&(e=0),m=e):m=-1)},this.setRandom=function(e){if(p=void 0!==e?e:!p,3>o&&(p=!1),p&&i(),p){var a=v.length;for(e=0;e<a;e++)if(v[e]==m){if(0==e)break;e=v.splice(e,1),v.unshift(parseInt(e,10));break}m=0}else h?(m=s,h=!1):m=v[m];t(d).trigger("MVPPlaylistManager.RANDOM_CHANGE",p)},this.getRandom=function(e){return p},this.setLooping=function(e){c=void 0!==e?e:!c,t(d).trigger("MVPPlaylistManager.LOOP_CHANGE",c)},this.getLooping=function(e){return c},this.getPosition=function(e){return v.indexOf(e)}}}(window,jQuery),function(e,t){function i(e,t,i,n){var o={},s=i.width(),r=(s-0)/((i=i.height())-0),l=(t=(n=a(t,n)).width)/(n=n.height);return l<r?e?(o.width=(i-0)/n*t,o.height=i-0):(o.height=(s-0)/t*n,o.width=s-0):l>r?e?(o.height=(s-0)/t*n,o.width=s-0):(o.width=(i-0)/n*t,o.height=i-0):(o.width=s-0,o.height=i-0),o}function a(e,t){var i={};return"video"==e?t[0]&&t[0].videoWidth&&t[0].videoHeight?(i.width=t[0].videoWidth,i.height=t[0].videoHeight):(i.width=16,i.height=9):"iframe"==e?t.sw&&t.sh?(i.width=t.sw,i.height=t.sh):(i.width=16,i.height=9):"image"==e&&(i.width=t.width(),i.height=t.height()),i}var n=function(){};n.resizeMedia=function(e,t,n,o){var s,r=n.width(),l=n.height();0==t?s=a(e,o):1==t?s=i(!0,e,n,o):2==t&&(s=i(!1,e,n,o)),e=parseInt((r-s.width)/2,10),l=parseInt((l-s.height)/2,10),o.css({width:s.width+"px",height:s.height+"px",left:e+"px",top:l+"px"})},e.MVPAspectRatio=n}(window,jQuery),function(e){e.fn.mvp=function(t){function i(){_t.swipe({swipeLeft:function(e,i,a,n,o,s){if(!wn)return!1;("audio"==Es||"video"==Es&&!Rn.is360||"image"==Es&&!Rn.is360||"youtube"==Es&&"chromeless"==t.youtubePlayerType&&!Rn.is360||"vimeo"==Es&&"chromeless"==vl&&!Rn.is360)&&ke()},swipeRight:function(e,i,a,n,o,s){if(!wn)return!1;("audio"==Es||"video"==Es&&!Rn.is360||"image"==Es&&!Rn.is360||"youtube"==Es&&"chromeless"==t.youtubePlayerType&&!Rn.is360||"vimeo"==Es&&"chromeless"==vl&&!Rn.is360)&&Se()}})}function a(e){return $jscomp.asyncExecutePromiseGeneratorProgram((function(t){if(1==t.nextAddress)return e.addEventListener("end",n),t.yield(Xo.xr.setSession(e),2);as=e,t.jumpToEnd()}))}function n(){as.removeEventListener("end",n),as=null}function o(){qn=!1,dt.removeClass("mvp-theater"),t.theaterElement&&e(t.theaterElement).removeClass(t.theaterElementClass),vt&&vt.removeClass("mvp-lightbox-center"),Zl=t.instanceName;var i=dt[0];if("normal"==ed){var a=document,n=a.documentElement;a=a.body,rl=n.scrollLeft||a.scrollLeft||0,ll=n.scrollTop||a.scrollTop||0,e(ot).trigger("fullscreenBeforeEnter",{instance:ot,instanceName:t.instanceName,media:Rn})}Aa?i.requestFullscreen?document.fullscreenElement?document.exitFullscreen():i.requestFullscreen():i.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():i.webkitRequestFullScreen():i.msRequestFullscreen?document.msIsFullscreen||document.msFullscreenElement?document.msExitFullscreen():i.msRequestFullscreen():i.mozRequestFullScreen&&(document.fullscreenElement||document.mozFullScreenElement?document.mozCancelFullScreen():i.mozRequestFullScreen()):"fullscreen"==ed?r():s(),setTimeout((function(){Ne()}),250)}function s(){ed="fullscreen",St.removeClass(t.minimizeClass),sl.addClass("mvp-fs-overflow"),dt.addClass("mvp-fs"),"lightbox"==t.playerType&&mt.addClass("mvp-fs"),td.find(".mvp-btn-fullscreen").hide(),td.find(".mvp-btn-normal").show(),Yi.hide(),document.body.style.cursor="default","custom"==t.rightClickContextMenu&&(nd.find(".mvp-context-fullscreen-enter").hide(),nd.find(".mvp-context-fullscreen-exit").show()),t.hidePlaylistOnFullscreenEnter&&t.playlistOpened&&(za=!0,t.playlistOpened=!1),"outer"==Ma&&di.hide(),e(ot).trigger("fullscreenEnter",{instance:ot,instanceName:t.instanceName,media:Rn})}function r(){ed="normal",sl.removeClass("mvp-fs-overflow"),dt.removeClass("mvp-fs"),"lightbox"==t.playerType&&mt.removeClass("mvp-fs"),td.find(".mvp-btn-fullscreen").show(),td.find(".mvp-btn-normal").hide(),Yi.show(),document.body.style.cursor="default","custom"==t.rightClickContextMenu&&(nd.find(".mvp-context-fullscreen-enter").show(),nd.find(".mvp-context-fullscreen-exit").hide()),za&&!t.playlistOpened&&(za=!1,t.playlistOpened=!0),"outer"==Ma&&di.show(),window.scrollTo(rl,ll),t.minimizeOnScroll&&(t.minimizeOnScrollOnlyIfPlaying?Is&&Q():Q()),Zl=null,e(ot).trigger("fullscreenExit",{instance:ot,instanceName:t.instanceName,media:Rn})}function l(e){0>(e=e.pageX-Yt.offset().left)?e=0:e>sd&&(e=sd),_n||(sd=Yt.width());var i=Math.max(0,Math.min(1,e/sd));if(_n){if("audio"!=Es||isNaN(co.duration))if("video"!=Es||isNaN(go.duration)){if("youtube"==Es){if(a=Po.getDuration(),(n=i*a)>a-1&&(n=a-1),t.disableSeekingPastWatchedPoint&&n>Ns||t.disableSeekingPastWatchedPoint&&n>Ns)return!1;Po.seekTo(n)}else if("vimeo"==Es)if("chromeless"==vl&&ci.show(),0!=fl){if((n=i*(a=fl))>a-1&&(n=a-1),t.disableSeekingPastWatchedPoint&&n>Ns)return!1;jo.setCurrentTime(n)}else jo.getDuration().then((function(e){if((n=i*(a=e))>a-1&&(n=a-1),t.disableSeekingPastWatchedPoint&&n>Ns)return!1;jo.setCurrentTime(n)}))}else{if(a=go.duration,(n=i*a)>a-1&&(n=a-1),t.disableSeekingPastWatchedPoint&&n>Ns)return!1;try{go.currentTime=n.toFixed(1)}catch(e){}}else{var a=co.duration,n=i*a;if(n>a-1&&(n=a-1),t.disableSeekingPastWatchedPoint&&n>Ns)return!1;try{co.currentTime=n.toFixed(1)}catch(e){}}Is||(Rl=null,je(!0))}else Rn.duration&&(n=i*Rn.duration,Rn.start=n,Qt.width(n/Rn.duration*sd))}function d(e){var i=e.pageX-Yt.offset().left;if(!MVPUtils.isNumber(i))return!1;0>i?i=0:i>sd&&(i=sd);var a=Math.max(0,Math.min(1,i/sd));if(!MVPUtils.isNumber(a))return!1;var n=(i=St.hasClass(t.minimizeClass)||Hn?St:dt)[0].getBoundingClientRect(),o=Gt[0].getBoundingClientRect();if(Rn.duration)var s=Rn.duration;else"audio"==Es?s=co.duration:"video"==Es?s=go.duration:"youtube"==Es?s=Po.getDuration():"vimeo"==Es&&(s=fl);if(Rn.previewSeek){if(a*=s,MVPUtils.isNumber(s)){var r=_l.length;for(s=0;s<r;s++){var l=_l[s];if(l.start<=a&&l.end>=a){var d=l.text;break}}d=d?'<div class="mvp-preview-seek-chapter-title">'+d+'</div><div class="mvp-preview-seek-chapter-time">'+MVPUtils.formatTime(a)+"</div>":'<div class="mvp-preview-seek-chapter-time">'+MVPUtils.formatTime(a)+"</div>",Wt.html(d)}if(ul.length)for(s=ul.length,d=0;d<s;d++){var c=ul[d];if(r=c.start,l=c.end,a>=r&&a<=l){if(!Wn){var p=(c=c.url).substr(c.lastIndexOf("=")+1).split(",");p="-"+p[0]+"px -"+p[1]+"px",c=encodeURI(c),(Wn={}).start=r,Wn.end=l,Ht.css({"background-image":"url("+c+")","background-position":p})}}else Wn&&(a<Wn.start||a>Wn.end)&&(Wn=null)}e=e.pageX-nl.scrollLeft()-n.left-$t.outerWidth()/2,n=o.top-n.top-$t.outerHeight()-5,Yn?(n+2>Yn||n-2<Yn)&&(Yn=n):Yn=n,"lightbox"!=t.playerType&&(0>e?e=0:e+$t.outerWidth()>i.width()&&(e=i.width()-$t.outerWidth())),hr&&function(e){vr=!1;var t=fr.play();void 0!==t&&t.then((function(){})).catch((function(e){}));try{fr.currentTime=e}catch(e){}}(a),$t.css({left:parseInt(e,10)+"px",top:Yn+"px"}).show()}else e=e.pageX-nl.scrollLeft()-n.left-rd.outerWidth()/2,n=o.top-n.top-rd.outerHeight(),"lightbox"!=t.playerType&&(0>e?e=0:e+rd.outerWidth()>i.width()&&(e=i.width()-rd.outerWidth())),rd.css({left:parseInt(e,10)+"px",top:parseInt(n,10)+"px"}).show(),MVPUtils.isNumber(s)&&rd.text(MVPUtils.formatTime(s*a)+" / "+MVPUtils.formatTime(s))}function c(){if(!wn)return!1;0<gn?(bn=gn,gn=0):gn=bn,u()}function p(e){dd?gn=Math.max(0,Math.min(1,(e.pageX-ei.offset().left)/pd)):gn=1-(gn=Math.max(0,Math.min(1,(e.pageY-ei.offset().top)/pd))),u()}function u(i){void 0!==i&&(gn=i),void 0!==gn&&("audio"==Es?co&&(co.volume=gn,co.muted=0==gn):"video"==Es?go&&(go.volume=gn,go.muted=0==gn):"youtube"==Es?Po&&(Po.setVolume(100*gn),0==gn?Po.mute():Po.unMute()):"vimeo"==Es&&jo&&jo.setVolume(gn)),Xt.children().hide(),0==gn?Xt.find(".mvp-btn-volume-off").show():0<gn&&.5>gn?Xt.find(".mvp-btn-volume-down").show():.5<=gn&&1>=gn&&Xt.find(".mvp-btn-volume-up").show(),0<gn&&Ki&&(Ki.remove(),Ki=null),ti.css(dd?"width":"height",gn*pd+"px"),e(ot).trigger("volumeChange",{instance:ot,instanceName:t.instanceName,volume:gn})}function m(e){var i=dd?e.pageX-ei.offset().left:e.pageY-ei.offset().top;if(0>i?i=0:i>pd&&(i=pd),i=Math.max(0,Math.min(1,i/pd)),!MVPUtils.isNumber(i))return!1;dd||(i=1-i),i=parseInt(100*i,10),rd.text(i+" %");var a=(St.hasClass(t.minimizeClass)||Hn?St:dt)[0].getBoundingClientRect(),n=Zt[0].getBoundingClientRect();dd?(i=parseInt(e.pageX-nl.scrollLeft()-a.left-rd.outerWidth()/2),e=parseInt(n.top-a.top-rd.outerHeight())):(i=parseInt(n.left-a.left-rd.outerWidth()/2+Zt.outerWidth()/2),e=parseInt(e.pageY-nl.scrollTop()-a.top-rd.outerHeight()-10)),rd.css({left:i+"px",top:e+"px"}).show()}function h(){vd.find(".mvp-settings-menu").css("display","none");var e=vd.width(),t=vd.height();vd.css({width:"auto",height:"auto"}),fd.css("display","block");var i=fd.width(),a=fd.height();vd.css({width:e+"px",height:t+"px"}),setTimeout((function(){vd.css({width:i+"px",height:a+"px"})}),20)}function v(e){Js&&Js.removeClass("mvp-menu-active"),Js=Ri.find(".mvp-menu-item[data-value='"+e+"']").addClass("mvp-menu-active"),vd.find(".mvp-playback-rate-menu-value").text(Js.text())}function f(t,i){var a,n=t.length;for(a=0;a<n;a++){var o=t[a];o.label?(console.log(o.label),e("<li/>").addClass("mvp-menu-item").attr({"data-value":o.value,"data-label":o.label}).text(o.label).on("click",g).appendTo(Ni)):e("<li/>").addClass("mvp-menu-item").attr("data-value",o).text(o).on("click",g).appendTo(Ni)}y(i),Li.removeClass("mvp-force-hide")}function g(){if(e(this).hasClass("mvp-menu-active"))return t.closeSettingsMenuOnSelect?Vi.click():h(),!1;var i=e(this).attr("data-value");Rn.quality=i,y(i),_n?ot.setPlaybackQuality(i):X(),t.closeSettingsMenuOnSelect?Vi.click():h()}function y(e){Xs&&Xs.removeClass("mvp-menu-active"),Xs=Ni.find(".mvp-menu-item[data-value='"+e+"']").addClass("mvp-menu-active"),vd.find(".mvp-quality-menu-value").text(Xs.text())}function b(){var i=e(this).attr("data-value");"hls"==Ss&&(Kn.audioTrack=i),t.closeSettingsMenuOnSelect?Vi.click():h()}function w(){var i,a,n=Rn.subtitles.length;for(t.rememeberCaptionState&&sn&&localStorage.getItem(pn)&&(a=JSON.parse(localStorage.getItem(pn))),i=0;i<n;i++){var o=Rn.subtitles[i];if(e("<li/>").addClass("mvp-menu-item").attr({"data-value":o.value,"data-label":o.label}).text(o.label).on("click",C).appendTo(Ui),a){if(a.active&&a.value==o.label)var s=o.label}else o.default&&(s=o.label)}s||(s=t.subtitleOffText),ot.setSubtitle(s),Di.removeClass("mvp-force-hide"),Wi.show(),nr=!0}function C(){if(e(this).hasClass("mvp-menu-active"))return t.closeSettingsMenuOnSelect?Vi.click():h(),!1;var i=e(this).attr("data-label");ot.setSubtitle(i),t.closeSettingsMenuOnSelect?Vi.click():h()}function T(t){e.ajax({url:t.src}).done((function(e){var i;for(i in e=e.split(/[\r\n]/)){var a=e[i];if(/.vtt/.test(a)){t.src=t.src.substr(0,t.src.lastIndexOf("/")+1)+a;var n=!0;break}}n?P(t):console.log("Error loading subtitle!")})).fail((function(e,t,i){console.log(e,t,i)}))}function P(t){if("file:"==window.location.protocol)return console.log("Getting subtitle requires server connection."),!1;Sl=[];var i=t.src;-1!=i.indexOf("ebsfm:")&&(i=MVPUtils.b64DecodeUnicode(i.substr(6))),e.ajax({url:i}).done((function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=MVPUtils.strip(e)).split("\n\n");var i,a,n=0;for(i in e){var o=e[i].split("\n");if("WEBVTT"!=o&&2<=o.length&&"WEBVTT"!=o[0]){if(2<o.length){var s=MVPUtils.strip(o[1].split(" --\x3e ")[0]),r=MVPUtils.strip(o[1].split(" --\x3e ")[1]),l=o[2];if(3<o.length)for(a=3;a<o.length;a++)l+="\n"+o[a]}else s=MVPUtils.strip(o[0].split(" --\x3e ")[0]),r=MVPUtils.strip(o[0].split(" --\x3e ")[1]),l=o[1];Sl[n]={},Sl[n].start=MVPUtils.toSeconds(s),Sl[n].end=MVPUtils.toSeconds(r),Sl[n].text=l,n++}}El[t.label]=Sl,tr=!0,_n&&(Rl=null,je(!0))})).fail((function(e,t,i){console.log(e,t,i)}))}function x(e){if(void 0!==e){if(Sr&&1==e||!Sr&&0==e)return!1;Sr=!e}Sr?sa.one("transitionend",(function(){sa.css("display","none"),Sr=!1})).removeClass("mvp-holder-visible"):(sa.css("display","block"),setTimeout((function(){sa.addClass("mvp-holder-visible"),Sr=!0}),20))}function k(i){var a,n=_l.length;for(a=0;a<n;a++){var o=_l[a],s=Math.abs(o.end-o.start);s=s/i*100;var r=o.start/i*100;s=e('<div class="mvp-chapter-indicator"><div class="mvp-chapter-indicator-highlight"></div></div>').css({width:s+"%",left:r+"%"}).attr({"data-id":a,"data-title":o.text,"data-start":o.start,"data-end":o.end}),st||s.on("mouseenter",(function(){var t=e(this),i=t.attr("data-id");t.find(".mvp-chapter-indicator-highlight").addClass("mvp-chapter-indicator-highlight-visible"),ra.find('.mvp-chapter-menu-item[data-id="'+i+'"]').addClass("mvp-chapter-menu-item-active")})).on("mouseleave",(function(){var t=e(this),i=t.attr("data-id");_r&&_r.id==i||(t.find(".mvp-chapter-indicator-highlight").removeClass("mvp-chapter-indicator-highlight-visible"),ra.find('.mvp-chapter-menu-item[data-id="'+i+'"]').removeClass("mvp-chapter-menu-item-active"))})),t.seekToChapterStart&&s.on("click",(function(){var t=e(this);M(t.attr("data-id")),t=Number(t.attr("data-start")),_n?(ot.seek(t),Is||(Rl=null,je(!0))):(Rn.start=t,Rn.duration&&(sd=Yt.width(),Qt.width(t/Rn.duration*sd)))})),s.appendTo(Yt),o=e('<li class="mvp-chapter-menu-item">'+o.text+"</li>").attr({"data-id":a,title:o.text,"data-start":o.start}).on("click",(function(){var i=e(this);M(i.attr("data-id")),i=Number(i.attr("data-start")),_n?(ot.seek(i),Is||(Rl=null,je(!0))):(Rn.start=i,Rn.duration&&(sd=Yt.width(),Qt.width(i/Rn.duration*sd))),t.hideChapterMenuOnChapterSelect&&x(!1)})).appendTo(ra),st||o.on("mouseenter",(function(){var t=e(this),i=t.attr("data-id");Yt.find('.mvp-chapter-indicator[data-id="'+i+'"]').find(".mvp-chapter-indicator-highlight").addClass("mvp-chapter-indicator-highlight-visible"),t.addClass("mvp-chapter-menu-item-active")})).on("mouseleave",(function(){var t=e(this),i=t.attr("data-id");_r&&_r.id==i||(Yt.find('.mvp-chapter-indicator[data-id="'+i+'"]').find(".mvp-chapter-indicator-highlight").removeClass("mvp-chapter-indicator-highlight-visible"),t.removeClass("mvp-chapter-menu-item-active"))}))}xr=!0,oa.show(),t.autoOpenChapterMenu&&x()}function M(e){Mr&&Mr.removeClass("mvp-chapter-menu-item-active"),Mr=ra.find(".mvp-chapter-menu-item[data-id='"+e+"']").addClass("mvp-chapter-menu-item-active"),Er&&Er.removeClass("mvp-chapter-indicator-highlight-visible"),Er=Yt.find(".mvp-chapter-indicator[data-id='"+e+"']").find(".mvp-chapter-indicator-highlight").addClass("mvp-chapter-indicator-highlight-visible"),_r=_l[e]}function E(t){var i,a=Al.length;for(i=0;i<a;i++){var n=Al[i],o=Math.round(n.begin/t*100);n.marker=e('<div class="mvp-ad-indicator"></div>').css({left:o+"%"}).appendTo(Yt)}}function S(){fr&&fr.pause(),Cr&&Cr.clearRect(0,0,Tr,Pr)}function _(i){if(i.preventDefault(),!wn)return!1;if((i=e(i.currentTarget)).hasClass("mvp-playback-toggle"))ot.togglePlayback();else if(i.hasClass("mvp-big-play"))pi.hide(),ot.togglePlayback();else if(i.hasClass("mvp-playlist-toggle"))Ue();else if(i.hasClass("mvp-resume-continue"))D(!1),0==yn||0!=gn||zn||(zn=!0,gn=yn),ee();else if(i.hasClass("mvp-resume-restart"))D(!1),0==yn||0!=gn||zn||(zn=!0,gn=yn),Ms=0,ee();else if(i.hasClass("mvp-cc-toggle"))ot.toggleSubtitle();else if(i.hasClass("mvp-vr-toggle"))as?as.end():navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking"]}).then(a);else if(i.hasClass("mvp-info-toggle"))N();else if(i.hasClass("mvp-info-close"))N(!1);else if(i.hasClass("mvp-redirect-login-cancel"))U();else if(i.hasClass("mvp-share-close"))L(!1);else if(i.hasClass("mvp-chapter-toggle"))x();else if(i.hasClass("mvp-chapter-menu-close"))x(!1);else if(i.hasClass("mvp-minimize-close"))nl.off(cl),Q(!0),t.minimizeOnScroll=!1;else if(i.hasClass("mvp-pwd-confirm")){var n=ri.val();if(MVPUtils.isEmpty(n))alert(li);else if("undefined"==typeof md5){(i=document.createElement("script")).type="text/javascript";var o=MVPUtils.relativePath(t.md5_js)?t.md5_js:MVPUtils.qualifyURL(t.sourcePath+t.md5_js);i.src=o,i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(md5(n)!=Rn.pwd?alert(li):(delete Rn.pwd,si.addClass("mvp-holder-visible-top"),setTimeout((function(){si.css("display","none").removeClass("mvp-holder-visible-top")}),500),ri.val(""),"0"!=Rn.lockTime||tl?ee():U("watch")))},i.onerror=function(){alert("Error loading "+this.src)},(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,o)}else md5(n)!=Rn.pwd?alert(li):(delete Rn.pwd,si.addClass("mvp-holder-visible-top"),setTimeout((function(){si.css("display","none").removeClass("mvp-holder-visible-top")}),500),ri.val(""),"0"!=Rn.lockTime||tl?ee():U("watch"))}else if(i.hasClass("mvp-previous-toggle")){if(t.disableVideoSkip)return!1;Se()}else if(i.hasClass("mvp-next-toggle")){if(t.disableVideoSkip)return!1;ke()}else if(i.hasClass("mvp-rewind-toggle"))ot.seek(0);else if(i.hasClass("mvp-skip-backward-toggle"))ot.seekBackward();else if(i.hasClass("mvp-skip-forward-toggle"))ot.seekForward();else if(i.hasClass("mvp-loop-toggle"))bd.setLooping();else if(i.hasClass("mvp-shuffle-toggle"))bd.setRandom();else if(i.hasClass("mvp-share-toggle"))L();else if(i.hasClass("mvp-pip-toggle"))if(rn)if(document.pictureInPictureElement)try{document.exitPictureInPicture()}catch(e){}else try{go.requestPictureInPicture()}catch(e){}else go.webkitSupportsPresentationMode&&"function"==typeof go.webkitSetPresentationMode&&go.webkitSetPresentationMode("picture-in-picture"===go.webkitPresentationMode?"inline":"picture-in-picture");else if(i.hasClass("mvp-theater-toggle"))qn?(t.theaterElement&&e(t.theaterElement).removeClass(t.theaterElementClass),e(ot).trigger("beforeTheaterExit",{instance:ot,instanceName:t.instanceName,media:Rn}),Fa&&!t.playlistOpened&&(Fa=!1,t.playlistOpened=!0),dt.removeClass("mvp-theater"),Ne()):(t.theaterElement&&e(t.theaterElement).addClass(t.theaterElementClass),e(ot).trigger("beforeTheaterEnter",{instance:ot,instanceName:t.instanceName,media:Rn}),t.hidePlaylistOnTheaterEnter&&t.playlistOpened&&(Fa=!0,t.playlistOpened=!1),dt.addClass("mvp-theater"),Ne(),setTimeout((function(){Ne()}),250),t.focusVideoInTheater&&(i=Lt.offset().top,e("html,body").animate({scrollTop:i},500))),qn=!qn;else if(i.hasClass("mvp-share-item")){if(!Es)return!1;md&&md.share(i.attr("data-type").toLowerCase(),Rn,ot.getCurrentMediaUrl())}}function I(i){if(i.preventDefault(),!wn||t.disableVideoSkip)return!1;i=e(i.currentTarget),js=!0,Rn&&Me(),i=i.attr("data-id"),bd.processPlaylistRequest(i),e(ot).trigger("clickPlaylistItem",{instance:ot,instanceName:t.instanceName}),("outer"==Ma||st&&It.hasClass("mvp-playlist-holder-bottom"))&&(i=Lt.offset().top,nl.scrollTop()>i&&e("html,body").animate({scrollTop:i},500))}function j(t){if(t.preventDefault(),!wn)return!1;var i=(t=e(t.currentTarget)).attr("data-id");if(i=Pl[i].data,!st)if(i.hoverPreviewImg){var a=t.find(".mvp-thumbimg");a.attr("data-src",a.attr("src")).attr("src",i.hoverPreviewImg)}else i.hoverPreviewVideo&&((a=t.find(".mvp-playlist-thumb-preview").addClass("mvp-playlist-thumb-preview-visible").find(".mvp-playlist-thumb-preview-video")[0]).src=i.hoverPreviewVideo,a.load());if(Un&&Un.is(t))return!1;t.addClass("mvp-playlist-item-selected")}function O(t){if(t.preventDefault(),!wn)return!1;var i=(t=e(t.currentTarget)).attr("data-id");if(i=Pl[i].data,st||(i.hoverPreviewImg?(i=t.find(".mvp-thumbimg")).attr("src",i.attr("data-src")):i.hoverPreviewVideo&&(t.find(".mvp-playlist-thumb-preview").removeClass("mvp-playlist-thumb-preview-visible").find(".mvp-playlist-thumb-preview-video")[0].src="")),Un&&Un.is(t))return!1;t.removeClass("mvp-playlist-item-selected")}function A(){Un.removeClass("mvp-playlist-item-selected"),e(ot).trigger("playlistItemEnabled",{instance:ot,instanceName:t.instanceName}),Un=null}function V(e,i){var a=bd.getNextCounter(i);if(void 0===a)return!1;((a=Pl[a].data).thumb||a.title)&&(a.thumb?ki.css({"background-image":"url("+encodeURI(a.thumb)+")",display:"block"}):ki.css("display","none"),a.title?Ei.html(a.title):Ei.html(""),a.duration?Si.show().html(MVPUtils.formatTime(a.duration)):Si.hide().html(""));var n=(St.hasClass(t.minimizeClass)||Hn?St:dt)[0].getBoundingClientRect(),o=e[0].getBoundingClientRect(),s=Dt[0].getBoundingClientRect();a=xi.hasClass("mvp-upnext-l-side")?1==i?parseInt(o.left-n.left-xi.width()-10):parseInt(o.left-n.left+o.width+10):xi.hasClass("mvp-upnext-l-center")?parseInt(o.left-n.left-xi.width()/2+o.width/2):parseInt(o.left-n.left),n=xi.hasClass("mvp-upnext-t-center")?parseInt(o.top-n.top+o.height/2-xi.height()/2):parseInt(s.top-n.top-xi.height()-10),xi.addClass("mvp-upnext-wrap2-visible").css({left:a+"px",top:n+"px"})}function R(e){!Es||Nr||"youtube"==Es&&"default"==t.youtubePlayerType||"vimeo"==Es&&"default"==vl||"custom"==Es||"custom_html"==Es||(Ds&&clearTimeout(Ds),_n&&Cl&&(Ut.one("transitionend",(function(){Cl=!1})).addClass("mvp-player-controls-visible"),ir&&Rt.addClass("mvp-subtitle-visible"),Ca.hasClass("mvp-ad-info-start-visible")&&Ca.addClass("mvp-ad-info-start-controls-align"),Sr&&sa.addClass("mvp-holder-visible"),"fullscreen"==ed&&(document.body.style.cursor="default")),Is&&Es&&(Nr||"youtube"==Es&&"default"==t.youtubePlayerType||"vimeo"==Es&&"default"==vl||"custom"==Es||"custom_html"==Es||(Ds=window.setTimeout((function(){Is&&(Ut.one("transitionend",(function(){Cl=!0})).removeClass("mvp-player-controls-visible"),ir&&Rt.removeClass("mvp-subtitle-visible"),Ca.removeClass("mvp-ad-info-start-controls-align"),"fullscreen"==ed&&(document.body.style.cursor="none"),rd.hide(),Rn.previewSeek&&($t.hide(),hr&&S()),Sr&&sa.removeClass("mvp-holder-visible"))}),t.idleTimeout))))}function N(e){if(void 0!==e){if(As&&1==e||!As&&0==e)return!1;As=!e}As?(ii.addClass("mvp-holder-visible-top"),setTimeout((function(){ii.css("display","none").removeClass("mvp-holder-visible-top"),As=!1,Os&&(ot.playMedia(),Os=!1)}),500)):(Is&&(ot.pauseMedia(),Os=!0),ii.addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){ii.removeClass("mvp-holder-visible-top"),As=!0}),20))}function L(e){if(void 0!==e){if(Vs&&1==e||!Vs&&0==e)return!1;Vs=!e}Vs?(fi.addClass("mvp-holder-visible-top"),setTimeout((function(){fi.css("display","none").removeClass("mvp-holder-visible-top"),Vs=!1,Os&&(ot.playMedia(),Os=!1)}),500)):(Is&&(ot.pauseMedia(),Os=!0),fi.addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){fi.removeClass("mvp-holder-visible-top"),Vs=!0}),20))}function U(i){Rs?(zi.addClass("mvp-holder-visible-top"),setTimeout((function(){zi.css("display","none").removeClass("mvp-holder-visible-top"),Rs=!1,Os&&(ot.playMedia(),Os=!1)}),500)):(e(ot).trigger("beforeLoginScreen",{instance:ot,instanceName:t.instanceName,media:Rn}),Is&&(ot.pauseMedia(),Os=!0),(zi="download"==i?ia:aa).addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){zi.removeClass("mvp-holder-visible-top"),Rs=!0}),20))}function D(e){if(void 0!==e){if($s&&1==e||!$s&&0==e)return!1;$s=!e}$s?(gi.addClass("mvp-holder-visible-top"),setTimeout((function(){gi.css("display","none").removeClass("mvp-holder-visible-top"),$s=!1}),500)):(yi.html(Rn.title),gi.addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){gi.removeClass("mvp-holder-visible-top"),$s=!0}),20))}function B(i){Cn=!0,ci.show(),Bs&&xe();var a=vn.length?vn.find(i):e(i);if(0==a.length)return alert("Failed playlist selection! Playlist - "+i+" does not exist. Check activePlaylist option in settings!"),!1;zs=null!=a.attr("data-playlist-id")?a.attr("data-playlist-id"):null,Ln=i,e(ot).trigger("playlistStartLoad",{instance:ot,instanceName:t.instanceName}),Tl=-1,kl=[],Ml=[],a.find(".mvp-global-playlist-data").length&&((qs=a.find(".mvp-global-playlist-data").css("display","none").clone().prependTo(Ot)).find(".mvp-ad-section").length&&(Ar=qs.find(".mvp-ad-section")),qs.find(".mvp-annotation-section").length&&(Hr=qs.find(".mvp-annotation-section")),null!=qs.attr("data-pwd")&&(Ka=qs.attr("data-pwd")),null==qs.attr("data-start")||MVPUtils.isEmpty(qs.attr("data-start"))||(Ys=Number(qs.attr("data-start"))),null==qs.attr("data-end")||MVPUtils.isEmpty(qs.attr("data-end"))||(Ks=Number(qs.attr("data-end"))),null==qs.attr("data-playback-rate")||MVPUtils.isEmpty(qs.attr("data-playback-rate"))||(Qs=Number(qs.attr("data-playback-rate"))),null!=qs.attr("data-lock-time")&&(Ws=Number(qs.attr("data-lock-time"))),null==qs.attr("data-lock-video-user-roles")||MVPUtils.isEmpty(qs.attr("data-lock-video-user-roles"))||(Gs=qs.attr("data-lock-video-user-roles").split(","))),a.children(".mvp-playlist-item").each((function(){Ml.push(De(e(this)))})),Dn=Ml.length,F()}function z(i){if("youtube"==i)if("undefined"==typeof MVPYoutubeLoader){var a=document.createElement("script");a.type="text/javascript",a.src=MVPUtils.qualifyURL(t.sourcePath+t.youtubeLoader_js),a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||z(i)},a.onerror=function(){alert("Error loading "+this.src)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}else Co=new MVPYoutubeLoader(t),e(Co).on("MVPYoutubeLoader.END_LOAD",(function(e,t){var i,a=t.data.length;for(i=0;i<a;i++){var n=t.data[i];kl.push(n)}nn=t.nextPageToken,qa?$():F()})),an&&nn&&(Co.setDataFromCache(De(e(an))),Xr=!1);else"vimeo"==i&&("undefined"==typeof MVPVimeoLoader?((a=document.createElement("script")).type="text/javascript",a.src=MVPUtils.qualifyURL(t.sourcePath+t.vimeoLoader_js),a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||z(i)},a.onerror=function(){alert("Error loading "+this.src)},(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,n)):(_o=new MVPVimeoLoader(t),e(_o).on("MVPVimeoLoader.END_LOAD",(function(e,t){var i,a=t.data.length;for(i=0;i<a;i++){var n=t.data[i];kl.push(n)}nn=t.nextPageToken,qa?$():F()})),an&&nn&&(_o.setDataFromCache(De(e(an))),Xr=!1)))}function F(){if(++Tl>Dn-1)$();else{var i=Ml[Tl],a=i.type;if(RegExp(/^youtube/).test(a))if(i.noApi)kl.push(i),F();else if($a="youtube",i.loadMore&&(on=!0),Co)Co.setData(i);else{z("youtube");var n=setInterval((function(){Co&&(clearInterval(n),Co.setData(i))}),100)}else RegExp(/^vimeo/).test(a)?i.noApi?(kl.push(i),F()):($a="vimeo",i.loadMore&&(on=!0),_o?_o.setData(i):(z("vimeo"),n=setInterval((function(){_o&&(clearInterval(n),_o.setData(i))}),100))):"gdrive_folder"==a?function(i){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires server connection."),!1;if(MVPUtils.isEmpty(t.gDriveAppId))return console.log("gDriveAppId has not been set in settings!"),!1;e.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+i.path+"'+in+parents&pageSize=1000&key="+t.gDriveAppId,dataType:"jsonp"}).done((function(a){var n,o=a.files.length,s=[],r=[];for(n=0;n<o;n++){var l=a.files[n];/mp4/.test(l.mimeType)?r.push(l):/jpg|jpeg|png|webp/.test(l.mimeType)&&s.push(l)}for(i.sort&&("filename-asc"==i.sort?(MVPUtils.keysrt(r,"name"),MVPUtils.keysrt(s,"name")):"filename-desc"==i.sort&&(MVPUtils.keysrt(r,"name",!0),MVPUtils.keysrt(s,"name",!0))),o=r.length,n=0;n<o;n++){l=r[n],(a=e.extend(!0,{},i)).type="video",l.name.substr(l.name.lastIndexOf(".")+1);var d="https://www.googleapis.com/drive/v3/files/"+l.id+"?alt=media&key="+t.gDriveAppId;a.path=d,t.createDownloadIconsInPlaylist&&!a.download&&(a.download=d),t.createLinkIconsInPlaylist&&!a.link&&(a.link="https://drive.google.com/open?id="+l.id),!a.thumb&&s[n]&&(a.thumb="https://drive.google.com/uc?export=view&id="+s[n].id),a.title||(a.title=l.name.substr(0,l.name.lastIndexOf("."))),kl.push(a)}F()})).fail((function(e,t,i){console.log("Error processGdriveFolder: "+e,t,i),F()}))}(i):RegExp(/^folder/).test(a)?function(i){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires online server connection."),F(),!1;var a=i.type;if("folder_video"==a)var n=["mp4"];else"folder_audio"==a?(i.id3&&(so=oo=kl.length-1),n=["mp3","wav","flac","aac"]):"folder_image"==a&&(n=["jpg","jpeg","png","gif","webp"]);e.ajax({type:"GET",url:t.sourcePath+"includes/folder_parser.php",data:{type:n,dir:i.path,limit:i.limit||100},dataType:"json"}).done((function(n){i.sort&&("filename-asc"==i.sort?MVPUtils.keysrt(n,"filename"):"filename-desc"==i.sort?MVPUtils.keysrt(n,"filename",!0):"date-asc"==i.sort?MVPUtils.keysrt(n,"filemtime"):"date-desc"==i.sort&&MVPUtils.keysrt(n,"filemtime",!0));var o,s=n.length;for(o=0;o<s;o++){var r=n[o];if("folder_audio"==a){if(/mp3|wav/.test(r.basename)){var l=e.extend(!0,{},i);l.type="audio";var d=r.fullpath;"mp3"==r.extension?l.path=[{quality:"default",mp3:d}]:"wav"==r.extension&&(l.path=[{quality:"default",wav:d}]),t.requirePosterFromFolder&&(l.poster=d.substr(0,d.lastIndexOf("/")+1)+"poster/"+r.filename+".jpg"),t.requireThumbnailsFromFolder&&!l.thumb&&(l.thumb=d.substr(0,d.lastIndexOf("/")+1)+"thumb/"+r.filename+".jpg"),l.share||(l.share=d),l.title||(l.title=r.filename),kl.push(l),oo++}}else"folder_video"==a?/mp4/.test(r.basename)&&((l=e.extend(!0,{},i)).type="video",d=r.fullpath,l.path=[{quality:"default",mp4:d}],t.requirePosterFromFolder&&(l.poster=d.substr(0,d.lastIndexOf("/")+1)+"poster/"+r.filename+".jpg"),t.requireThumbnailsFromFolder&&!l.thumb&&(l.thumb=d.substr(0,d.lastIndexOf("/")+1)+"thumb/"+r.filename+".jpg"),l.share||(l.share=d),l.title||(l.title=r.filename),kl.push(l)):"folder_image"==a&&/jpg|jpeg|png|gif/.test(r.basename)&&((l=e.extend(!0,{},i)).type="image",d=r.fullpath,l.path=d,t.requireThumbnailsFromFolder&&!l.thumb&&(l.thumb=d.substr(0,d.lastIndexOf("/")+1)+"thumb/"+r.filename+".jpg"),l.share||(l.share=d),l.title||(l.title=r.filename),kl.push(l))}"folder_audio"==a&&i.id3?q():F()})).fail((function(e,t,i){console.log(e,t,i),F()}))}(i):RegExp(/^audio|^video|^image|^hls|^dash|^custom/).test(a)?(kl.push(i),F()):"xml"==a?function(t){e.ajax({type:"GET",url:t.path,dataType:"html"}).done((function(t){e(t).children(".mvp-playlist-item").each((function(){Ml.push(De(e(this)))})),Dn=Ml.length,F()})).fail((function(e,t,i){console.log(e,t,i),F()}))}(i):"json"==a&&function(t){e.ajax({type:"GET",url:t.path,dataType:"json"}).done((function(e){Tl=-1,kl=[],Ml=[],Bs=Ot,Array.isArray(e)?Ml=e:Ml.push(e),Dn=Ml.length,F()})).fail((function(e,t,i){console.log("Error processJson: "+e,t,i),F()}))}(i)}}function q(){if("undefined"==typeof jsmediatags){var e=document.createElement("script");e.type="text/javascript";var i=MVPUtils.relativePath(t.mediatags_js)?t.mediatags_js:MVPUtils.qualifyURL(t.sourcePath+t.mediatags_js);e.src=i,e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||q()},e.onerror=function(){alert("Error loading "+this.src)},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,i)}else{var a=kl[oo];jsmediatags.read(a.path[0].mp3||a.path[0].wav,{onSuccess:function(e){var t=e.tags;if(e=t.picture,t.artist&&(a.artist=t.artist),t.title&&(a.title=t.title),t.album&&(a.album=t.album),e){t="";var i,n=e.data.length;for(i=0;i<n;i++)t+=String.fromCharCode(e.data[i]);a.thumb="data:"+e.format+";base64,"+window.btoa(t)}--oo>so?q():F()},onError:function(e){console.log("ID3 error: ",e.type,e.info),--oo>so?q():F()}})}}function $(){var i,a,n=lr?rr:Pl.length,o=kl.length,s=0;for(xl=[],i=0;i<o;i++){var r=i+n;lr&&s++;var l=kl[i],d=l.type;if(lt){l.origclasses||(l.origclasses="mvp-playlist-item");var c=e('<div class="'+l.origclasses+'"/>').attr("data-type",d);if(delete l.origclasses,-1!=un.indexOf("thumb")){var p=null;if("youtube"==l.type)l.thumbnails&&(e.each(l.thumbnails,(function(e,i){if(e==t.youtubeThumbSize)return p=i.url,!1})),p||(l.thumbnails.medium?p=l.thumbnails.medium.url:l.thumbnails.high?p=l.thumbnails.high.url:l.thumbnails.standard&&(p=l.thumbnails.standard.url)),t.showControlsBeforeStart&&!l.poster&&(l.thumbnails.maxres?l.poster=l.thumbnails.maxres.url:l.thumbnails.high?l.poster=l.thumbnails.high.url:l.thumbnails.standard&&(l.poster=l.thumbnails.standard.url)));else if("vimeo"==l.type&&l.pictures){var u=l.pictures.sizes,m=u.length;for(a=0;a<m;a++)if(u[a].width==mn){p=u[a].link;break}if(!p)for(a=0;a<m;a++)if(295==u[a].width||640==u[a].width){p=u[a].link;break}if(t.showControlsBeforeStart&&!l.poster)for(a=0;a<m;a++)if(1280==u[a].width||1920==u[a].width){l.poster=u[a].link;break}}p||(p=l.thumb||l.thumbDefault),p&&(u=e("<div/>").addClass("mvp-playlist-thumb").appendTo(c),a=l.alt?l.alt:l.title?l.title.replace(/"/g,"'"):"image",e(new Image).addClass("mvp-thumbimg").appendTo(u).attr({src:p,alt:a}),l.hoverPreview&&(-1<l.hoverPreview.indexOf(".gif")?l.hoverPreviewImg=l.hoverPreview:(l.hoverPreviewVideo=l.hoverPreview,e('<div class="mvp-playlist-thumb-preview"><video class="mvp-playlist-thumb-preview-video" loop="true" playsinline="true" preload="auto" muted="true" autoplay="true" src=""></video></div>').appendTo(u))),l.thumb=p,-1<un.indexOf("duration")&&l.duration&&e('<span class="mvp-playlist-duration">'+MVPUtils.formatTime(l.duration)+"</span>").appendTo(u),t.displayWatchedPercentage&&e('<div class="mvp-media-watched-bg mvp-hidden"><div class="mvp-media-watched-progress"></div></div>').appendTo(u))}if(l.title||l.description||l.publishedAt)for(u=e('<div class="mvp-playlist-info"></div>').appendTo(c),m=un.length,a=0;a<m;a++){var h=un[a];if("title"==h&&l.title)h=l.title.replace(/"/g,"'"),c.attr("title",h),e('<span class="mvp-playlist-title">'+h+"</span>").appendTo(u);else if("date"==h&&l.date)h=(h=new Date(l.date)).getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear(),e('<span class="mvp-playlist-published-date">'+h+"</span>").appendTo(u);else if("description"==h&&l.description){h=l.description.replace(/"/g,"'"),c.attr("data-description",h);var v="";t.limitDescriptionText&&(v=" mvp-playlist-description-clamp"),e('<div class="mvp-playlist-description'+v+'">'+h+"</div>").appendTo(u)}}if(null!=l.mediaId?c.attr("data-media-id",l.mediaId):l.path&&t.getWatchedPercentage&&c.attr("data-media-url",l.path),l.title&&(a=(a=(a=l.title.replace(/['"\|]/g,"")).replace(/[^a-z\d,\s\.]+/gi,"")).replace(/\s+/g," "),c.attr("data-safe-title",a),l.safeTitle=a),l.category&&c.attr("data-category",l.category),l.tag&&c.attr("data-tag",l.tag),l.customContent&&(c.append(l.customContent),delete l.customContent),lr){f?f.after(c):sr?c.appendTo(Ot):Ot.children("div").eq(rr).before(c);var f=c}else c.appendTo(Ot);lt&&t.addPlaylistEvents&&(c.on("click",I),!st)&&c.on("mouseenter",j).on("mouseleave",O)}else t.useStatistics&&null!=l.mediaId&&l.title&&(a=l.title.replace(/['"\|]/g,""),l.safeTitle=a);null!=zs&&(l.playlistId=zs),Pl.splice(r,0,{id:r,type:d,data:l}),xl.push({id:r,type:d,data:l})}Bs=Ot,H(),lr?(r=bd.getCounter(),bd.setPlaylistItems(Dn,!1),rr<=r&&(sr||bd.reSetCounter(r+s)),dr&&!st&&(fn=!0),dr&&(vo=!1,bd.setCounter(rr,!1))):bd.setPlaylistItems(Dn),W()}function H(){if(Dn=Pl.length,lt){var t=0;Ot.find(".mvp-playlist-item").each((function(){e(this).attr("data-id",t),Pl[t].id=t,t++}))}else for(t=0;t<Dn;t++)Pl[t].id=t}function W(){if(Cn=!1,!wn){if(wn=!0,qs&&(Ha=parseInt(qs.attr("data-add-more-limit"),10),Wa=parseInt(qs.attr("data-add-more-num-results"),10),Ga=parseInt(qs.attr("data-add-more-offset"),10),Qa=qs.attr("data-add-more-sort-order"),Ja=qs.attr("data-add-more-sort-direction"),Ya=qs.attr("data-encrypt-media-paths"),null!=qs.attr("data-taxonomy")&&(Xa=qs.attr("data-taxonomy")),null!=qs.attr("data-category")&&(Za=qs.attr("data-category")),null!=qs.attr("data-tag")&&(en=qs.attr("data-tag")),null!=qs.attr("data-match")&&(tn=qs.attr("data-match")),null!=qs.attr("data-add-more-on-total-scroll")&&(Tn=!0),null!=qs.attr("data-use-pagination")&&(Mn=Math.ceil(Wa/Ha),Wa>Ha))){var i;for(qe(En=0),i=0;i<Mn;i++){var a=0==i?{page:0}:{page:null};dl.push(a)}Fe()}lt&&""!=ka&&!cr&&("undefined"==typeof MVPPlaylistNavigation?((i=document.createElement("script")).type="text/javascript",i.src=MVPUtils.qualifyURL(t.sourcePath+t.playlist_navigation_js),i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Y()},i.onerror=function(){alert("Error loading "+this.src)},(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)):Y(),cr=!0),Lt.on("mousemove mousedown keypress DOMMouseScroll mousewheel touchmove MSPointerMove",R),e(ot).trigger("setupDone",{instance:ot,instanceName:t.instanceName}),ci.hide(),t.createPlayer&&ci.appendTo(Lt),Ne(),St.css("opacity",1),t.minimizeOnScroll&&(Ps=MVPUtils.getElementOffsetTop(dt[0]),nl.on(cl,(function(){xs||(xs=!0,t.minimizeOnScrollOnlyIfPlaying?Is&&Q():Q(),setTimeout((function(){xs=!1}),100))})))}if(Nl&&!Xr&&He(),lt&&0<Dn){"javascript"==t.gridType&&t.breakPointArr&&(G(),mr=pr,Ot.find(".mvp-playlist-item").each((function(){if(0<ur){var t=100/pr;e(this).css({marginLeft:0,marginTop:0,marginRight:ur+"px",marginBottom:ur+"px",width:"calc("+t+"% - "+ur+"px)"})}else e(this).css({marginLeft:0,marginTop:0,marginRight:ur+"px",marginBottom:ur+"px",width:100/pr+"%"})}))),"h"==Ia&&Ot.width(Dn*t.pi_size);var n=[];Ot.find(".mvp-thumbimg:not(.mvp-visible)").each((function(){n.push(e(this))}));var o=0;for(i=n.length,a=0;a<i;a++)setTimeout((function(){clearTimeout(this),n[o].addClass("mvp-visible"),o++}),50+50*a);t.displayWatchedPercentage&&lt&&function(){console.log("getWatchedPercentage");var i,a=[];for(i=0;i<Dn;i++){var n=Pl[i].data;n.watchedSet||(null!=n.mediaId?(a.push({media_id:n.mediaId,url:n.safeTitle||""}),n.watchedSet=!0):n.path&&(a.push({media_id:null,url:n.path}),n.watchedSet=!0))}a.length&&(i=[{name:"action",value:"mvp_get_watched_percentage"},{name:"data",value:JSON.stringify(a)}],console.log(i),e.ajax({url:t.ajax_url,type:"post",data:i,dataType:"json"}).done((function(e){if(console.log("response ",e),e){var t,i,a=e.length;for(t=0;t<a;t++){var n=e[t];if(n.media_id&&n.title?i=Ot.find('.mvp-playlist-item[data-media-id="'+n.media_id+'"][data-safe-title="'+n.title+'"]'):n.title&&(i=Ot.find('.mvp-playlist-item[data-media-url="'+n.title+'"]')),i&&i.length){var o=n.watched/n.duration*100;100<o&&(o=100),n.watched+.1>=n.duration&&i.attr("data-watched-complete","1"),i.find(".mvp-media-watched-progress").width(o+"%"),i.find(".mvp-media-watched-bg").removeClass("mvp-hidden")}}}})).fail((function(e,t,i){console.log("Error mvp_get_watched_percentage: "+e.responseText,t,i)})))}(),"scroll"==ka&&"perfect-scrollbar"==t.playlistScrollType&&$n&&$n.updateScrollPosition()}if(!Fs&&!lr&&0<Dn){if(null!=t.mediaId){if(t.mediaTitle?(0==(i=Ot.find(".mvp-playlist-item[data-media-id="+t.mediaId+'][title="'+t.mediaTitle+'"]')).length&&(i=Ot.find(".mvp-playlist-item[data-media-id="+t.mediaId+"]")),delete t.mediaTitle):i=Ot.find(".mvp-playlist-item[data-media-id="+t.mediaId+"]"),null==(i=Ot.children(".mvp-playlist-item").index(i))||-1==i)return alert("No media with ID to load! LoadMedia failed."),!1;delete t.mediaId,bd.processPlaylistRequest(i)}else(i=t.activeItem)>Dn-1&&(i=Dn-1),-1<i&&bd.setCounter(i,!1);Fs=!0}lr=!1,ci.hide(),qa&&(qa=!1,"buttons"==ka&&$n&&$n.showButtons("forward")),Wl&&(on?nn?Wl.css("opacity",1):(Wl.remove(),Wl=null,on=!1):Tn?0<Wa&&(Wa>Ga?Wl.css("opacity",1):(Wl.remove(),Wl=null,Tn=!1)):(Wl.remove(),Wl=null)),e(ot).trigger("playlistEndLoad",{instance:ot,instanceName:t.instanceName,loadMoreOnTotalScroll:on,addMoreOnTotalScroll:Tn}),"masonry"==t.gridType&&(yd?Ot.masonry("reloadItems"):(Ot.prepend('<div class="mvp-grid-sizer"></div>'),dt.addClass("mvp-masonry"),void 0===e.fn.masonry&&console.log("Link to masonry.pkgd.min.js file missing in head tag!"),"function"!=typeof imagesLoaded&&console.log("Link to imagesloaded.pkgd.min file missing in head tag!"),yd=Ot.masonry({itemSelector:".mvp-playlist-item"})),Ot.imagesLoaded((function(){yd.masonry("layout")})))}function G(){var e,i=dt.width(),a=t.breakPointArr.length;for(e=0;e<a;e++){var n=t.breakPointArr[e];i>n.width&&(pr=n.column,ur=n.gutter)}jt.css({paddingTop:ur+"px",paddingLeft:ur+"px"})}function Y(){t.parent=ot,t.wrapper=dt,t.playlistHolder=It,t.playlistInner=jt,t.playlistContent=Ot,$n=new MVPPlaylistNavigation(t)}function K(){MVPUtils.isScrolledIntoView(dt[0])?(fn=Ts=!0,ot.playMedia()):nl.on(pl,(function(){xs||(xs=!0,MVPUtils.isScrolledIntoView(dt[0])?(fn=Ts=!0,ot.playMedia()):ot.pauseMedia(),setTimeout((function(){xs=!1}),250))}))}function Q(e){"fullscreen"!=ed&&(!e&&MVPUtils.getScrollTop()>Ps?St.hasClass(t.minimizeClass)||(St.addClass(t.minimizeClass),t.hidePlaylistOnMinimize&&t.playlistOpened&&(t.playlistOpened=!1)):St.hasClass(t.minimizeClass)&&(St.removeClass(t.minimizeClass),t.hidePlaylistOnMinimize&&!t.playlistOpened&&(t.playlistOpened=!0)),Ne())}function J(){if(ks=!1,"youtube_single"==Rn.type?Rn.type="youtube":"vimeo_single"==Rn.type&&(Rn.type="vimeo"),"audio"!=(Es=Rn.type)&&"video"!=Es||!Array.isArray(Rn.path)?_s=Rn.path:(X(),t.hideQualityMenuOnSingleQuality&&1==wl.length||wl.length&&f(wl,Rn.quality)),-1!=_s.indexOf("ebsfm:")&&(_s=MVPUtils.b64DecodeUnicode(_s.substr(6))),"hls"==Es?(Es="video",Ss="hls"):"dash"==Es&&(Es="video",Ss="dash"),fo=!1,Nr||Vr||("audio"==Es?hn&&!t.displayPosterOnMobile||(Rn.slideshowImages||Rn.poster)&&(fo=!0):"video"==Es||"youtube"==Es||"vimeo"==Es?Rn.poster&&!t.autoPlayInViewport&&(fo=!0):("custom"==Es||"custom_html"==Es)&&Rn.poster&&(fo=!0)),Rn.pwd?!t.autoPlay&&fo?Z():(si.addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){si.removeClass("mvp-holder-visible-top")}),20)):"0"!=Rn.lockTime||tl?!t.autoPlay&&fo?Z():ee():U("watch"),"lightbox"!=t.playerType||Hn||(Hn=!0,ut.css("display","block"),Ne(),1!=ut.css("opacity")&&setTimeout((function(){clearTimeout(this),ut.css("opacity",1)}),50)),t.scrollToPlayer&&"lightbox"!=t.playerType){delete t.scrollToPlayer;var i=Lt.offset().top;e("html,body").animate({scrollTop:i},500)}}function X(){wl=[];var e,t=Rn.path.length,i=Rn.quality;for(i||(i=Rn.path[0].quality),Rn.quality=i,e=0;e<t;e++){var a,n=Rn.path[e];wl.push(n.quality);e:for(a in n)if(n[a]==i){"audio"==Es?Da&&n.wav?_s=n.wav:Da&&"wav"==n.ext?_s=n.src:Ua&&n.mp3?_s=n.mp3:Ua&&"mp3"==n.ext&&(_s=n.src):"video"==Es&&(La&&n.mp4?_s=n.mp4:La&&"mp4"==n.ext&&(_s=n.src));break e}}-1!=_s.indexOf("ebsfm:")&&(_s=MVPUtils.b64DecodeUnicode(_s.substr(6)))}function Z(){if(Pt||(Pt=e('<div class="mvp-poster-holder"/>').appendTo(_t)),"audio"==Es?(vo=!0,Rn.slideshowImages?(Pt.empty().show(),or||(or=new MVPImageSlideshow({holder:Pt,settings:t,media:Rn})),or.setData(Rn),fn?ee():pi.show()):e(new Image).addClass("mvp-media").appendTo(Pt.empty().show()).on("load",(function(){(ho=e(this)).addClass("mvp-visible mvp-media-img"),t.displayPosterOnMobile||(fn?ee():(pi.show(),Nr&&wa.show()))})).on("error",(function(e){console.log(e)})).attr({src:Rn.poster,alt:Rn.title})):"video"==Es||"youtube"==Es||"vimeo"==Es?(Ut.css("display","none").removeClass("mvp-player-controls-visible"),vo=Cl=!0,e(new Image).addClass("mvp-media").appendTo(Pt.empty().show()).on("load",(function(){(ho=e(this)).addClass("mvp-visible mvp-media-img"),ci.hide(),t.displayPosterOnMobile||(pi.show(),Nr&&wa.show())})).on("error",(function(e){console.log(e)})).attr({src:Rn.poster,alt:Rn.title})):"custom"!=Es&&"custom_html"!=Es||(Ut.css("display","none").removeClass("mvp-player-controls-visible"),vo=Cl=!0,e(new Image).addClass("mvp-media").appendTo(Pt.empty().show()).on("load",(function(){(ho=e(this)).addClass("mvp-visible mvp-media-img"),ci.hide(),pi.show()})).on("error",(function(e){console.log(e)})).attr({src:Rn.poster,alt:Rn.title})),t.showControlsBeforeStart&&(te(),Rn.duration&&!Nr)){Fr||(t.createAdMarkers&&Al.length&&E(Rn.duration),Fr=!0),qt.html(MVPUtils.formatTime(Rn.duration)),v(Rn.playbackRate||1);var i=setInterval((function(){nr&&kr&&Gn&&(clearInterval(i),Ut.css("display","block"),Ut.one("transitionend",(function(){Cl=!1})).addClass("mvp-player-controls-visible"),Sr&&sa.addClass("mvp-holder-visible"))}),100)}}function ee(){if("audio"==Es||!ho&&!Rn.slideshowImages||_n||(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),pi.hide(),ci.show()),Rn.is360){if("undefined"==typeof THREE){var i=document.createElement("script");i.type="text/javascript";var a=MVPUtils.relativePath(t.three_js)?t.three_js:MVPUtils.qualifyURL(t.sourcePath+t.three_js);return i.src=a,i.onload=i.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState)if(void 0===THREE.OrbitControls){var e=document.createElement("script");e.type="text/javascript";var i=MVPUtils.relativePath(t.orbitControls_js)?t.orbitControls_js:MVPUtils.qualifyURL(t.sourcePath+t.orbitControls_js);e.src=i,e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||ee()},e.onerror=function(){alert("Error loading "+this.src)},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,i)}else ee()},i.onerror=function(){alert("Error loading "+this.src)},void(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)}if(void 0===THREE.OrbitControls)return(i=document.createElement("script")).type="text/javascript",a=MVPUtils.relativePath(t.orbitControls_js)?t.orbitControls_js:MVPUtils.qualifyURL(t.sourcePath+t.orbitControls_js),i.src=a,i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||ee()},i.onerror=function(){alert("Error loading "+this.src)},void(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)}if("hls"!=Ss||Xn){if("dash"==Ss){if(!ao)return void("undefined"==typeof dashjs?(i=document.createElement("script"),i.type="text/javascript",a=MVPUtils.relativePath(t.dash_js)?t.dash_js:MVPUtils.qualifyURL(t.sourcePath+t.dash_js),i.src=a,i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(we(),ee())},i.onerror=function(){alert("Error loading "+this.src)},a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(i,a)):(we(),ee()))}else if("audio"==Es&&hn&&!t.displayPosterOnMobile&&"undefined"==typeof MVPAudioEqualizer)return mo||(mo=e('<canvas class="mvp-canvas-audio mvp-media"/>').prependTo(_t)),(i=document.createElement("script")).type="text/javascript",i.src=MVPUtils.qualifyURL(t.sourcePath+t.equalizer_js)+"?="+Math.random(),i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(uo=new MVPAudioEqualizer({holder:_t,canvas:mo[0]}),ee())},i.onerror=function(){alert("Error loading "+this.src)},void(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a);if(vo&&(Ms=Rn.start||0,vo=!1),Vr&&!Nr&&(Ms=Vr,Vr=null),null==t.playbackPositionTime||Nr){if(("audio"==Es||"video"==Es||"youtube"==Es&&"chromeless"==t.youtubePlayerType&&fn&&Eo||"vimeo"==Es&&"chromeless"==vl&&fn&&Fo)&&ci.show(),"audio"==Es)ro||(lo=e(document.createElement("audio")).attr("preload",t.preload),co=lo[0],ro=!0),po=!1,co.src=_s,lo.on("ended",(function(){Ve()})).on("loadedmetadata",(function(){setTimeout((function(){po||lo.trigger("canplay")}),1e3)})).on("canplay",(function(){if(!po){if(po=!0,u(),Rn.playbackRate&&(co.playbackRate=Number(Rn.playbackRate)),v(co.playbackRate),Ms?co.currentTime=Ms:Rn.start&&(co.currentTime=Rn.start),fn||null!=Ms){var e=co.play();void 0!==e&&e.then((function(){})).catch((function(e){pi.show(),ci.hide()}))}else pi.show(),ci.hide();Nr&&wa.show(),Ms=null,t.autoPlayInViewport&&!Ts&&K()}})).on("play",(function(){_e()})).on("pause",(function(){Ie()})).on("ratechange",(function(){v(co.playbackRate)})).on("error",(function(i){console.log(i),e(ot).trigger("mediaError",{instance:ot,instanceName:t.instanceName,media:Rn})})),fn&&co.load();else if("video"==Es){if(Rn.posterFrameTime&&(_s+="#t="+Rn.posterFrameTime),wo=!1,bo||(bt||(bt=e('<div class="mvp-video-holder"/>').prependTo(_t)),i=" playsinline",t.useMobileNativePlayer&&(i=""),bt.html('<video class="mvp-media" preload="'+t.preload+'"'+i+"></video>")),yo=bt.find(".mvp-media"),go=yo[0],Rn.is360?bt.hide():bt.show(),bl&&Rn.is360)if("file:"==window.location.protocol&&console.log("Playing 360 videos requires online server connection!"),"monoscopic"==Rn.vrMode)Ho||(Ho=!0,(Yo=new THREE.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),Yo.setSize(640,360),Yo.domElement.className+="mvp-canvas-video mvp-canvas-video-m mvp-media",_t.prepend(e(Yo.domElement)),Go=_t.find(".mvp-canvas-video-m"),Ko=new THREE.Texture(go),Qo=new THREE.Scene,(i=new THREE.SphereGeometry(500,60,40)).scale(-1,1,1),a=new THREE.MeshBasicMaterial({map:Ko}),i=new THREE.Mesh(i,a),Qo.add(i),ls||(ls=!0,(os=new THREE.PerspectiveCamera(75,640/360,1,1100)).position.x+=.1,!ns&&st&&"stereoscopic"==Rn.vrModeOrig&&t.enablePerspectiveWhenVrNotAvailable&&("function"!=typeof THREE.DeviceOrientationControls?ts=new THREE.DeviceOrientationControls(os):alert("DeviceOrientationControls missing"))),cs||(cs=!0,(rs=new THREE.OrbitControls(os,_t[0])).enableZoom=!1,rs.enableKeys=!1));else if("stereoscopic"==Rn.vrMode&&!Wo){Wo=!0,(Xo=new THREE.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),Xo.setSize(640,360),Xo.xr.enabled=!0,Xo.xr.setReferenceSpaceType("local"),Xo.domElement.className+="mvp-canvas-video mvp-canvas-video-s mvp-media",_t.prepend(e(Xo.domElement)),Jo=_t.find(".mvp-canvas-video-s"),Zo=new THREE.Texture(go),es=new THREE.Scene,(i=new THREE.SphereGeometry(500,60,40)).scale(-1,1,1),a=i.attributes.uv.array;for(var n=0;n<a.length;n+=2)a[n]*=.5;for(a=new THREE.MeshBasicMaterial({map:Zo}),(i=new THREE.Mesh(i,a)).rotation.y=-Math.PI/2,i.layers.set(1),es.add(i),(i=new THREE.SphereGeometry(500,60,40)).scale(-1,1,1),a=i.attributes.uv.array,n=0;n<a.length;n+=2)a[n]*=.5,a[n]+=.5;a=new THREE.MeshBasicMaterial({map:Zo}),(i=new THREE.Mesh(i,a)).rotation.y=-Math.PI/2,i.layers.set(2),es.add(i),ds||(ds=!0,(ss=new THREE.PerspectiveCamera(70,640/360,1,2e3)).layers.enable(1),"function"!=typeof THREE.DeviceOrientationControls?ts=new THREE.DeviceOrientationControls(ss):alert("DeviceOrientationControls missing"))}if(yo.on("ended",(function(){Ve()})).on("loadedmetadata",(function(){setTimeout((function(){wo||yo.trigger("canplay")}),1e3)})).on("canplay",(function(){if(!wo){if(wo=!0,t.selectorInit&&!zn&&(gn=yn,zn=!0),u(),Rn.playbackRate&&(go.playbackRate=Number(Rn.playbackRate)),v(go.playbackRate),Ms?go.currentTime=Ms:Rn.start&&(go.currentTime=Rn.start),fn||null!=Ms){var e=go.play();void 0!==e&&e.then((function(){})).catch((function(e){pi.show(),ci.hide()}))}else pi.show(),ci.hide();if(Nr&&wa.show(),Ms=null,t.autoPlayInViewport&&!Ts&&K(),(rn||go.webkitSupportsPresentationMode&&"function"==typeof go.webkitSetPresentationMode)&&Hi.show(),hr)if("hls"==Ss)if(Qn)gr.attachMedia(fr);else if("true"==fr.canPlayType("application/vnd.apple.mpegurl"))fr.src=_s;else if(Rn.mp4)fr.src=Rn.mp4,fr.load();else try{fr.src=_s,fr.load()}catch(e){console.log("This browser or device does not support HLS extension. Please use mp4 video for playback!")}else"dash"==Ss?hl?br?yr.attachSource(_s):(yr.initialize(fr,_s,!0),br=!0):Rn.mp4?(fr.src=Rn.mp4,fr.load()):console.log("This browser or device does not support MPEG-DASH extension. Please use mp4 video for playback!"):(fr.src=_s,fr.load())}})).on("canplaythrough",(function(){yo.addClass("mvp-visible")})).on("waiting",(function(){"hls"!=Ss&&"dash"!=Ss&&"loop"!=t.mediaEndAction&&ci.show()})).on("playing",(function(){ci.hide()})).on("play",(function(){_e()})).on("pause",(function(){go.duration!=go.currentTime&&Ie()})).on("seeking",(function(){ci.show()})).on("seeked",(function(){ci.hide(),bl&&Rn.is360&&(is=!0)})).on("ratechange",(function(){v(go.playbackRate)})).on("error",(function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:console.log("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:console.log("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:console.log("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.log("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:console.log("An unknown error occurred.")}})),"hls"==Ss)if(Qn)Kn.attachMedia(go);else if("true"==go.canPlayType("application/vnd.apple.mpegurl"))go.src=_s;else if(Rn.mp4)go.src=Rn.mp4,go.load();else try{go.src=_s,go.load()}catch(e){alert("This browser or device does not support HLS extension. Please use mp4 video for playback!")}else"dash"==Ss?hl?no?io.attachSource(_s):(io.initialize(go,_s,fn),no=!0):Rn.mp4?(go.src=Rn.mp4,go.load()):alert("This browser or device does not support MPEG-DASH extension. Please use mp4 video for playback!"):(go.src=_s,go.load());bo=!0}else if("image"==Es)xt||(xt=e('<div class="mvp-image-holder"/>').prependTo(_t).hide()),Rn.is360?("file:"==window.location.protocol&&console.log("Playing 360 video and images requires online server connection!"),hs||(bs=new THREE.Scene,(i=new THREE.SphereBufferGeometry(500,60,40)).scale(-1,1,1),gs=new THREE.TextureLoader,ys=new THREE.MeshBasicMaterial({map:gs}),Cs=new THREE.Mesh(i,ys),bs.add(Cs),(ws=new THREE.WebGLRenderer).setPixelRatio(window.devicePixelRatio),ws.setSize(640,360),ws.domElement.className+="mvp-canvas-image mvp-media",_t.prepend(e(ws.domElement)),fs=_t.find(".mvp-canvas-image"),ls||(ls=!0,(os=new THREE.PerspectiveCamera(90,640/360,.1,1e4)).position.x+=.1),cs||(cs=!0,(rs=new THREE.OrbitControls(os,_t[0])).enableZoom=!1,rs.enableKeys=!1),hs=!0),gs.load(_s,(function(e){fs.show(),fs.addClass("mvp-visible"),ys.map=e,e=_t.width();var i=_t.height();ws.setSize(e,i),os.aspect=e/i,os.updateProjectionMatrix(),rs.addEventListener("change",ge),ws.render(bs,os),Is=_n=!0,t.autoRotatePanorama&&(rs.autoRotate=!0,rs.autoRotateSpeed=t.autoRotateSpeed,is=!0,On&&cancelAnimationFrame(On),On=requestAnimationFrame(ye)),Et&&setTimeout((function(){Et.show(300),$o=!0}),1e3),vs=!0,Rn.duration&&(ps=(new Date).getTime(),us=1e3*Rn.duration,ms&&clearTimeout(ms),ms=setTimeout((function(){clearTimeout(this),As||Vs||Ve()}),us))}),(function(e){}),(function(e){}))):(ci.show(),e(new Image).addClass("mvp-media mvp-media-img").prependTo(xt.show()).on("load",(function(){ci.hide(),e(this).addClass("mvp-visible"),Is=_n=!0,Rn.duration&&(ps=(new Date).getTime(),us=1e3*Rn.duration,ms&&clearTimeout(ms),ms=setTimeout((function(){clearTimeout(this),As||Vs||Ve()}),us))})).on("error",(function(e){console.log(e)})).attr({src:_s,alt:_s})),Nr?Rn.duration&&(la.show(),Il=da.width(),wa.find(".mvp-volume-toggle").hide(),wa.show(),jn&&(clearInterval(jn),jn=null),jn=setInterval(je,500)):(Ut.css("display","block"),Ds&&clearTimeout(Ds),R());else if("youtube"==Es){if(xo)ko&&(i=0,Ms?i=Ms:Rn.start&&(i=Rn.start),fn?Po.loadVideoById({videoId:_s,startSeconds:i,endSeconds:Rn.end}):Po.cueVideoById({videoId:_s,startSeconds:i,endSeconds:Rn.end}));else{var o="ytplayer"+Math.floor(16777215*Math.random());wt=e('<div class="mvp-youtube-holder"><div id="'+o+'" class="mvp-media mvp-emiframe"></div></div>').css("display","block").prependTo(_t);var s={height:"100%",width:"100%",playerVars:{controls:"chromeless"==t.youtubePlayerType?0:1,modestbranding:1,playsinline:t.useMobileNativePlayer?0:1,rel:0,wmode:"transparent",iv_load_policy:3,cc_load_policy:0,showinfo:0,disablekb:1,color:t.youtubePlayerColor},videoId:_s,events:{onReady:ie,onPlaybackQualityChange:ae,onPlaybackRateChange:ne,onStateChange:oe,onError:se}};i=(i=window.location.href.split("/"))[0]+"//"+i[2],/^http/.test(i)&&(s.playerVars.origin=i),Ms?s.playerVars.start=Ms:Rn.start&&(s.playerVars.start=parseInt(Rn.start,10)),Rn.end&&(s.playerVars.end=parseInt(Rn.end,10)),console.log(s),window.YT||((a=document.createElement("script")).src=t.youtube_js,(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,i));var r=setInterval((function(){window.YT&&window.YT.Player&&(r&&clearInterval(r),Po=new YT.Player(o,s))}),100);xo=!0}wt.show()}else"vimeo"==Es?"default"==(vl="chromeless"==t.vimeoPlayerType?Rn.userAccount&&"basic"==Rn.userAccount?"default":"chromeless":"default")?Ro?(Oo=Ct,Io=Lo,jo=Ao,Do&&(Oo.show(),jo.loadVideo(_s),setTimeout((function(){clearTimeout(this),pe()}),500))):(Ct||(Ct=e('<div class="mvp-vimeo-holder-default"/>').prependTo(_t)),Lo=re("0"),Ct.show().append(Lo),Oo=Ct,Io=Lo,window.Vimeo||((a=document.createElement("script")).src=t.vimeo_js,(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,i)),r=setInterval((function(){window.Vimeo&&(r&&clearInterval(r),(jo=Ao=new Vimeo.Player(Lo[0])).on("loaded",pe),jo.on("play",le),jo.on("pause",de),jo.on("ended",me),jo.on("error",fe),dn&&jo.on("timeupdate",ue),Do=!0)}),100),Ro=!0):No?(Oo=Tt,Io=Uo,jo=Vo,Bo&&(Oo.show(),jo.loadVideo(_s),setTimeout((function(){clearTimeout(this),pe()}),500))):(Tt||(Tt=e('<div class="mvp-vimeo-holder-chromeless"/>').prependTo(_t)),Uo=re("1"),Tt.show().append(Uo),Oo=Tt,Io=Uo,window.Vimeo||((a=document.createElement("script")).src=t.vimeo_js,(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,i)),r=setInterval((function(){window.Vimeo&&(r&&clearInterval(r),(jo=Vo=new Vimeo.Player(Uo[0])).on("loaded",pe),jo.on("play",le),jo.on("pause",de),jo.on("ended",me),jo.on("error",fe),jo.on("seeking",he),jo.on("seeked",ve),"chromeless"==vl&&(jo.on("playbackratechange",ce),jo.on("timeupdate",ue)),Bo=!0)}),100),No=!0):"custom"==Es?(ci.show(),kt||(kt=e('<div class="mvp-custom-holder mvp-media"/>').prependTo(_t)),kt.show().load(_s,(function(e,t,i){"error"==t?console.log(i.status+" "+i.statusText):"success"==t&&(kt.addClass("mvp-visible"),ci.hide(),_n=!0)})),Ut.css("display","none").removeClass("mvp-player-controls-visible"),Cl=!0):"custom_html"==Es&&(ci.show(),kt||(kt=e('<div class="mvp-custom-holder mvp-media"/>').prependTo(_t)),i=vn.find(e("#"+_s)).html(),kt.html(i).show().addClass("mvp-visible"),ci.hide(),_n=!0,Ut.css("display","none").removeClass("mvp-player-controls-visible"),Cl=!0);ks||Fn||te()}else console.log(Ms),Ms=t.playbackPositionTime,delete t.playbackPositionTime,ci.hide(),D()}else"undefined"==typeof Hls?((i=document.createElement("script")).type="text/javascript",a=MVPUtils.relativePath(t.hls_js)?t.hls_js:MVPUtils.qualifyURL(t.sourcePath+t.hls_js),i.src=a,i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(be(),ee())},i.onerror=function(){alert("Error loading "+this.src)},(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)):(be(),ee())}function te(){if(Nr)e(ot).trigger("adRequest",{instance:ot,instanceName:t.instanceName,media:Rn});else{if(Fn=!0,$r){var i=0;if($r.find(".mvp-annotation").each((function(){var t=e(this).clone().attr("data-id",i).appendTo(Nt);if(t.hasClass("mvp-adsense-detail")){var a='<ins class="adsbygoogle" style="display:inline-block;';null!=t.attr("data-width")&&null!=t.attr("data-height")&&(a+="width:"+t.attr("data-width")+"px;height:"+t.attr("data-height")+"px;"),ans+='"',ans+=' data-ad-client="'+t.attr("data-ad-client")+'" data-ad-slot="'+t.attr("data-ad-slot")+'"></ins>',e(a).prependTo(t),Wr=!0}else t.hasClass("mvp-adsense-code")&&(Wr=!0);Vl.push({id:i,start:isNaN(parseInt(t.attr("data-show"),10))?0:parseInt(t.attr("data-show"),10),end:isNaN(parseInt(t.attr("data-hide"),10))?1e5:parseInt(t.attr("data-hide"),10),item:t}),i++})),Nt.show(),Wr)if("undefined"==typeof adsbygoogle){if("file:"!=window.location.protocol){var a=document.createElement("script");a.type="text/javascript";var n=MVPUtils.relativePath(t.adsbygoogle_js)?t.adsbygoogle_js:MVPUtils.qualifyURL(t.sourcePath+t.adsbygoogle_js);a.src=n,a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Nt.find(".adsbygoogle").each((function(){(adsbygoogle=window.adsbygoogle||[]).push({})}))},a.onerror=function(){alert("Error loading "+this.src)},(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,n)}}else Nt.find(".adsbygoogle").each((function(){(adsbygoogle=window.adsbygoogle||[]).push({})}))}("audio"==Es||"video"==Es||"youtube"==Es&&"chromeless"==t.youtubePlayerType||"vimeo"==Es&&"chromeless"==vl)&&(Rn.subtitles?(nr=!1,w()):nr=!0,Rn.chapters?(kr=!1,_l=[],e.ajax({url:Rn.chapters}).done((function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=MVPUtils.strip(e)).split("\n\n");var i,a,n=0;for(i in e){var o=e[i].split("\n");if("WEBVTT"!=o){if(2<=o.length)if(2<o.length){var s=MVPUtils.strip(o[1].split(" --\x3e ")[0]),r=MVPUtils.strip(o[1].split(" --\x3e ")[1]),l=o[2];if(2<o.length)for(a=3;a<o.length;a++)l+="\n"+o[a]}else s=MVPUtils.strip(o[0].split(" --\x3e ")[0]),r=MVPUtils.strip(o[0].split(" --\x3e ")[1]),l=o[1];_l[n]={},_l[n].id=n,_l[n].start=MVPUtils.toSeconds(s),_l[n].end=MVPUtils.toSeconds(r),_l[n].text=l,n++}}Rn.duration&&t.showControlsBeforeStart&&k(Rn.duration),kr=!0})).fail((function(e,t,i){console.log("Error loading chapters: ",e.responseText,t,i)})),Gt.addClass("mvp-seekbar-chapters")):kr=!0,!st&&Rn.previewSeek?"auto"==Rn.previewSeek&&"video"==Es?(hr=Gn=!0,wr||((wr=document.createElement("canvas")).className="mvp-preview-seek-canvas",Tr=$t.width(),Pr=$t.height(),wr.width=Tr,wr.height=Pr,Cr=wr.getContext("2d"),Ht.append(wr),(fr=document.createElement("video")).muted=!0,fr.playsinline=!0,fr.setAttribute("playsinline","playsinline"),fr.setAttribute("muted","muted"),fr.addEventListener("seeked",(function(){vr||(vr=!0,Cr.drawImage(fr,0,0,Tr,Pr))}))),"hls"==Ss?Qn&&(gr=new Hls).on(Hls.Events.MEDIA_ATTACHED,(function(){gr.loadSource(_s)})):"dash"==Ss&&(yr||(yr=dashjs.MediaPlayer().create()))):(Gn=!1,function(){if("file:"==window.location.protocol)return console.log("Getting preview seek requires server connection."),!1;ul=[],e.ajax({url:Rn.previewSeek}).done((function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=MVPUtils.strip(e)).split("\n\n");var t,i=0;for(t in e){var a=e[t].split("\n");if("WEBVTT"!=a){if(2<=a.length){var n=MVPUtils.strip(a[0].split(" --\x3e ")[0]),o=MVPUtils.strip(a[0].split(" --\x3e ")[1]);a=a[1],ul[i]={},ul[i].start=MVPUtils.toSeconds(n),ul[i].end=MVPUtils.toSeconds(o),ul[i].url=a}i++}}Gn=!0})).fail((function(e,t,i){console.log(e,t,i)}))}()):(Gn=!0,hr=!1)),"loop"!=t.mediaEndAction&&t.upNextTime&&!Hs&&(void 0!==(a=bd.getNextCounter(1))&&((a=Pl[a].data).thumb||a.title))&&(a.thumb?Ci.css({"background-image":"url("+encodeURI(a.thumb)+")",display:"block"}):Ci.css("display","none"),a.title&&Ti.html(a.title),a.duration?Pi.show().html(MVPUtils.formatTime(a.duration)):Pi.hide().html(""),wi.addClass("mvp-upnext-on")),Rn.title&&(ni.html(Rn.title),ai.show(),t.showVideoTitle&&Mt.html(Rn.title).addClass("mvp-visible")),Rn.description&&(oi.html(Rn.description),ai.show()),Va&&Rn.download&&(t.restrictDownloadForLoggedInUser&&!t.isUserLoggedIn||!Ll?hi.show():hi.show().find("a").attr({href:Rn.download,download:""})),"audio"==Es||"video"==Es||"youtube"==Es&&"chromeless"==t.youtubePlayerType||"vimeo"==Es&&"chromeless"==vl?(Rn.liveStream?(zt.hide(),Ft.hide(),qt.hide(),Gt.hide(),bi.show()):(zt.show(),Ft.show(),qt.show(),Gt.show()),Bt.show(),Jt.show(),hd.show(),Oi.show(),Ai.show(),ji.show()):(Bt.hide(),Jt.hide(),zt.hide(),Ft.hide(),qt.hide(),Gt.hide(),hd.hide(),Oi.hide(),Ai.hide(),ji.hide())}}function ie(e){ko=!0,To||(To=wt.find(".mvp-emiframe"),"chromeless"==t.youtubePlayerType&&t.forceYoutubeChromeless&&To.addClass("mvp-yt-clean")),To.addClass("mvp-visible"),t.selectorInit&&!zn&&(gn=yn,zn=!0),u(),fn?Po.playVideo():((null!=Ms||Rn.poster)&&Po.playVideo(),To.addClass("mvp-visible")),Nr&&"chromeless"==t.youtubePlayerType&&wa.show(),t.autoPlayInViewport&&!Ts&&K()}function ae(e){y(e.data)}function ne(e){v(e.data)}function oe(i){wt.is(":visible")&&(-1==i.data?Nr&&"chromeless"==t.youtubePlayerType&&wa.show():0==i.data?Ve():1==i.data?(Mo||(Ms=null,Rn.playbackRate&&1!=Rn.playbackRate?Po.setPlaybackRate(Number(Rn.playbackRate)):"chromeless"==t.youtubePlayerType&&v(1),t.blockYoutubeEvents&&(So||(So=e('<div class="mvp-iframe-blocker"></div>').css("display","block").appendTo(wt))),Mo=!0),So&&!Rn.is360&&So.css("display","block"),_e(),Eo=!0):2==i.data?Ie():3==i.data?To.addClass("mvp-visible"):5==i.data&&(fn||To.addClass("mvp-visible")))}function se(e){switch(e.data){case 2:console.log("Error code = "+e.data+": The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.");break;case 100:console.log("Error code = "+e.data+": Video not found, removed, or marked as private");break;case 101:console.log("Error code = "+e.data+": Embedding disabled for this video");break;case 150:console.log("Error code = "+e.data+": Video not found, removed, or marked as private [same as error 100]")}}function re(i){var a=MVPUtils.rgbToHex(t.vimeoPlayerColor);"#"==a.charAt(0)&&(a=a.substr(1));var n="1";t.useMobileNativePlayer&&(n="0");var o=fn?"1":"0",s="loop"==t.mediaEndAction?"1":"0",r="player"+Math.floor(16777215*Math.random());return a="?color="+a,s="&loop="+s,n="&playsinline="+n,o="&autoplay="+o,i="&background="+i,fn&&(o=!t.autoPlayInViewport||"&autoplay=0"),-1<_s.indexOf("/")&&(_s=_s.substr(0,_s.indexOf("/"))),a="https://player.vimeo.com/video/"+_s+a+"&byline=1&portrait=1&title=1&autopause=1"+n+s+"&dnt=1"+i+"&speed=1&muted=0"+o,t.vimeoNoCookie&&(a+="&dnt=1"),Rn.quality&&(a+="&quality="+Rn.quality),e("<iframe/>",{id:r,frameborder:0,src:a,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}).addClass("mvp-media mvp-emiframe")}function le(){if(!zo){if(Io.addClass("mvp-visible"),Rn.start||Ms){if(Ms)var e=Ms;else Rn.start&&(e=Rn.start);Ms=null,jo.setCurrentTime(e).then((function(e){})).catch((function(e){console.log(e.name)}))}Rn.playbackRate&&1!=Rn.playbackRate&&jo.setPlaybackRate(Rn.playbackRate).then((function(e){})).catch((function(e){})),zo=!0}_e(),Fo=!0}function de(){Es&&"vimeo"!=Es||Ie()}function ce(e){v(e.playbackRate)}function pe(){t.selectorInit&&!zn&&(gn=yn,zn=!0),u(),t.blockVimeoEvents="default"!=vl,t.blockVimeoEvents&&(qo||(qo=e('<div class="mvp-iframe-blocker"></div>').css("display","block").appendTo(Oo)),Rn.is360?qo.css("display","none"):qo.css("display","block")),fn||null!=Ms?jo.play().then((function(){})).catch((function(e){"chromeless"==vl&&(pi.show(),ci.hide()),Io.addClass("mvp-visible")})):("chromeless"==vl&&(pi.show(),ci.hide()),Io.addClass("mvp-visible")),Nr&&"chromeless"==vl&&wa.show(),t.autoPlayInViewport&&!Ts&&K()}function ue(e){fl=e.duration,gl=e.seconds,yl=e.percent}function me(){Ve()}function he(){ci.show()}function ve(){ci.hide()}function fe(e){console.log("Vimeo Player Error!",e)}function ge(){"image"==Es&&Rn.is360&&ws.render(bs,os),$o&&($o=!1,setTimeout((function(){clearTimeout(this),Et.hide(300)}),2e3))}function ye(){is&&("image"==Es?(rs.update(),On=requestAnimationFrame(ye)):"monoscopic"==Rn.vrMode?(ts&&ts.update(),Yo.render(Qo,os),yo.readyState===yo.HAVE_ENOUGH_DATA&&(Ko.needsUpdate=!0),On=requestAnimationFrame(ye)):(ts.update(),Xo.render(es,ss),yo.readyState===yo.HAVE_ENOUGH_DATA&&(Zo.needsUpdate=!0)))}function be(){Kn=new Hls,Qn=Hls.isSupported(),Xn=!0,Qn&&(Kn.subtitleDisplay=!1,Kn.subtitleTrack=-1,Kn.on(Hls.Events.MEDIA_ATTACHED,(function(){Kn.loadSource(_s)})),Kn.on(Hls.Events.MANIFEST_PARSED,(function(e,i){if(t.showStreamVideoBitrateMenu&&!Zn){Zn=!0;var a,n=[],o=i.levels.length;for(a=0;a<o;a++){var s=i.levels[a];s.width&&n.push({label:s.width+"x"+s.height+", "+Math.ceil(Math.round(s.bitrate/1e3))+"kbps",value:a.toString()})}n.push({label:"auto",value:"-1",selected:!0}),t.hideQualityMenuOnSingleQuality&&1==n.length||f(n,"-1")}})),Kn.on(Hls.Events.MANIFEST_LOADED,(function(e,t){})),Kn.on(Hls.Events.LEVEL_LOADED,(function(e,t){})),Kn.on(Hls.Events.AUDIO_TRACKS_UPDATED,(function(i,a){if(t.showStreamAudioBitrateMenu&&!eo){eo=!0;var n=Kn.audioTracks,o=n.length;if(1<o){var s;for(s=0;s<o;s++){var r=n[s],l=r.groupId+" - "+r.name;r=r.id.toString(),e("<li/>").addClass("mvp-menu-item").attr({"data-value":r,"data-label":l}).text(l).on("click",b).appendTo(Bi)}Jn=!0,qi.show(),$i.removeClass("mvp-force-hide")}}})),Kn.on(Hls.Events.AUDIO_TRACK_SWITCHED,(function(e,t){if(Jn){var i=t.id;Zs&&Zs.removeClass("mvp-menu-active"),Zs=Bi.find(".mvp-menu-item[data-value='"+i+"']").addClass("mvp-menu-active"),vd.find(".mvp-audio-language-menu-value").text(Zs.text())}})),Kn.on(Hls.Events.AUDIO_TRACK_LOADED,(function(e,t){})),Kn.on(Hls.Events.SUBTITLE_TRACK_SWITCH,(function(e,t){})),Kn.on(Hls.Events.SUBTITLE_TRACK_LOADED,(function(e,t){})),Kn.on(Hls.Events.SUBTITLE_TRACKS_UPDATED,(function(e){if(0<(e=Kn.subtitleTracks.length)&&!Rn.subtitles&&!to){var t;for(to=!0,Rn.subtitles=[],t=0;t<e;t++){var i=Kn.subtitleTracks[t],a=t.toString();a={label:i.name,value:a,src:i.url},i.default&&(a.default=!0),Rn.subtitles.push(a)}w()}})),Kn.on(Hls.Events.ERROR,(function(e,t){if(t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),Kn.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),Kn.recoverMediaError();break;default:Kn.destroy()}})))}function we(){io=dashjs.MediaPlayer().create(),ao=!0,io.setFastSwitchEnabled=!0,io.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,(function(i){if(t.showStreamVideoBitrateMenu&&!Zn){Zn=!0;var a=io.getBitrateInfoListFor("video"),n=[],o=a.length;for(i=0;i<o;i++){var s=a[i];s.width&&n.push({label:s.width+"x"+s.height+", "+Math.ceil(Math.round(s.bitrate/1e3))+"kbps",value:s.qualityIndex.toString()})}n.push({label:"auto",value:"-1",selected:!0}),t.hideQualityMenuOnSingleQuality&&1==n.length||f(n,"-1")}if(t.showStreamAudioBitrateMenu&&!eo&&(eo=!0,1<(o=(a=io.getBitrateInfoListFor("audio")).length))){for(i=0;i<o;i++)s=a[i],n=Math.ceil(Math.round(s.bitrate/1e3))+"kbps",s=s.qualityIndex.toString(),e("<li/>").addClass("mvp-menu-item").attr({"data-value":s,"data-label":n}).text(n).on("click",b).appendTo(Bi);Jn=!0,qi.show(),$i.removeClass("mvp-force-hide")}})),io.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,(function(e){})),io.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,(function(e){})),io.on(dashjs.MediaPlayer.events.TRACK_CHANGE_RENDERED,(function(e){})),io.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,(function(e){})),io.on(dashjs.MediaPlayer.events.ERROR,(function(e){console.log("dashjs.MediaPlayer.events.ERROR "+e.error+" : "+e.event.message)})),io.on(dashjs.MediaPlayer.events.PLAYBACK_ERROR,(function(e){}))}function Ce(){if(is=!1,On&&(cancelAnimationFrame(On),On=null),An&&(Xo&&Xo.setAnimationLoop(null),An=!1),jn&&(clearInterval(jn),jn=null),nl.off(pl),_t.find(".mvp-media").removeClass("mvp-visible"),Et&&(Et.hide(300),$o=!1),Gi.hide(),rs&&(rs.removeEventListener("change",ge),rs.reset(),rs.autoRotate=!1),Yr&&Re(),"audio"==Es)co&&(co.pause(),co.src=""),lo&&lo.off("ended pause play canplay ratechange loadedmetadata error"),hn&&uo&&uo.clean(),Rn.slideshowImages&&or&&or.dispose();else if("video"==Es){if(Qn&&"hls"==Ss&&(Kn&&(Kn.detachMedia(),Kn.off(),Kn.destroy(),Kn=null,Xn=!1),gr&&(gr.detachMedia(),gr.off(),gr.destroy())),hl&&"dash"==Ss&&io&&io.attachSource(null),bl&&Rn.is360&&("monoscopic"==Rn.vrMode?Go&&Go.hide():Jo&&Jo.hide()),go){go.pause();try{go.currentTime=0}catch(e){}go.src="",go=null}yo&&yo.off("ended loadedmetadata ratechange canplay canplaythrough waiting playing play pause error seeked"),bt&&bt.hide()}else"image"==Es?(ms&&(clearTimeout(ms),ms=null),Rn.is360?(fs&&fs.hide(),vs=!1):(xt.hide().find(".mvp-media").remove(),null),us=ps=null):"youtube"==Es?Po&&(wt.hide(),ko&&Po.stopVideo(),Mo=!1):"vimeo"==Es?(yl=gl=fl=0,jo&&jo.unload().then((function(){})).catch((function(e){console.log(e)})),zo=!1,Oo&&Oo.hide()):"custom"!=Es&&"custom_html"!=Es||kt.empty().hide();ho&&(Pt.hide().empty(),ho=null),Nr&&(Nr=!1,ma.removeClass("mvp-ad-skip-btn-visible"),la.hide(),ya.hide(),wa.hide(),wa.find(".mvp-volume-toggle").show(),va.html(fa),zr=!1),Nt.hide().empty(),Vl=[],Wr=!1,hi.hide().find("a").attr("href","#").removeAttr("download"),bi.hide(),Hi.hide(),oa.hide(),sa.css("display","none").removeClass("mvp-holder-visible"),ra.html(""),Sr=!1,vd.removeClass("mvp-holder-visible").css({display:"none",width:"auto",height:"auto"}),vd.find(".mvp-settings-menu").css("display","none"),fd.css("display","block"),zt.html("00:00").hide(),Ft.hide(),qt.html("00:00").hide(),Rl=null,Vt.hide(),Rt.empty(),tr=!1,Sl=[],El=[],er=ir=null,Ui.empty(),Di.addClass("mvp-force-hide"),Wi.hide(),Ni.empty(),Li.addClass("mvp-force-hide"),Bi.empty(),$i.addClass("mvp-force-hide"),to=eo=Zn=Jn=!1,ir&&Rt.removeClass("mvp-subtitle-visible"),rd.hide(),Ca.removeClass("mvp-ad-info-start-visible mvp-ad-info-start-controls-align"),Wn=null,ul=[],$t.hide(),Ht.css("background-image","none"),hr&&(vr=hr=!1,Qn&&"hls"==Ss&&gr&&gr.detachMedia(),hl&&"dash"==Ss&&yr&&yr.attachSource(null),fr&&(fr.pause(),fr.src=""),Cr&&Cr.clearRect(0,0,Tr,Pr)),Os=!1,Mt&&Mt.html("").removeClass("mvp-visible"),ii.css("display","none").removeClass("mvp-holder-visible-top"),ni.html(""),oi.html(""),ai.hide(),As=!1,yi.html(""),fi.css("display","none").removeClass("mvp-holder-visible-top"),Vs=!1,ia.css("display","none").removeClass("mvp-holder-visible-top"),aa.css("display","none").removeClass("mvp-holder-visible-top"),Rs=!1,na.css("display","none").removeClass("mvp-holder-visible-top"),Qr=!1,pi.hide(),Bt.find(".mvp-btn-play").show(),Bt.find(".mvp-btn-pause").hide(),wi.removeClass("mvp-upnext-on mvp-upnext-visible"),Ci.css("background-image","none"),Ti.html(""),Pi.html(""),xi.removeClass("mvp-upnext-wrap2-visible"),ki.css("background-image","none"),Ei.html(""),Si.html(""),si.hide().removeClass("mvp-holder-visible-top"),ri.val(""),ad&&ad.hide(),Rn=Ss=Es=Ms=null,Ir=jr=vo=_n=Is=!1,ca.width(0),pa.width(0),Kt.width(0),Qt.width(0),fn||(Ut.css("display","none").removeClass("mvp-player-controls-visible"),Cl=!0)}function Te(){if(console.log("cleanMediaForAdvert"),is=!1,On&&(cancelAnimationFrame(On),On=null),An&&(Xo&&Xo.setAnimationLoop(null),An=!1),jn&&(clearInterval(jn),jn=null),nl.off(pl),_t.find(".mvp-media").removeClass("mvp-visible"),Et&&(Et.hide(300),$o=!1),Gi.hide(),rs&&(rs.removeEventListener("change",ge),rs.reset(),rs.autoRotate=!1),"audio"==Es)co&&(co.pause(),co.src=""),lo&&lo.off("ended pause play canplay ratechange loadedmetadata error"),hn&&uo&&uo.clean(),Rn.slideshowImages&&or&&or.dispose();else if("video"==Es){if(Qn&&"hls"==Ss&&(Kn&&(Kn.detachMedia(),Kn.off(),Kn.destroy(),Kn=null,Xn=!1),gr&&(gr.detachMedia(),gr.off(),gr.destroy())),hl&&"dash"==Ss&&io&&io.attachSource(null),bl&&Rn.is360&&("monoscopic"==Rn.vrMode?Go&&Go.hide():Jo&&Jo.hide()),go){go.pause();try{go.currentTime=0}catch(e){}go.src="",go=null}yo&&yo.off("ended loadedmetadata ratechange canplay canplaythrough waiting playing play pause error seeked"),bt&&bt.hide()}else"image"==Es?(ms&&(clearTimeout(ms),ms=null),Rn.is360?(fs&&fs.hide(),vs=!1):(xt.hide().find(".mvp-media").remove(),null),us=ps=null):"youtube"==Es?Po&&(wt.hide(),ko&&Po.stopVideo(),Mo=!1):"vimeo"==Es?(yl=gl=fl=0,jo&&jo.unload().then((function(){})).catch((function(e){console.log(e)})),zo=!1,Oo&&Oo.hide()):"custom"!=Es&&"custom_html"!=Es||kt.empty().hide();ho&&(Pt.hide().empty(),ho=null),Nr?(Nr=!1,ma.removeClass("mvp-ad-skip-btn-visible"),la.hide(),ya.hide(),wa.hide(),wa.find(".mvp-volume-toggle").show(),va.html(fa),zr=!1):(Nt.is(":visible")&&(Us=!0,Nt.hide()),ir&&(Ls=!0,Vt.hide())),Rl=null,rd.hide(),$t.hide(),wi.removeClass("mvp-upnext-on mvp-upnext-visible"),xi.removeClass("mvp-upnext-wrap2-visible"),ad&&ad.hide(),Rn=Ss=Es=Ms=null,Ir=jr=vo=_n=Is=!1,ca.width(0),pa.width(0),Ut.css("display","none").removeClass("mvp-player-controls-visible"),Cl=!0}function Pe(){wn&&Es&&(Un&&A(),Ce(),bd.reSetCounter(),Ut.removeClass("mvp-player-controls-visible"),"fullscreen"==ed&&(document.body.style.cursor="none"),Cl=!0)}function xe(){void 0!==e.fn.masonry&&yd&&Ot.masonry("destroy"),Es&&Ce(),Ot.empty(),Dn=0,bd.reSetCounter(),Fs=!1,Ln="",Bs=null,$n&&$n.setScrollActive(),qa=!1,Qs=Ks=Ys=Gs=Ws=Ka=Hr=Ar=qs=null,Tn=on=!1,Pl=[],kl=[],Ml=[],kn=xn=Ya=tn=en=Za=Xa=Ja=Qa=Ga=Wa=Ha=null,dl=[]}function ke(){if(wn&&0!=Dn)if(Rn&&Me(),lt&&Hl){var e=Ot.find(".mvp-playlist-item-selected").nextAll(".mvp-playlist-item:not(.mvp-filter-hidden)").filter(":first");e.length?(e=e.attr("data-id"),bd.setCounter(e,!1)):bd.advanceHandler(1,!0)}else bd.advanceHandler(1,!0)}function Me(){_n&&(t.useStatistics&&null!=In&&"custom"!=Es&&"custom_html"!=Es&&Oe("mvp_play_count",In),t.displayWatchedPercentage&&Rn&&"image"!=Es&&_n&&Ee())}function Ee(){if(!Rn.watchedComplete&&(null!=Rn.mediaId||null!=Rn.path)){var i=ot.getCurrentTime(),a=ot.getDuration(),n=[{name:"action",value:"mvp_set_watched_percentage"},{name:"playlist_id",value:zs},{name:"watched",value:i},{name:"duration",value:a}];Rn.mediaId?(n.push({name:"media_id",value:Rn.mediaId}),n.push({name:"url",value:Rn.safeTitle||""})):Rn.path&&(n.push({name:"url",value:Rn.path}),n.push({name:"media_id",value:null})),console.log(n),i+.1>=a&&(Pl[In].data.watchedComplete=!0),e.ajax({url:t.ajax_url,type:"post",data:n,dataType:"json"}).done((function(e){var t;(console.log(e),e)&&(e.media_id&&e.title?t=Ot.find('.mvp-playlist-item[data-media-id="'+e.media_id+'"][data-safe-title="'+e.title+'"]'):e.title&&(t=Ot.find('.mvp-playlist-item[data-media-url="'+e.title+'"]')),t.length&&(100<(e=e.watched/e.duration*100)&&(e=100),t.find(".mvp-media-watched-progress").width(e+"%"),t.find(".mvp-media-watched-bg").removeClass("mvp-hidden")))})).fail((function(e,t,i){console.log("Error mvp_set_watched_percentage: "+e.responseText,t,i)}))}}function Se(){wn&&0!=Dn&&(Rn&&Me(),bd.advanceHandler(-1,!0))}function _e(){if(ci.hide(),pi.hide(),Bt.find(".mvp-btn-play").hide(),Bt.find(".mvp-btn-pause").show(),t.showPosterOnPause&&ho&&ho.one("transitionend",(function(){Is&&Pt.hide()})).removeClass("mvp-visible"),!_n){if(setTimeout((function(){Rn&&Rn.is360&&Le()}),50),t.autoPlayAfterFirst&&(fn=!0),Bn||"image"==Es||(Bn=!0,Ki&&Ki.length&&0==gn&&setTimeout((function(){Ki.addClass("mvp-unmute-toggle-visible").one("click touchend",(function(e){return c(),!1}))}),1e3)),t.minimizeOnScroll&&t.minimizeOnScrollOnlyIfPlaying&&Q(),"audio"==Es)if(hn)if("file:"==window.location.protocol)console.log("Using Audio Equalizer requires server connection!");else if(void 0===uo)var i=setInterval((function(){uo&&(i&&clearInterval(i),uo.init(co),mo.addClass("mvp-visible"))}),100);else uo.init(co),mo.addClass("mvp-visible");else Rn.slideshowImages&&or&&or.play();else if(bl&&Rn.is360){Et&&setTimeout((function(){Et.show(300),$o=!0}),1e3);var a=_t.width(),n=_t.height();"monoscopic"==Rn.vrMode?(Go.show(),rs.addEventListener("change",ge),Yo.setSize(a,n),os.aspect=a/n,os.updateProjectionMatrix(),On&&cancelAnimationFrame(On),On=requestAnimationFrame(ye)):(Jo.show(),Xo.setSize(a,n),ss.aspect=a/n,ss.updateProjectionMatrix(),Xo.setAnimationLoop(ye),An=!0,Gi.show(),setTimeout((function(){Et.hide(300),$o=!1}),5e3)),setTimeout((function(){"monoscopic"==Rn.vrMode?Go.addClass("mvp-visible"):Jo.addClass("mvp-visible")}),20),is=!0}a=Nr?"adStart":"mediaStart",e(ot).trigger(a,{instance:ot,instanceName:t.instanceName,media:Rn}),_n=!0,Nr?(Ut.css("display","none").removeClass("mvp-player-controls-visible"),document.body.style.cursor="default",Cl=!0,la.show()):(la.hide(),Vn&&Qt.width(Vn),Vn=null,Qt.removeClass("mvp-progress-sizing"),"youtube"==Es&&"default"==t.youtubePlayerType||"vimeo"==Es&&"default"==vl||"custom"==Es||"custom_html"==Es?(Ut.css("display","none").removeClass("mvp-player-controls-visible"),document.body.style.cursor="default",Cl=!0):Ut.css("display","block"),Us&&(Us=!1,Nt.show()),Ls&&(Ls=!1,Vt.show()))}if(t.togglePlaybackOnMultipleInstances&&1<mvp_mediaArr.length)for(n=mvp_mediaArr.length,a=0;a<n;a++)ot!=mvp_mediaArr[a].inst&&mvp_mediaArr[a].inst.pauseMedia();Rn.slideshowImages&&t.slideshowPauseWithAudio&&or&&or.play(),("audio"==Es||"video"==Es||"youtube"==Es&&"chromeless"==t.youtubePlayerType||"vimeo"==Es&&"chromeless"==vl)&&(jn&&(clearInterval(jn),jn=null),jn=setInterval(je,500)),Nr?e(ot).trigger("adPlay",{instance:ot,instanceName:t.instanceName,media:Rn}):e(ot).trigger("mediaPlay",{instance:ot,instanceName:t.instanceName,media:Rn}),ln&&"undefined"!=typeof ga&&(a=Nr?"AD played":"Video played",ot.getCurrentTime(),ga("send",{hitType:"event",eventCategory:"Modern video player: "+t.instanceName,eventAction:a,eventLabel:"title: "+Rn.title+" | time: "+Math.round(ot.getCurrentTime()),nonInteraction:!0})),Is=!0,Ds&&clearTimeout(Ds),R()}function Ie(){jn&&clearInterval(jn),ci.hide(),Bt.find(".mvp-btn-play").show(),Bt.find(".mvp-btn-pause").hide(),t.showPosterOnPause&&(ho?(Pt.show(),setTimeout((function(){ho.addClass("mvp-visible")}),20)):fo&&(Pt||(Pt=e('<div class="mvp-poster-holder"/>').appendTo(_t)),e(new Image).addClass("mvp-media").appendTo(Pt.empty().show()).on("load",(function(){(ho=e(this)).addClass("mvp-visible mvp-media-img")})).on("error",(function(e){console.log(e)})).attr({src:Rn.poster,alt:Rn.title}))),Rn.slideshowImages&&t.slideshowPauseWithAudio&&or&&or.pause(),_n?("audio"==Es||"video"==Es||"youtube"==Es&&"chromeless"==t.youtubePlayerType||"vimeo"==Es&&"chromeless"==vl)&&pi.show():"audio"!=Es&&"video"!=Es||pi.show();var i=Nr?"adPause":"mediaPause";if(e(ot).trigger(i,{instance:ot,instanceName:t.instanceName,media:Rn}),ln&&"undefined"!=typeof ga){if(Nr){i="AD paused";var a="AD title: "+Rn.title+" | t: "+Math.round(ot.getCurrentTime())}else i="Video paused",a="Video title: "+Rn.title+" | t: "+Math.round(ot.getCurrentTime());ga("send",{hitType:"event",eventCategory:"Modern video player: "+t.instanceName,eventAction:i,eventLabel:a,nonInteraction:!0})}if(Nr&&Rn.link){if(!Rn.target||"_blank"!=Rn.target)return i=Rn.link,Pe(),void(window.location=i);window.open(Rn.link)}Is=!1}function je(i){if(void 0!==i||Is){var a;if("audio"==Es){if(co){var n=co.currentTime,o=co.duration;if(void 0!==co.buffered&&0!=co.buffered.length){try{var s=co.buffered.end(co.buffered.length-1)}catch(e){}isNaN(s)||(a=s/Math.floor(co.duration))}}}else if("video"==Es){if(go&&(n=go.currentTime,o=go.duration,void 0!==go.buffered&&0!=go.buffered.length)){try{s=go.buffered.end(go.buffered.length-1)}catch(e){}isNaN(s)||(a=s/Math.floor(go.duration))}}else"youtube"==Es?Po&&(n=Po.getCurrentTime(),o=Po.getDuration(),a=Po.getVideoLoadedFraction()):"vimeo"==Es?(n=gl,o=fl,a=yl):"image"==Es&&(a=1e3*Rn.duration,n=(new Date).getTime()-ps,0>(us-=n)&&(us=0),ps=(new Date).getTime(),n=(a-us)/1e3,o=Rn.duration,a=1);if(MVPUtils.isNumber(n)&&MVPUtils.isNumber(o)){if(i=n,0<o&&!Nr&&(_l.length&&kr&&!xr&&("audio"==Es||"video"==Es||"youtube"==Es&&"chromeless"==t.youtubePlayerType||"vimeo"==Es&&"chromeless"==vl)&&(k(o),xr=!0),Fr||(t.createAdMarkers&&Al.length&&E(o),Fr=!0)),i>Ns&&(Ns=i),Nr){if(jr||(Il=da.width(),jr=!0),i!=Rl&&(ua.html("&nbsp;(-"+MVPUtils.formatTime(o-i)+")"),0<i)){if(!zr&&(zr=!0,Br=!1,Dr=null,void 0!==Rn.skipEnable)){if(Dr=Rn.skipEnable,Ur){if(void 0!==(s=bd.getNextCounter(1))&&(s=Pl[s].data).thumb)var r=s.thumb}else Nn.thumb&&(r=Nn.thumb);r&&e('<img src="'+r+'" alt="next"/>').appendTo(ba.empty().show()),ha.show(),ma.addClass("mvp-ad-skip-btn-visible")}null==Dr||Br||(i<Dr?va.html(fa+"&nbsp;"+(Dr-parseInt(i,10)).toString()):(Br=!0,ma.removeClass("mvp-ad-skip-btn-visible"),setTimeout((function(){ba.hide(),ha.hide(),ya.show(),ma.addClass("mvp-ad-skip-btn-visible")}),500)))}a&&ca.width(a*Il),pa.width(n/o*Il)}else{if(Ir||(sd=Yt.width(),Ir=!0),i!=Rl){if((Rn.end||Rn.lockTime&&!tl)&&n>=(Rn.end||Rn.lockTime))return void(Rn.lockTime?(jn&&clearInterval(jn),is=!1,On&&(cancelAnimationFrame(On),On=null),An&&(Xo&&Xo.setAnimationLoop(null),An=!1),U("watch")):("loop"!=t.mediaEndAction&&"rewind"!=t.mediaEndAction&&(jn&&clearInterval(jn),is=!1,On&&(cancelAnimationFrame(On),On=null),An&&(Xo&&Xo.setAnimationLoop(null),An=!1)),Ve()));if(Al.length)for(s=Al.length,r=0;r<s;r++){var l=Al[r];if(Ca.length&&i>l.begin-parseInt(t.adUpcomingMsgTime,10)&&(i>l.begin-1?Ca.removeClass("mvp-ad-info-start-visible"):(Ca.addClass("mvp-ad-info-start-visible"),Ut.hasClass("mvp-player-controls-visible")&&Ca.addClass("mvp-ad-info-start-controls-align"),Ta.html(parseInt(l.begin-i,10)))),i>=l.begin&&i<l.begin+1){if(!l.played)return Vn=Qt.width(),Qt.addClass("mvp-progress-sizing"),jn&&clearInterval(jn),is=!1,On&&(cancelAnimationFrame(On),On=null),An&&(Xo&&Xo.setAnimationLoop(null),An=!1),l.played=!0,Vr=l.begin,t.playAdsOnlyOnce&&(Al[r].marker.remove(),Al.splice(r,1)),Te(),Rn=l.data.type?l.data:Be(l.data),Nr=!0,void J()}else i>l.begin+1&&(l.played=!1)}if(Vl.length)for(s=Vl.length,r=0;r<s;r++){var d=(l=Vl[r]).start,c=l.end;l=l.item,i>=d&&i<=c-1?l.mvpvisible||(l.hasClass("mvp-annotation-iframe")?(d=l.find("iframe")).attr("src",d.attr("data-src")):l.hasClass("mvp-annotation-shortcode")&&!l.hasClass("mvp-annotation-shortcode-ready")&&"file:"!=window.location.protocol&&(d=l.addClass("mvp-annotation-shortcode-ready mvp-hidden").find(".mvp-annotation-shortcode-content").html(),Ae(l,d)),l.css("display","block"),l.mvpvisible=!0):l.mvpvisible&&(l.css("display","none"),l.hasClass("mvp-annotation-iframe")?l.find("iframe").attr("src","about:blank"):l.hasClass("mvp-annotation-shortcode"),l.mvpvisible=!1)}if(tr&&Sl.length)for(s=Sl.length,r=0;r<s;r++)d=(l=Sl[r]).start,c=l.end,i>=d&&i<=c?ir||(ir=e('<div class="mvp-subtitle">'+l.text+"</div>"),Ut.hasClass("mvp-player-controls-visible")&&Rt.addClass("mvp-subtitle-visible"),ir.start=d,ir.end=c,Rt.append(ir)):ir&&(i<ir.start||i>ir.end)&&(ir.remove(),ir=null);if(xr)for(s=_l.length,r=0;r<s;r++)d=(l=_l[r]).start,c=l.end,i>=d&&i<=c?_r||M(r):_r&&(i<_r.start||i>_r.end)&&(_r=null);0<o&&(Hs||wi.hasClass("mvp-upnext-on")&&(i>o-t.upNextTime?wi.addClass("mvp-upnext-visible"):wi.removeClass("mvp-upnext-visible"))),zt.html(MVPUtils.formatTime(i)),qt.html(MVPUtils.formatTime(o))}a&&1!=a&&Kt.width(a*sd),Qt.width(n/o*sd)}if(t.caption_breakPointArr&&!ar&&ir){for(a=Rt.width(),s=t.caption_breakPointArr.length,r=0;r<s;r++)if(a>(n=t.caption_breakPointArr[r]).width)var p=n.size;Rt.css("fontSize",p+"px"),ar=!0}Rl=i}}}function Oe(i,a){if("file:"!=window.location.protocol&&Pl[a]){var n=Pl[a].data;if(null!=n.mediaId&&null!=zs){if("mvp_play_count"==i)var o=[{name:"action",value:i},{name:"playlist_id",value:zs},{name:"media_id",value:n.mediaId},{name:"title",value:n.safeTitle||""},{name:"currentTime",value:ot.getCurrentTime()},{name:"duration",value:ot.getDuration()}];else"mvp_download_count"!=i&&"mvp_finish_count"!=i||(o=[{name:"action",value:i},{name:"playlist_id",value:zs},{name:"media_id",value:n.mediaId},{name:"title",value:n.safeTitle||""}]);console.log(o),e.ajax({url:t.ajax_url,type:"post",data:o,dataType:"json"}).done((function(e){})).fail((function(e,t,i){console.log("Error getStats: "+e.responseText,t,i)}))}}}function Ae(i,a){var n=[{name:"action",value:"mvp_annotation_shortcode"},{name:"shortcode",value:JSON.stringify(a)},{name:"annotation_id",value:i.attr("data-id")}];e.ajax({url:t.ajax_url,type:"post",data:n,dataType:"json"}).done((function(e){var t=Nt.find(".mvp-annotation[data-id="+e.annotation_id+"]");t.length&&(t.find(".mvp-annotation-shortcode-content").html(e.output),t.removeClass("mvp-hidden"))})).fail((function(e,t,i){console.log("Error doAnnotationShortcode: "+e.responseText,t,i)}))}function Ve(){if(Nr?e(ot).trigger("adEnd",{instance:ot,instanceName:t.instanceName,media:Rn}):(t.useStatistics&&Oe("mvp_finish_count",In),"next"!=t.mediaEndAction&&"comingnext"!=t.mediaEndAction&&Me()),ln&&"undefined"!=typeof ga){if(Nr)var i="AD ended",a="AD title: "+Rn.title;else i="Video ended",a="Video title: "+Rn.title;ga("send",{hitType:"event",eventCategory:"Modern video player: "+t.instanceName,eventAction:i,eventLabel:a,nonInteraction:!0})}if(void 0!==Rn.endLink){if("_blank"!=Rn.endTarget)return i=Rn.endLink,Pe(),void(window.location=i);window.open(Rn.endLink)}Nr&&!Ur?(Te(),jl.length&&Lr<jl.length-1?(Lr++,Rn=jl[Lr].type?jl[Lr].data:Be(jl[Lr]),Nr=!0):(jl=[],Lr=-1,Rn=Nn),J()):Ol.length&&Lr<Ol.length-1?(Ce(),Lr++,Rn=Ol[Lr].type?Ol[Lr].data:Be(Ol[Lr]),Nr=Ur=!0,J()):(e(ot).trigger("mediaEnd",{instance:ot,instanceName:t.instanceName,media:Rn}),i=Rn.start||0,"next"==t.mediaEndAction?ke():"rel"==t.mediaEndAction?("audio"==Es?co&&(co.currentTime=i,co.pause()):"video"==Es?go&&(go.currentTime=i,go.pause(),Ie()):"youtube"==Es?Po&&(Po.seekTo(i),Po.pauseVideo()):"vimeo"==Es&&jo&&(jo.pause(),jo.setCurrentTime(i)),vn.find(".mvp-rel-playlist").length?"undefined"==typeof MVPRelPagination?((i=document.createElement("script")).type="text/javascript",i.src=MVPUtils.qualifyURL(t.sourcePath+t.rel_js),i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(Kr||(Kr=new MVPRelPagination({parent:ot,wrapper:na,settings:t})),ot.toggleRel())},i.onerror=function(){alert("Error loading "+this.src)},(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)):(Kr||(Kr=new MVPRelPagination({wrapper:na,settings:t})),ot.toggleRel()):console.log("No related playlists found!")):"comingnext"==t.mediaEndAction?("audio"==Es?co&&(co.currentTime=i,co.pause()):"video"==Es?go&&(go.currentTime=i,go.pause()):"youtube"==Es?Po&&(Po.seekTo(i),Po.pauseVideo()):"vimeo"==Es&&jo&&(jo.pause(),jo.setCurrentTime(i)),void 0!==(i=bd.getNextCounter(1))&&function(i){if(i.poster||i.thumb){var a=i.poster||i.thumb;e(new Image).addClass("mvp-media mvp-media-img").appendTo(Ji.empty()).on("load",(function(){e(this).addClass("mvp-visible")})).on("error",(function(e){console.log(e)})).attr({src:a,alt:Rn.title})}a=i.title,i.duration&&(a+=' <span class="mvp-comingnext-duration">('+MVPUtils.formatTime(i.duration)+")</span>"),Xi.html(a),Qi.addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){Qi.removeClass("mvp-holder-visible-top"),Yr=!0;var e=1;Zi.css("stroke-dashoffset",169-169/t.comingnextTime),Gr=setInterval((function(){Gr&&(e==t.comingnextTime?(clearInterval(Gr),Gr=null,ke()):(Zi.css("stroke-dashoffset",169-169/t.comingnextTime*(e+1)),e++))}),1e3)}),20)}(i=Pl[i].data)):"loop"==t.mediaEndAction?"audio"==Es?co&&(co.currentTime=i,co.play()):"video"==Es?go&&(go.currentTime=i,go.play()):"youtube"==Es?Po&&(Po.seekTo(i),Po.playVideo()):"vimeo"==Es&&jo&&jo.setCurrentTime(i):"rewind"==t.mediaEndAction?"audio"==Es?co&&(co.currentTime=i,co.pause()):"video"==Es?go&&(go.currentTime=i,go.pause()):"youtube"==Es?Po&&(Po.seekTo(i),Po.pauseVideo()):"vimeo"==Es&&jo&&(jo.pause(),jo.setCurrentTime(i)):"poster"==t.mediaEndAction&&("audio"==Es?co&&(co.currentTime=i,co.pause()):"video"==Es?(go&&(go.currentTime=i,go.pause()),Rn.poster&&(_n=!1,bl&&Rn.is360?"monoscopic"==Rn.vrMode?Go&&Go.hide():Jo&&Jo.hide():bt.hide(),Z())):"youtube"==Es?(Po&&(Po.seekTo(i),Po.pauseVideo()),Rn.poster&&(_n=!1,wt.hide(),Z())):"vimeo"==Es&&(jo&&(jo.pause(),jo.setCurrentTime(i)),Rn.poster&&(_n=!1,Oo.hide(),Z()))))}function Re(){Gr&&(clearInterval(Gr),Gr=null),Yr&&(Qi.addClass("mvp-holder-visible-top"),setTimeout((function(){Qi.css("display","none").removeClass("mvp-holder-visible-top"),Yr=!1,Ji.empty(),null,Xi.html(""),Zi.css("stroke-dashoffset","169")}),500))}function Ne(){if(!wn||!t.addResizeEvent)return!1;if(t.createPlayer){var i=MVPUtils.getViewportSize(st);"normal"==ed&&ct&&"wall"!=Ma&&(i.h-=ct);var a=St.hasClass(t.minimizeClass)?St:dt;if("vrb"==Ma)if(a.width()>t.verticalBottomSepearator){Fi&&dt.removeClass("mvp-ps-drot").addClass("mvp-ps-dot"),It.removeClass("mvp-playlist-holder-bottom").width(t.playlistSideWidth);var n=t.playlistOpened?a.width()-It.width():a.width();if(Lt.width(n),"fullscreen"==ed)var o=a.height();else o=(n=a.width())/t.playerRatio;o>i.h&&(o=i.h),Lt.height(o),It.height(o),a.height(o)}else Fi&&(dt.removeClass("mvp-ps-dot").addClass("mvp-ps-drot"),"scroll"==ka&&"perfect-scrollbar"==t.playlistScrollType&&$n&&$n.updateScrollPosition()),It.addClass("mvp-playlist-holder-bottom"),(o=(n=a.width())/t.playerRatio)>i.h&&(o=i.h),Lt.css({height:o,width:n}),It.css({height:t.playlistBottomHeight,width:"100%"}),t.playlistOpened?a.height(o+It.height()):a.height(o),"fullscreen"==ed&&(t.playlistOpened?Lt.height(a.height()-It.height()):Lt.height(a.height()));else"vb"==Ma?((o=(n=a.width())/t.playerRatio)>i.h&&(o=i.h),Lt.height(o),t.playlistOpened?a.height(o+It.height()):a.height(o),"fullscreen"==ed&&(t.playlistOpened?Lt.height(a.height()-It.height()):Lt.height(a.height()))):"hb"==Ma?((o=(n=a.width())/t.playerRatio)>i.h&&(o=i.h),500<o&&i.h<=o?(a.height(o),t.playlistOpened?Lt.height(o-It.height()):Lt.height(o)):(Lt.height(o),t.playlistOpened?a.height(o+It.height()):a.height(o),"fullscreen"==ed&&(t.playlistOpened?Lt.height(a.height()-It.height()):Lt.height(a.height())))):"wall"==Ma?"normal"==ed&&Hn&&((o=(n=mt.width())/t.playerRatio)>i.h?(o=i.h,o-=ct,vt.removeClass("mvp-lightbox-center")):vt.addClass("mvp-lightbox-center"),mt.height(o)):"outer"==Ma?"fullscreen"==ed?Lt.height(a.height()):((o=(n=a.width())/t.playerRatio)>i.h&&(o=i.h),Lt.height(o)):"no-playlist"==Ma&&((o=(n=a.width())/t.playerRatio)>i.h&&(o=i.h),a.height(o));if("lightbox"==t.playerType&&"wall"!=Ma&&"normal"==ed&&(o=(n=mt.width())/t.playerRatio,i=MVPUtils.getViewportSize(st),(o=a.height())>i.h?(o=i.h,o-=ct,vt.removeClass("mvp-lightbox-center")):vt.addClass("mvp-lightbox-center"),mt.height(o)),lt&&"javascript"==t.gridType&&t.breakPointArr&&(G(),pr!=mr&&(mr=pr,Ot.find(".mvp-playlist-item").each((function(){if(0<ur){var t=100/pr;e(this).css({marginLeft:0,marginTop:0,marginRight:ur+"px",marginBottom:ur+"px",width:"calc("+t+"% - "+ur+"px)"})}else e(this).css({marginLeft:0,marginTop:0,marginRight:ur+"px",marginBottom:ur+"px",width:100/pr+"%"})})))),t.minimizeOnScroll&&(St.hasClass(t.minimizeClass)?"normal"==ed&&(500>=i.w?a.addClass("mvp-minimize-full-width"):a.removeClass("mvp-minimize-full-width")):St.css({width:a.width(),height:a.height()})),sd=Yt.width(),Vn=null,Il=da.width(),vd&&vd.height()>Lt.height()-60&&vd.css("maxHeight",Lt.height()-60).addClass("mvp-settings-holder-scrollable"),Es&&Rn.is360&&Le(),t.elementsVisibilityArr)for(i=t.elementsVisibilityArr.length,n=a.width(),a=0;a<i;a++)n<(o=t.elementsVisibilityArr[a]).width?(-1==o.elements.indexOf("seekbar")&&Gt.addClass("mvp-force-hide"),-1==o.elements.indexOf("play")&&Bt.addClass("mvp-force-hide"),-1==o.elements.indexOf("time")&&(zt.addClass("mvp-force-hide"),qt.addClass("mvp-force-hide"),Ft.addClass("mvp-force-hide")),-1==o.elements.indexOf("download")&&hi.addClass("mvp-force-hide"),-1==o.elements.indexOf("pip")&&Hi.addClass("mvp-force-hide"),-1==o.elements.indexOf("cc")&&Wi.addClass("mvp-force-hide"),-1==o.elements.indexOf("chapter")&&(oa.addClass("mvp-force-hide"),sa.addClass("mvp-force-hide")),-1==o.elements.indexOf("share")&&vi.addClass("mvp-force-hide"),-1==o.elements.indexOf("info")&&ai.addClass("mvp-force-hide"),-1==o.elements.indexOf("next")&&_i.addClass("mvp-force-hide"),-1==o.elements.indexOf("previous")&&Ii.addClass("mvp-force-hide"),-1==o.elements.indexOf("rewind")&&ji.addClass("mvp-force-hide"),-1==o.elements.indexOf("skip_backward")&&Oi.addClass("mvp-force-hide"),-1==o.elements.indexOf("skip_forward")&&Ai.addClass("mvp-force-hide"),-1==o.elements.indexOf("volume")&&Jt.addClass("mvp-force-hide"),-1==o.elements.indexOf("volume_seekbar")&&Zt.addClass("mvp-force-hide"),-1==o.elements.indexOf("fullscreen")&&td.addClass("mvp-force-hide"),-1==o.elements.indexOf("theater")&&Yi.addClass("mvp-force-hide"),-1==o.elements.indexOf("playlist")&&di.addClass("mvp-force-hide"),-1==o.elements.indexOf("annotations")&&Nt.addClass("mvp-force-hide"),-1==o.elements.indexOf("upnext")&&wi.addClass("mvp-force-hide"),-1==o.elements.indexOf("settings")&&hd.addClass("mvp-force-hide")):(-1==o.elements.indexOf("seekbar")&&Gt.removeClass("mvp-force-hide"),-1==o.elements.indexOf("play")&&Bt.removeClass("mvp-force-hide"),-1==o.elements.indexOf("time")&&(zt.removeClass("mvp-force-hide"),qt.removeClass("mvp-force-hide"),Ft.removeClass("mvp-force-hide")),-1==o.elements.indexOf("download")&&hi.removeClass("mvp-force-hide"),-1==o.elements.indexOf("pip")&&Hi.removeClass("mvp-force-hide"),-1==o.elements.indexOf("cc")&&Wi.removeClass("mvp-force-hide"),-1==o.elements.indexOf("chapter")&&(oa.removeClass("mvp-force-hide"),sa.removeClass("mvp-force-hide")),-1==o.elements.indexOf("share")&&vi.removeClass("mvp-force-hide"),-1==o.elements.indexOf("info")&&ai.removeClass("mvp-force-hide"),-1==o.elements.indexOf("next")&&_i.removeClass("mvp-force-hide"),-1==o.elements.indexOf("previous")&&Ii.removeClass("mvp-force-hide"),-1==o.elements.indexOf("rewind")&&ji.removeClass("mvp-force-hide"),-1==o.elements.indexOf("skip_backward")&&Oi.removeClass("mvp-force-hide"),-1==o.elements.indexOf("skip_forward")&&Ai.removeClass("mvp-force-hide"),-1==o.elements.indexOf("volume")&&Jt.removeClass("mvp-force-hide"),-1==o.elements.indexOf("volume_seekbar")&&Zt.removeClass("mvp-force-hide"),-1==o.elements.indexOf("fullscreen")&&td.removeClass("mvp-force-hide"),-1==o.elements.indexOf("theater")&&Yi.removeClass("mvp-force-hide"),-1==o.elements.indexOf("playlist")&&di.removeClass("mvp-force-hide"),-1==o.elements.indexOf("annotations")&&Nt.removeClass("mvp-force-hide"),-1==o.elements.indexOf("upnext")&&wi.removeClass("mvp-force-hide"),-1==o.elements.indexOf("settings")&&hd.removeClass("mvp-force-hide"));if(!t.keepCaptionFontSizeAfterManualResize&&t.caption_breakPointArr&&ir){for(n=Rt.width(),i=t.caption_breakPointArr.length,a=0;a<i;a++)if(n>(o=t.caption_breakPointArr[a]).width)var s=o.size;Rt.css("fontSize",s+"px")}Kr&&Qr&&Kr.resizePagination()}lt&&t.playlistOpened&&$n&&("buttons"==ka||"hover"==ka)&&$n.resize(Un)}function Le(){if("video"==Es){if(bl&&Rn.is360&&is){var e=_t.width(),t=_t.height();"monoscopic"==Rn.vrMode?(os.aspect=e/t,os.updateProjectionMatrix(),Yo.setSize(e,t)):(ss.aspect=e/t,ss.updateProjectionMatrix(),Xo.setSize(e,t))}}else"image"==Es&&Rn.is360&&vs&&(e=_t.width(),t=_t.height(),ws.setSize(e,t),os.aspect=e/t,os.updateProjectionMatrix(),ws.render(bs,os))}function Ue(e){if(!wn)return!1;if(void 0!==e){if(t.playlistOpened&&1==e||!t.playlistOpened&&0==e)return!1;t.playlistOpened=!e}var i=St.hasClass(t.minimizeClass)?St:dt;if("vrb"==Ma)if(It.hasClass("mvp-playlist-holder-bottom")){var a=t.playlistOpened?Lt.height():Lt.height()+It.height();i.animate({height:a},200,(function(){Ne()}))}else e=t.playlistOpened?i.width():i.width()-It.width(),Lt.animate({width:e},350,(function(){Ne(),je(!0)}));else"hb"==Ma?"fullscreen"==ed?(e=MVPUtils.getViewportSize(st),(a=(i=i.width())/t.playerRatio)>e.h&&(a=e.h),t.playlistOpened?Lt.animate({height:a},200,(function(){Ne()})):(e=e.h-It.height(),Lt.animate({height:e},200,(function(){Ne()})))):(a=t.playlistOpened?Lt.height():Lt.height()+It.height(),i.animate({height:a},200,(function(){Ne()}))):"vb"==Ma?"fullscreen"==ed?(e=MVPUtils.getViewportSize(st),(a=(i=i.width())/t.playerRatio)>e.h&&(a=e.h),t.playlistOpened?Lt.animate({height:e.h},200,(function(){Ne()})):(e=e.h-It.height(),Lt.animate({height:e},200,(function(){Ne()})))):(a=t.playlistOpened?Lt.height():Lt.height()+It.height(),i.animate({height:a},200,(function(){Ne()}))):"outer"==Ma&&"fullscreen"!=ed&&(a=t.playlistOpened?Lt.height():Lt.height()+It.height(),i.animate({height:a},200,(function(){})));t.playlistOpened=!t.playlistOpened}function De(i){var a={};if(a.origclasses=i.attr("class"),a.type=a.origtype=i.attr("data-type"),null!=i.attr("data-noapi")&&(a.noApi=!0),null!=i.attr("data-is360")&&(a.is360=!0,a.vrMode="monoscopic"),null!=i.attr("data-vr-mode")&&(ns?a.vrMode=i.attr("data-vr-mode"):a.vrModeOrig=i.attr("data-vr-mode")),null!=i.attr("data-media-id")&&(a.mediaId=i.attr("data-media-id")),null!=i.attr("data-category")&&(a.category=i.attr("data-category")),null!=i.attr("data-tag")&&(a.tag=i.attr("data-tag")),Ka?a.pwd=Ka:null!=i.attr("data-pwd")&&(a.pwd=i.attr("data-pwd")),null!=i.attr("data-live-stream")&&(a.liveStream=!0),null!=i.attr("data-alt")&&(a.alt=i.attr("data-alt")),"audio"==a.type||"video"==a.type?a.path=i.data("path"):null!=i.attr("data-path")&&(a.path=i.attr("data-path"),-1!=a.path.indexOf("ebsfm:")&&(a.path=MVPUtils.b64DecodeUnicode(a.path.substr(6)))),null!=i.attr("data-mp4")&&(a.mp4=i.attr("data-mp4")),null!=i.attr("data-thumb")&&(a.thumb=i.attr("data-thumb")),null!=i.attr("data-hover-preview")&&(a.hoverPreview=i.attr("data-hover-preview")),null!=i.attr("data-title")&&(a.title=i.attr("data-title")),null!=i.attr("data-description")&&(a.description=i.attr("data-description")),null!=i.attr("data-quality")&&(a.quality=i.attr("data-quality")),null!=i.attr("data-download")&&(a.download=i.attr("data-download")),null!=i.attr("data-watched-complete")&&(a.watchedComplete=!0),hn||null==i.attr("data-slideshow-images")||(a.slideshowImages=i.attr("data-slideshow-images").split(",")),null!=i.attr("data-poster")&&(a.poster=i.attr("data-poster")),null!=i.attr("data-poster-frame-time")&&(a.posterFrameTime=i.attr("data-poster-frame-time")),null!=Ws?a.lockTime=Ws:null!=i.attr("data-lock-time")&&(a.lockTime=Number(i.attr("data-lock-time"))),Gs&&(a.lockVideoUserRoles=Gs),Ys?a.start=Ys:null!=i.attr("data-start")&&(a.start=Number(i.attr("data-start"))),Ks?a.end=Ks:null!=i.attr("data-end")&&(a.end=Number(i.attr("data-end"))),Qs?a.playbackRate=Qs:null!=i.attr("data-playback-rate")&&(a.playbackRate=Number(i.attr("data-playback-rate"))),null!=i.attr("data-time-watched")&&(a.timeWatched=i.attr("data-time-watched")),null!=i.attr("data-duration")&&(a.duration=i.attr("data-duration")),null!=i.attr("data-aspect-ratio")&&(a.aspectRatio=Number(i.attr("data-aspect-ratio"))),null!=i.attr("data-id3")&&(a.id3=!0),null!=i.attr("data-share")&&(a.share=i.attr("data-share")),null!=i.attr("data-limit")&&(a.limit=Number(i.attr("data-limit"))),null!=i.attr("data-is360")&&(a.is360=!0),null!=i.attr("data-preview-seek")&&(a.previewSeek=i.attr("data-preview-seek")),null!=i.attr("data-user-id")&&(a.user_id=i.attr("data-user-id")),null!=i.attr("data-sort")&&(a.sort=i.attr("data-sort"),null!=i.attr("data-sort-direction")&&(a.sortDirection=i.attr("data-sort-direction"))),null!=i.attr("data-user-account")&&(a.userAccount=i.attr("data-user-account")),null!=i.attr("data-upload-date")&&(a.date=i.attr("data-upload-date")),i.children(".mvp-subtitles").length){var n=i.children(".mvp-subtitles");n.children("div").length&&(a.subtitles=[],n.children("div").each((function(){var t=e(this),i=t.attr("data-label");i={label:i,value:i,src:t.attr("data-src")},null!=t.attr("data-default")&&(i.default=!0),a.subtitles.push(i)})),a.subtitles.push({label:t.subtitleOffText,value:t.subtitleOffText}))}return i.find(".mvp-custom-playlist-item-content").length&&(a.customContent=i.find(".mvp-custom-playlist-item-content").html()),null!=i.attr("data-chapters")&&(a.chapters=i.attr("data-chapters")),null!=i.attr("data-link")&&(a.link=i.attr("data-link"),null!=i.attr("data-target")?a.target=i.attr("data-target"):a.target="_blank"),null!=i.attr("data-end-link")&&(a.endLink=i.attr("data-end-link"),a.endTarget="_blank",null!=i.attr("data-end-target")&&(a.endTarget=i.attr("data-end-target"))),i.children(".mvp-ad-section").length?(a.adSection=i.children(".mvp-ad-section"),Nl&&(a.adSection=a.adSection.wrap("<p>").parent().html())):Ar&&(a.adSection=Ar,Nl&&(a.adSection=a.adSection.wrap("<p>").parent().html())),i.children(".mvp-annotation-section").length?(a.annotationSection=i.children(".mvp-annotation-section"),Nl&&(a.annotationSection=a.annotationSection.wrap("<p>").parent().html())):Hr&&(a.annotationSection=Hr,Nl&&(a.annotationSection=a.annotationSection.wrap("<p>").parent().html())),null!=i.attr("data-load-more")&&(on=!0,an=i.wrap("<p>").parent().html()),a}function Be(e){var t={};return t.type=e.attr("data-type"),"audio"==t.type||"video"==t.type?t.path=e.data("path"):null!=e.attr("data-path")&&(t.path=e.attr("data-path"),-1!=t.path.indexOf("ebsfm:")&&(t.path=MVPUtils.b64DecodeUnicode(t.path.substr(6)))),null!=e.attr("data-is360")&&(t.is360=!0),null!=e.attr("data-poster")&&(t.poster=e.attr("data-poster")),null!=e.attr("data-link")&&(t.link=e.attr("data-link"),null!=e.attr("data-target")?t.target=e.attr("data-target"):t.target="_blank"),null!=e.attr("data-end-link")&&(t.endLink=e.attr("data-end-link"),t.endTarget="_blank",null!=e.attr("data-end-target")&&(t.endTarget=e.attr("data-end-target"))),null!=e.attr("data-skip-enable")&&(t.skipEnable=Math.abs(parseInt(e.attr("data-skip-enable"),10))),null!=e.attr("data-ad-id")&&(t.adId=e.attr("data-ad-id")),null!=e.attr("data-duration")&&(t.duration=e.attr("data-duration")),t}function ze(){ci.show(),qa=!0,Wl&&Wl.css("opacity",0),e.ajax({url:t.ajax_url,type:"post",data:[{name:"action",value:"mvp_add_more"},{name:"playlist_id",value:zs},{name:"addMoreOffset",value:Ga},{name:"addMoreLimit",value:Ha},{name:"addMoreSortOrder",value:Qa},{name:"addMoreSortDirection",value:Ja},{name:"encryptMediaPaths",value:Ya},{name:"taxonomy",value:Xa},{name:"category",value:Za},{name:"tag",value:en},{name:"match",value:tn}],dataType:"json"}).done((function(e){qs&&null!=qs.attr("data-add-more-offset")&&(Ga=parseInt(qs.attr("data-add-more-offset"),10)+Ha,qs.attr("data-add-more-offset",Ga)),ot.addTrack("html",e)})).fail((function(e,t,i){console.log(e.responseText,t,i),ot.endLoadMore()}))}function Fe(){dl[En].page=En;var t=[];Ot.find(".mvp-playlist-item:not(.mvp-pagination-hidden)").each((function(){t.push(e(this))})),dl[En].media_id=t}function qe(i){var a='<div class="mvp-pagination-container">';if(1<(i+=1)&&(a+='<div class="mvp-pagination-page mvp-pagination-prev" data-page-id="prev" title="'+t.paginationPreviousBtnTitle+'">'+t.paginationPreviousBtnText+"</div>"),3<i&&(a+='<div class="mvp-pagination-page mvp-pagination-start" data-page-id="0">1</div><div class="mvp-pagination-dots">...</div>'),0<i-2){var n=i-2;a+='<div class="mvp-pagination-page" data-page-id="'+(n-1)+'">'+n+"</div>"}0<i-1&&(a+='<div class="mvp-pagination-page" data-page-id="'+((n=i-1)-1)+'">'+n+"</div>"),a+='<div class="mvp-pagination-page mvp-pagination-currentpage" data-page-id="'+((n=i)-1)+'">'+n+"</div>",i+1<Mn+1&&(a+='<div class="mvp-pagination-page" data-page-id="'+((n=i+1)-1)+'">'+n+"</div>"),i+2<Mn+1&&(a+='<div class="mvp-pagination-page" data-page-id="'+((n=i+2)-1)+'">'+n+"</div>"),i<Mn-2&&(a+='<div class="mvp-pagination-dots">...</div><div class="mvp-pagination-page mvp-pagination-end" data-page-id="'+((n=Mn)-1)+'">'+n+"</div>"),i<Mn&&(a+='<div class="mvp-pagination-page mvp-pagination-next" data-page-id="next" title="'+t.paginationNextBtnTitle+'">'+t.paginationNextBtnText+"</div>"),a+="</div>",kn?kn.html(a):dt.append('<div class="mvp-pagination-wrap">'+a+"</div>"),Pn||(Pn=!0,kn=dt.find(".mvp-pagination-wrap").on("click",".mvp-pagination-page:not(.mvp-pagination-currentpage)",(function(){if(!wn||Cn||qa)return!1;qa=!0,xn&&xn.removeClass("mvp-pagination-currentpage"),xn=e(this).addClass("mvp-pagination-currentpage");var i=e(this).attr("data-page-id");En="prev"==i?En-1:"next"==i?En+1:parseInt(i,10),null==dl[En].page?(Ga=En*Ha,ci.show(),qa=!0,e.ajax({url:t.ajax_url,type:"post",data:[{name:"action",value:"mvp_add_more"},{name:"playlist_id",value:zs},{name:"addMoreOffset",value:Ga},{name:"addMoreLimit",value:Ha},{name:"addMoreSortOrder",value:Qa},{name:"addMoreSortDirection",value:Ja},{name:"encryptMediaPaths",value:Ya},{name:"taxonomy",value:Xa},{name:"category",value:Za},{name:"tag",value:en},{name:"match",value:tn}],dataType:"json"}).done((function(t){Ot.find(".mvp-playlist-item:visible").addClass("mvp-pagination-hidden").each((function(){e(this).find(".mvp-thumbimg").removeClass("mvp-visible")})),ot.addTrack("html",t),qe(En),Fe()})).fail((function(e,t,i){console.log(e,t,i),ot.endLoadMore()}))):(Ot.find(".mvp-playlist-item:visible").addClass("mvp-pagination-hidden").each((function(){e(this).find(".mvp-thumbimg").removeClass("mvp-visible")})),e(dl[En].media_id).each((function(){var t=e(this).removeClass("mvp-pagination-hidden").find(".mvp-thumbimg").removeClass("mvp-visible");setTimeout((function(){t.addClass("mvp-visible")}),20)})),qe(En),qa=!1)})),xn=kn.find(".mvp-pagination-currentpage"))}function $e(){if(t.activateWhenParentVisibleSelector){var i=e(t.activateWhenParentVisibleSelector);if("none"==i.css("display"))var a=setInterval((function(){"none"!=i.css("display")&&(clearInterval(a),We())}),500);else We()}else We()}function He(){var e={activePlaylist:Ln,playlist:JSON.stringify(Pl),date:Math.floor(Date.now()/1e3)};qs&&(e.globalPlaylistData=qs.wrap("<p>").parent().html()),on&&nn&&an&&$a&&(e.loadMoreOnTotalScroll=!0,e.nextPageToken=nn,e.loadMoreItem=an,e.loadMoreType=$a),Jr&&Jr.saveData(e)}function We(){setTimeout((function(){var i=e('<div class="mvp-playlist-item" style="opacity:0;"></div>').prependTo(dt);t.pi_size="h"==Ia?i.outerWidth(!0):i.outerHeight(!0),i.remove(),kl.length?$():Ke.length?(Cn=!0,ci.show(),e(ot).trigger("playlistStartLoad",{instance:ot,instanceName:t.instanceName}),Dn=(Ml=Ke).length,F()):t.activePlaylist&&!MVPUtils.isEmpty(t.activePlaylist)?B(t.activePlaylist):W()}),50)}t=e.extend(!0,{},{vimeo_js:"https://player.vimeo.com/api/player.js",vimeoLoader_js:"js/vimeoLoader.js",youtube_js:"https://www.youtube.com/iframe_api",youtubeLoader_js:"js/youtubeLoader.js",mCustomScrollbar_js:"https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js",mCustomScrollbar_css:"css/jquery.mCustomScrollbar.css",perfectScrollbar_js:"https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/1.5.0/perfect-scrollbar.min.js",hls_js:"https://cdn.jsdelivr.net/npm/hls.js@latest",dash_js:"https://cdn.dashjs.org/latest/dash.all.min.js",mediatags_js:"https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.0/jsmediatags.min.js",jquery_touchSwipe:"https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js",adsbygoogle_js:"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",three_js:"js/three.min.js",orbitControls_js:"https://unpkg.com/three@0.85.0/examples/js/controls/OrbitControls.js",md5_js:"https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js",equalizer_js:"js/equalizer.js",rel_js:"js/rel_pagination.js",share_js:"js/share_manager.js",cache_js:"js/cache.js",playlist_navigation_js:"js/playlist_navigation.js",sourcePath:"",playlistList:"#mvp-playlist-list",instanceName:"",queryInstance:"",playerType:"normal",createPlayer:!0,rememeberCaptionState:!0,youtubePlayerType:"chromeless",blockYoutubeEvents:!0,vimeoPlayerType:"default",vimeoPlayerColor:"#00adef",blockVimeoEvents:!0,playerRatio:1.7777777,playlistBottomHeight:300,playlistSideWidth:320,volume:.5,preload:"auto",autoPlay:!1,autoPlayAfterFirst:!1,autoPlayInViewport:!1,addResizeEvent:!0,mediaEndAction:"next",useShare:!0,adUpcomingMsgTime:5,thumbScrollValue:50,youtubePlayerColor:"red",verticalBottomSepearator:750,subtitleOffText:"Disabled",useMobileNativePlayer:!1,hideQualityMenuOnSingleQuality:!0,useLightboxAdvanceButtons:!0,minimizeOnScroll:!1,minimizeOnScrollOnlyIfPlaying:!1,aspectRatio:2,gridType:"javascript",adUpcomingTime:5,randomPlay:!1,playlistScrollType:"mcustomscrollbar",loopingOn:!0,captionStateKey:"mvp-caption-state",hidePlaylistOnFullscreenEnter:!0,focusVideoInTheater:!0,hidePlaylistOnTheaterEnter:!0,playlistItemContent:"thumb,title,description",playbackPositionKey:"mvp-playback-position",rightClickContextMenu:"custom",tooltipClose:"Close",tooltipLightboxPrevious:"Previous",tooltipLightboxNext:"Next",closeSettingsMenuOnSelect:!0,playlistOpened:!0,hidePlaylistOnMinimize:!0,clickOnBackgroundClosesLightbox:!0,limitDescriptionText:2,togglePlaybackOnMultipleInstances:!0,showStreamVideoBitrateMenu:!0,showStreamAudioBitrateMenu:!0,useKeyboardNavigationForPlayback:!1,keyboardControls:[],seekTime:10,scrollToPlayer:0,seekToChapterStart:!0,autoOpenChapterMenu:!0,hideChapterMenuOnChapterSelect:!1,useSwipeNavigation:!1,autoPlaylistStyleVrbSwitch:!0,createAdMarkers:!0,showPrevNextVideoThumb:!0,playAdsOnlyOnce:!1,showAnnotationsOnlyOnce:!1,displayWatchedPercentage:!1,autoRotateSpeed:.5,autoRotatePanorama:!0,enablePerspectiveWhenVrNotAvailable:!0,addPlaylistEvents:!0,idleTimeout:2e3,caption_breakPointArr:[{width:0,size:18},{width:480,size:20},{width:768,size:22},{width:1024,size:24},{width:1280,size:36}],youtubeAppId:"",youtubeThumbSize:"medium",vimeoThumbSize:"295x166",searchDescriptionInPlaylist:!0,minimizeClass:"mvp-minimize-br",whatsAppWarning:"Please share this content on mobile device!",comingnextTime:10,showControlsBeforeStart:!1,useStatistics:!1,disableVideoSkip:!1,keepCaptionFontSizeAfterManualResize:!1,requirePosterFromFolder:!0,requireThumbnailsFromFolder:!0,useAudioEqualizer:!1,playbackPositionTime:null,mediaId:null,mediaTitle:null,paginationPreviousBtnTitle:"Previous",paginationPreviousBtnText:"Prev",paginationNextBtnTitle:"Next",paginationNextBtnText:"Next"},t);var Ge=MVPUtils.getUrlParameter(),Ye=[],Ke=[],Qe=[],Je=[];if(decodeURIComponent(Ge["mvp-query-instance"])==t.instanceName&&(Object.keys(Ge).forEach((function(e){if(0==e.indexOf("mvp-")){var i=e.substr(4),a=i;e=decodeURIComponent(Ge[e]).replace(/\+/g," "),-1==i.indexOf("path-")&&-1==i.indexOf("subtitle-")&&(a=i.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))),e&&(t.hasOwnProperty(a)?("true"===e?e=!0:"false"===e&&(e=!1),t[a]=e):(e=e.split(",").map((function(e){return e.trim()})),-1<a.indexOf("path-")?Qe.push({key:a,value:e}):-1<a.indexOf("subtitle-")?Je.push({key:a,value:e}):Ye.push({key:a,value:e})))}})),Qe.length&&(Qe=MVPUtils.regroupArray(Qe),Ye.push({key:"path",value:Qe})),Je.length&&(Je=MVPUtils.regroupArray(Je),Ye.push({key:"subtitles",value:Je})),Je=Qe=null,Ye.length)){var Xe,Ze,et=Ye.length,tt=Ye[0].value.length;for(Ze=0;Ze<tt;Ze++){var it={};for(Xe=0;Xe<et;Xe++){var at=Ye[Xe],nt=at.value[Ze];-1==at.key.indexOf("path-")&&-1==at.key.indexOf("subtitle-")&&("true"===nt?nt=!0:"false"===nt&&(nt=!1),it[at.key]=nt,"type"===at.key&&(it.origtype=nt))}Ke.push(it)}}Ge=null;var ot=this,st=MVPUtils.isMobile(),rt=t.useSwipeNavigation&&"ontouchstart"in window,lt=!0;"vlb"==t.playlistPosition?t.playlistPosition="vrb":"ht"==t.playlistPosition&&(t.playlistPosition="hb");var dt=e(this).css("display","block"),ct=0;if("wall"==t.playlistPosition||"lightbox"==t.playerType){var pt='<div class="mvp-lightbox-wrap"><div class="mvp-lightbox"><div class="mvp-lightbox-inner"><div class="mvp-lightbox-content-inner"><div class="mvp-lightbox-close" title="'+t.tooltipClose+'"><svg viewBox="0 0 384 512"><path d="M217.5 256l137.2-137.2c4.7-4.7 4.7-12.3 0-17l-8.5-8.5c-4.7-4.7-12.3-4.7-17 0L192 230.5 54.8 93.4c-4.7-4.7-12.3-4.7-17 0l-8.5 8.5c-4.7 4.7-4.7 12.3 0 17L166.5 256 29.4 393.2c-4.7 4.7-4.7 12.3 0 17l8.5 8.5c4.7 4.7 12.3 4.7 17 0L192 281.5l137.2 137.2c4.7 4.7 12.3 4.7 17 0l8.5-8.5c4.7-4.7 4.7-12.3 0-17L217.5 256z"></path></svg></div>';t.useLightboxAdvanceButtons&&(pt+='<div class="mvp-lightbox-prev" title="'+t.tooltipLightboxPrevious+'"><svg viewBox="0 0 256 512"><path d="M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"></path></svg></div><div class="mvp-lightbox-next" title="'+t.tooltipLightboxNext+'"><svg viewBox="0 0 256 512"><path d="M17.525 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L205.947 256 10.454 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L34.495 36.465c-4.686-4.687-12.284-4.687-16.97 0z"></path></svg></div>');var ut=e(pt+="</div></div></div>");if("wall"==t.playlistPosition){ut.addClass(dt.attr("id")).prependTo(dt);var mt=ut.find(".mvp-lightbox-content-inner").append(dt.find(".mvp-player-wrap"));dt.find(".mvp-playlist-holder").prependTo(dt)}else"lightbox"==t.playerType&&(ut.addClass(dt.attr("id")).appendTo(e("body")),mt=ut.find(".mvp-lightbox-content-inner").append(dt.addClass("mvp-is-lightbox")));var ht=ut.find(".mvp-lightbox");ut.find(".mvp-lightbox-content");var vt=ut.find(".mvp-lightbox-inner"),ft=ut.find(".mvp-lightbox-close"),gt=ut.find(".mvp-lightbox-prev"),yt=ut.find(".mvp-lightbox-next");ct=2*parseInt(mt.css("padding"),10)}var bt,wt,Ct,Tt,Pt,xt,kt,Mt,Et,St=dt.find(".mvp-player-wrap"),_t=dt.find(".mvp-media-holder").show(),It=dt.find(".mvp-playlist-holder"),jt=dt.find(".mvp-playlist-inner"),Ot=dt.find(".mvp-playlist-content"),At=dt.find(".mvp-playlist-filter-msg"),Vt=dt.find(".mvp-subtitle-holder").css("display","none"),Rt=dt.find(".mvp-subtitle-holder-inner").attr("aria-hidden",!0),Nt=dt.find(".mvp-annotation-holder").css("display","none"),Lt=dt.find(".mvp-player-holder").show(),Ut=dt.find(".mvp-player-controls"),Dt=dt.find(".mvp-player-controls-bottom"),Bt=dt.find(".mvp-playback-toggle"),zt=dt.find(".mvp-media-time-current").html("00:00"),Ft=dt.find(".mvp-media-time-separator"),qt=dt.find(".mvp-media-time-total").html("00:00"),$t=dt.find(".mvp-preview-seek-wrap"),Ht=dt.find(".mvp-preview-seek-inner"),Wt=dt.find(".mvp-preview-seek-info"),Gt=dt.find(".mvp-seekbar"),Yt=dt.find(".mvp-progress-bg"),Kt=dt.find(".mvp-load-level"),Qt=dt.find(".mvp-progress-level"),Jt=dt.find(".mvp-volume-wrapper"),Xt=dt.find(".mvp-volume-toggle"),Zt=dt.find(".mvp-volume-seekbar"),ei=dt.find(".mvp-volume-bg"),ti=dt.find(".mvp-volume-level"),ii=dt.find(".mvp-info-holder"),ai=dt.find(".mvp-info-toggle").hide(),ni=dt.find(".mvp-player-title"),oi=dt.find(".mvp-player-desc"),si=dt.find(".mvp-pwd-holder"),ri=dt.find(".mvp-pwd-field"),li=dt.find(".mvp-pwd-error").text(),di=dt.find(".mvp-playlist-toggle"),ci=dt.find(".mvp-player-loader").show(),pi=dt.find(".mvp-big-play"),ui=dt.find(".mvp-loop-toggle"),mi=dt.find(".mvp-shuffle-toggle"),hi=dt.find(".mvp-download-toggle").hide(),vi=dt.find(".mvp-share-toggle"),fi=dt.find(".mvp-share-holder"),gi=dt.find(".mvp-resume-holder"),yi=dt.find(".mvp-resume-header-title"),bi=dt.find(".mvp-live-note"),wi=dt.find(".mvp-upnext-wrap"),Ci=wi.find(".mvp-upnext-thumb"),Ti=wi.find(".mvp-upnext-title"),Pi=wi.find(".mvp-upnext-duration"),xi=dt.find(".mvp-upnext-wrap2"),ki=xi.find(".mvp-upnext-thumb"),Mi=xi.find(".mvp-upnext-header"),Ei=xi.find(".mvp-upnext-title"),Si=xi.find(".mvp-upnext-duration"),_i=dt.find(".mvp-next-toggle"),Ii=dt.find(".mvp-previous-toggle"),ji=dt.find(".mvp-rewind-toggle"),Oi=dt.find(".mvp-skip-backward-toggle"),Ai=dt.find(".mvp-skip-forward-toggle"),Vi=dt.find(".mvp-settings-toggle"),Ri=dt.find(".mvp-playback-rate-menu"),Ni=dt.find(".mvp-quality-menu"),Li=dt.find(".mvp-quality-settings-menu"),Ui=dt.find(".mvp-subtitle-menu"),Di=dt.find(".mvp-subtitle-settings-menu"),Bi=dt.find(".mvp-audio-language-menu");dt.find(".mvp-audio-language-menu-holder");var zi,Fi,qi=dt.find(".mvp-audio-language-toggle").hide(),$i=dt.find(".mvp-audio-language-settings-menu"),Hi=dt.find(".mvp-pip-toggle").hide(),Wi=dt.find(".mvp-cc-toggle").hide(),Gi=dt.find(".mvp-vr-toggle").hide(),Yi=dt.find(".mvp-theater-toggle"),Ki=dt.find(".mvp-unmute-toggle"),Qi=dt.find(".mvp-comingnext-holder"),Ji=dt.find(".mvp-comingnext-poster-holder"),Xi=dt.find(".mvp-comingnext-data-title"),Zi=dt.find(".mvp-comingnext-timer-circle-stroke"),ea=dt.find(".mvp-comingnext-timer-wrap"),ta=dt.find(".mvp-comingnext-cancel"),ia=dt.find(".mvp-redirect-login-holder-download"),aa=dt.find(".mvp-redirect-login-holder-watch"),na=dt.find(".mvp-rel-holder"),oa=dt.find(".mvp-chapter-toggle").hide(),sa=dt.find(".mvp-chapter-menu-holder"),ra=dt.find(".mvp-chapter-menu"),la=dt.find(".mvp-ad-seekbar"),da=dt.find(".mvp-ad-progress-bg"),ca=dt.find(".mvp-ad-load-level"),pa=dt.find(".mvp-ad-progress-level"),ua=dt.find(".mvp-ad-info-time"),ma=dt.find(".mvp-ad-skip-btn"),ha=dt.find(".mvp-ad-skip-msg"),va=dt.find(".mvp-ad-skip-msg-text"),fa=va.html(),ya=dt.find(".mvp-ad-skip-msg-end"),ba=dt.find(".mvp-ad-skip-thumb"),wa=dt.find(".mvp-ad-controls"),Ca=dt.find(".mvp-ad-info-start"),Ta=dt.find(".mvp-ad-info-start-time");if(t.playerClass)var Pa=t.playerClass;else{var xa=t.skin,ka=t.navigationType||"",Ma=t.playlistPosition||"",Ea="",Sa=t.playlistStyle||"",_a=t.playerShadow||"";"hb"!=Ma||"buttons"!=ka||"dot"!=Sa&&"drot"!=Sa||(Ea=t.navigationStyle),"no-playlist"==Ma&&(Sa=""),"vrb"!=Ma&&"vb"!=Ma&&"hb"!=Ma&&(Ea=ka=""),"vrb"!=Ma&&"vb"!=Ma&&"hb"!=Ma&&"no-playlist"!=Ma&&(_a=""),"outer"==Ma||"wall"==Ma?"gdot"!=Sa&&"gdbt"!=Sa&&"gdrot"!=Sa&&(Sa="gdot"):("vrb"==Ma||"vb"==Ma||"hb"==Ma)&&"dot"!=Sa&&"drot"!=Sa&&(Sa="drot");var Ia="v";"hb"==Ma&&(Ia="h"),Pa="mvp-player mvp-skin-"+xa,-1<xa.indexOf("flat")&&(Pa+=" mvp-skin-flat"),MVPUtils.isEmpty(Ma)||(Pa+=" mvp-"+Ma),MVPUtils.isEmpty(ka)||(Pa+=" mvp-nt-"+ka),MVPUtils.isEmpty(Ea)||(Pa+=" mvp-ns-"+Ea),MVPUtils.isEmpty(Sa)||(Pa+=" mvp-ps-"+Sa,"dot"==Sa&&t.autoPlaylistStyleVrbSwitch&&(Fi=!0)),MVPUtils.isEmpty(_a)||(Pa+=" mvp-"+_a+" mvp-shadow-effect-hidden"),t.navigationDirection=Ia,t.navigationType=ka}"spaced"==Ea&&0==It.find(".mvp-nav-backward-horizontal").length&&e('<div class="mvp-nav-backward mvp-nav-backward-horizontal mvp-contr-btn"><svg viewBox="0 0 192 512"><path d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"></path></svg></div><div class="mvp-nav-forward mvp-nav-backward-horizontal mvp-contr-btn"><svg viewBox="0 0 192 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg></div></div>').appendTo(It),dt.addClass(Pa),"wall"==Ma?(t.playerType="lightbox",t.playlistOpened=!0,di.remove()):"outer"==Ma?(t.playerType="normal",t.minimizeOnScroll=!1,t.hidePlaylistOnFullscreenEnter=!1):"no-playlist"==Ma&&(lt=!1,It.remove(),di.remove()),"lightbox"==t.playerType&&(t.autoPlayInViewport=!1,t.minimizeOnScroll=!1,t.hidePlaylistOnFullscreenEnter=!1,Yi.remove()),t.minimizeOnScroll&&t.useMinimizeCloseBtn&&St.append('<div class="mvp-minimize-close mvp-contr-btn" title="'+t.tooltipClose+'"><svg role="img" viewBox="0 0 320 512"><path d="M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"></path></svg></div>'),dt.find(".mvp-playlist-bar").length&&("h"==Ia&&It.height(It.height()+dt.find(".mvp-playlist-bar").height()),"wall"!=Ma&&"outer"!=Ma||dt.find(".mvp-playlist-bar").prependTo(jt)),"default"==t.youtubePlayerType?t.blockYoutubeEvents=!1:rt&&(t.blockYoutubeEvents=!0),"javascript"!=t.gridType&&(t.breakPointArr=null,dt.addClass("mvp-grid mvp-"+t.gridType)),t.breakPointArr&&t.breakPointArr.length&&MVPUtils.keysrt(t.breakPointArr,"width"),t.elementsVisibilityArr&&t.elementsVisibilityArr.length&&MVPUtils.keysrt(t.elementsVisibilityArr,"width"),t.caption_breakPointArr&&t.caption_breakPointArr.length&&MVPUtils.keysrt(t.caption_breakPointArr,"width"),t.wrapperMaxWidth&&("lightbox"==t.playerType?vt.css("max-width",t.wrapperMaxWidth):dt.css("max-width",t.wrapperMaxWidth));var ja=MVPUtils.isIOS(),Oa=MVPUtils.isiPhoneIpod();MVPUtils.isAndroid();var Aa=MVPUtils.hasFullscreen(),Va=MVPUtils.hasDownloadSupport(),Ra=MVPUtils.volumeCanBeSet(),Na=MVPUtils.supportsWebGL(),La=MVPUtils.canPlayMp4(),Ua=MVPUtils.canPlayMp3(),Da=MVPUtils.canPlayWav(),Ba=MVPUtils.isChrome();MVPUtils.isSafari();var za,Fa,qa,$a,Ha,Wa,Ga,Ya,Ka,Qa,Ja,Xa,Za,en,tn,an,nn,on,sn=MVPUtils.hasLocalStorage(),rn=document.pictureInPictureEnabled,ln=t.useGa&&t.gaTrackingId,dn=t.rememberPlaybackPosition&&sn,cn=t.playbackPositionKey+t.instanceName,pn=t.instanceName+t.captionStateKey,un=t.playlistItemContent.replace(/\s+/g,"").split(","),mn=t.vimeoThumbSize.substr(0,t.vimeoThumbSize.indexOf("x")),hn=!(ja||!t.useAudioEqualizer||!window.AudioContext&&!window.webkitAudioContext),vn=e(t.playlistList),fn=t.autoPlay,gn=t.volume,yn=t.volume,bn=t.volume||.5,wn=!1,Cn=!0,Tn=t.addMoreOnTotalScroll;ot=this;var Pn,xn,kn,Mn,En,Sn,_n,In,jn,On,An,Vn,Rn,Nn,Ln,Un,Dn,Bn,zn,Fn,qn,$n,Hn,Wn,Gn,Yn,Kn,Qn,Jn,Xn,Zn,eo,to,io,ao,no,oo,so,ro,lo,co,po,uo,mo,ho,vo,fo,go,yo,bo,wo,Co,To,Po,xo,ko,Mo,Eo,So,_o,Io,jo,Oo,Ao,Vo,Ro,No,Lo,Uo,Do,Bo,zo,Fo,qo,$o,Ho,Wo,Go,Yo,Ko,Qo,Jo,Xo,Zo,es,ts,is,as,ns,os,ss,rs,ls,ds,cs,ps,us,ms,hs,vs,fs,gs,ys,bs,ws,Cs,Ts,Ps,xs,ks,Ms,Es,Ss,_s,Is,js,Os,As,Vs,Rs,Ns,Ls,Us,Ds,Bs,zs,Fs,qs,$s,Hs,Ws,Gs,Ys,Ks,Qs,Js,Xs,Zs,er,tr,ir,ar,nr,or,sr,rr,lr,dr,cr,pr,ur,mr,hr,vr,fr,gr,yr,br,wr,Cr,Tr,Pr,xr,kr,Mr,Er,Sr,_r,Ir,jr,Or,Ar,Vr,Rr,Nr,Lr,Ur,Dr,Br,zr,Fr,qr,$r,Hr,Wr,Gr,Yr,Kr,Qr,Jr,Xr,Zr,el,tl,il,al=e("body"),nl=e(window),ol=e(document),sl=e("html"),rl=0,ll=0,dl=[],cl="scroll.minimize"+t.instanceName,pl="scroll.autoplay"+t.instanceName,ul=[],ml="audio video image youtube_single vimeo_single hls dash".split(" "),hl=window.MediaSource,vl=t.vimeoPlayerType,fl=0,gl=0,yl=0,bl=!0,wl=[],Cl=!0,Tl=-1,Pl=[],xl=[],kl=[],Ml=[],El=[],Sl=[],_l=[],Il=0,jl=[],Ol=[],Al=[],Vl=[],Rl=null,Nl=t.useCache&&"indexedDB"in window&&!0,Ll=!0,Ul=!0;t.showVideoTitle&&(Mt=e('<div class="mvp-video-title"></div>').insertAfter(_t)),t.currentUserRoles&&(Zr=t.currentUserRoles.split(",")),t.downloadVideoUserRoles&&(el=t.downloadVideoUserRoles.split(",")),Zr&&el&&(Ll=!MVPUtils.arrayContainsAnotherArray(el,Zr)),t.viewVideoWithoutAdsUserRoles&&(il=t.viewVideoWithoutAdsUserRoles.split(",")),t.viewVideoWithoutAdsForLoggedInUser&&t.isUserLoggedIn&&(Ul=!1),Zr&&il&&(Ul=!MVPUtils.arrayContainsAnotherArray(il,Zr)),t.playlistContent&&(Ot=e(t.playlistContent)),window.playlistScrollLoading=!1,void 0===window.mvp_mediaArr&&(window.mvp_mediaArr=[]),mvp_mediaArr.push({inst:ot,id:t.instanceName}),0==Ot.length&&(Ot=e('<div style="display:none;"></div>'),Ma="no-playlist",lt=!1,ka=""),"outer"!=t.playlistPosition&&"wall"!=t.playlistPosition||0!=dt.find(".mvp-load-more-btn").length||It.append('<div class="mvp-load-more-btn">LOAD MORE</div>');var Dl,Bl,zl,Fl,ql,$l,Hl,Wl=dt.find(".mvp-load-more-btn").on("click",(function(){if(!wn||qa)return!1;on?ot.loadMore():Tn&&ze(),Wl.css("opacity",0)}));if(rt)if(void 0===e.fn.swipe){var Gl=document.createElement("script");Gl.type="text/javascript";var Yl=MVPUtils.relativePath(t.jquery_touchSwipe)?t.jquery_touchSwipe:MVPUtils.qualifyURL(t.sourcePath+t.jquery_touchSwipe);Gl.src=Yl,Gl.onload=Gl.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||i()},Gl.onerror=function(){alert("Error loading "+this.src)};var Kl=document.getElementsByTagName("script")[0];Kl.parentNode.insertBefore(Gl,Kl)}else i();if("lightbox"==t.playerType&&(ft.on("click",(function(){ot.closeLightbox()})),t.clickOnBackgroundClosesLightbox&&ht.on("click",(function(e){e.target==this&&ot.closeLightbox()})),gt.on("click",(function(e){e.stopImmediatePropagation(),Se()})),yt.on("click",(function(e){e.stopImmediatePropagation(),ke()}))),hi.on("click",(function(i){if(e(ot).trigger("mediaDownload",{instance:ot,instanceName:t.instanceName,media:Rn}),ln&&"undefined"!=typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern video player: "+t.instanceName,eventAction:"downloaded",eventLabel:"Video title: "+Rn.title,nonInteraction:!0}),t.restrictDownloadForLoggedInUser&&!t.isUserLoggedIn||!Ll)return U("download"),!1;t.useStatistics&&Oe("mvp_download_count",In)})),ln&&(window.ga||(Dl=window,Bl=document,zl="script",Fl="ga",Dl.GoogleAnalyticsObject=Fl,Dl.ga=Dl.ga||function(){(Dl.ga.q=Dl.ga.q||[]).push(arguments)},Dl.ga.l=1*new Date,ql=Bl.createElement(zl),$l=Bl.getElementsByTagName(zl)[0],ql.async=1,ql.src="https://www.google-analytics.com/analytics.js",$l.parentNode.insertBefore(ql,$l)),ga("create",t.gaTrackingId,"auto"),ga("send","pageview")),t.theaterElement&&!MVPUtils.isEmpty(t.theaterElement)&&t.theaterElementClass&&!MVPUtils.isEmpty(t.theaterElementClass)||delete t.theaterElement,(t.autoPlayInViewport||t.autoPlayAfterFirst)&&(fn=!1),(fn||t.autoPlayInViewport)&&(gn=0,t.autoPlayInViewport&&0!=yn&&ol.on("mousedown.apmvp, keydown.apmvp",(function(){ol.off("mousedown.apmvp, keydown.apmvp"),zn||(zn=!0,!Ts&&go&&(go.volume=yn,go.muted=!1))}))),st&&t.displayPosterOnMobile&&(fn=!1,t.autoPlayInViewport=!1),lt||(t.playlistOpened=!1,It.remove()),Oa&&Hi.remove(),Na?t.vrInfoImage&&(Et=e('<img class="mvp-vr-info" src="'+t.vrInfoImage+'" alt="drag">').insertAfter(_t)):(bl=!1,Ba&&console.log("Turn Hardware Acceleration On Within Chrome Browser to enable 360 videos!")),"xr"in navigator&&navigator.xr.isSessionSupported("immersive-vr").then((function(e){ns=!!e})),"hb"==Ma&&"v"==Ia&&It.css({height:t.playlistBottomHeight}),dn&&(window.attachEvent||window.addEventListener)(ja?"pagehide":"beforeunload",(function(e){if(window.event&&(window.event.cancelBubble=!0),!wn||!Es)return!1;e={activePlaylist:Ln,volume:gn,activeItem:In,playbackPositionTime:parseInt(ot.getCurrentTime(),10)},localStorage.setItem(cn,JSON.stringify(e))})),wi.find(".mvp-upnext-close").on("click",(function(){wi.removeClass("mvp-upnext-on mvp-upnext-visible"),Hs=!0})),Ci.on("click",(function(){wi.removeClass("mvp-upnext-on mvp-upnext-visible"),ke()})),Ti.on("click",(function(){wi.removeClass("mvp-upnext-on mvp-upnext-visible"),ke()})),ma.on("click",(function(){if(!wn||!Nr||!Br)return!1;Nr&&e(ot).trigger("adSkip",{instance:ot,instanceName:t.instanceName,media:Rn}),Ve()})),Nt.on("click",".mvp-annotation-close",(function(){if(t.showAnnotationsOnlyOnce){var i=e(this).closest(".mvp-annotation"),a=i.attr("data-id"),n=Vl.length;for(i.remove(),i=0;i<n;i++)if(a==Vl[i].id){Vl.splice(i,1);break}}else e(this).closest(".mvp-annotation").hide()})),ea.on("click",(function(){ke()})),ta.on("click",(function(){Me(),Re()})),"ontouchstart"in window)var Ql="touchstart.ap mousedown.ap",Jl="touchmove.ap mousemove.ap",Xl="touchend.ap mouseup.ap";else window.PointerEvent?(Ql="pointerdown.ap",Jl="pointermove.ap",Xl="pointerup.ap"):(Ql="mousedown.ap",Jl="mousemove.ap",Xl="mouseup.ap");_t.on("click",(function(e){if(!wn||t.displayPosterOnMobile)return!1;if("image"==Es){if(Nr&&Rn.link){if(!Rn.target||"_blank"!=Rn.target)return e=Rn.link,Pe(),void(window.location=e);window.open(Rn.link)}return!1}if(Rn.is360)return!1;Cl&&_n?Nr&&ot.togglePlayback():ot.togglePlayback()})),dt.find(".mvp-search-field").length&&dt.addClass("mvp-has-search-bar"),(t.searchSelector?e(t.searchSelector):dt.find(".mvp-search-field")).on("keyup",(function(){if(0==Dn)return!1;var i,a=e(this).val().toLowerCase(),n=0;for(i=0;i<Dn;i++){var o=Ot.children(".mvp-playlist-item").eq(i),s=o.find(".mvp-playlist-title").length?o.find(".mvp-playlist-title").html().toLowerCase():"";t.searchDescriptionInPlaylist&&o.find(".mvp-playlist-description").length&&(s+=o.find(".mvp-playlist-description").html().toLowerCase()),-1<s.indexOf(a)?Ot.children(".mvp-playlist-item").eq(i).removeClass("mvp-filter-hidden").fadeIn("slow"):(Ot.children(".mvp-playlist-item").eq(i).addClass("mvp-filter-hidden").fadeOut("slow"),n++)}n==Dn?(At.show(),Hl=!1,Wl&&Wl.addClass("mvp-force-hide")):(At.hide(),Hl=!0,Wl&&Wl.removeClass("mvp-force-hide"))}));var Zl,ed="normal";ol.on("fullscreenchange.mvp mozfullscreenchange.mvp MSFullscreenChange.mvp webkitfullscreenchange.mvp",(function(e){Zl==t.instanceName&&("fullscreen"==ed?r():s())}));var td=dt.find(".mvp-fullscreen-toggle").on("click",(function(){o()}));if(td.find(".mvp-btn-normal").hide(),td.find(".mvp-btn-fullscreen").show(),"disabled"==t.rightClickContextMenu)dt.on("contextmenu",(function(){return!1}));else if("custom"==t.rightClickContextMenu){var id=function(){al.off("click.apcc",id),ad.hide()},ad=dt.find(".mvp-context-menu").on("contextmenu",(function(e){return!1}));ad.find(".mvp-context-copy-video-url").on("click",(function(e){e=window.location.href+ot.getCurrentMediaUrl();var t=document.createElement("input");t.setAttribute("id","mvp-copy-url"),document.body.appendChild(t),document.getElementById("mvp-copy-url").value=e,t.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(t)}));var nd=ad.find(".mvp-context-fullscreen").on("click",(function(e){o()}));Lt.on("contextmenu",(function(i){if(t.displayPosterOnMobile)return!1;if(e(i.target).hasClass("mvp-player-title")||e(i.target).hasClass("mvp-player-desc"))return!0;if(e(i.target).hasClass("mvp-volume-level")||e(i.target).hasClass("mvp-volume-level")||e(i.target).hasClass("mvp-volume-bg")||e(i.target).hasClass("mvp-progress-level")||e(i.target).hasClass("mvp-progress-bg")||e(i.target).hasClass("mvp-load-level")||si.hasClass("mvp-holder-visible-top")||Nr)return!1;i.preventDefault(),i.stopPropagation();var a=Lt[0].getBoundingClientRect(),n=ad.outerWidth(!0),o=ad.outerHeight(!0),s=parseInt(i.pageX-nl.scrollLeft()-a.left,10);i=parseInt(i.pageY-nl.scrollTop()-a.top,10),s>Lt.width()-n&&(s-=n),i>Lt.height()-o&&(i-=o),ad.css({left:s+"px",top:i+"px"}).show(),al.one("click.apcc",id)})).on("mouseleave",id),al.on("mouseleave.mvp",id),ol.on("contextmenu.mvp",id).keyup((function(e){27==e.keyCode&&id()}))}var od,sd,rd=dt.find(".mvp-tooltip");if(st||dt.on("mouseenter","[data-tooltip]",(function(i){var a=(i=e(this)).attr("data-tooltip");if(MVPUtils.isEmpty(a))return!1;var n=St.hasClass(t.minimizeClass)||Hn?St:dt,o=n[0].getBoundingClientRect(),s=i[0].getBoundingClientRect();if(rd.text(a),null!=i.attr("data-tooltip-position"))if("left"==i.attr("data-tooltip-position"))var r=parseInt(s.top-o.top-rd.outerHeight()/2+i.outerHeight()/2),l=parseInt(s.left-o.left-rd.outerWidth()-3);else"bottom"==i.attr("data-tooltip-position")&&(r=parseInt(s.top-o.top+i.outerHeight()),l=parseInt(s.left-o.left-rd.outerWidth()/2+i.outerWidth()/2));else r=parseInt(s.top-o.top-rd.outerHeight()),l=parseInt(s.left-o.left-rd.outerWidth()/2+i.outerWidth()/2);0>l?l=0:l+rd.outerWidth()>n.width()&&(l=n.width()-rd.outerWidth()),0>r+o.top&&(r=parseInt(s.top-o.top+rd.outerHeight()+15)),rd.css({left:l+"px",top:r+"px"}).show()})).on("mouseleave","[data-tooltip]",(function(e){rd.hide()})),Gt.on(Ql,(function(e){if(wn)return t.disableSeekbar||t.disableVideoSkip||t.seekToChapterStart&&_l.length||Nr||function(e){if(!od){if("touchstart"==e.type){if(!((e=e.originalEvent.touches)&&0<e.length))return!1}else e.preventDefault();od=!0,ol.on(Jl,(function(e){e:{if("touchmove"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),l(t)}})).on(Xl,(function(e){e:if(od){if(od=!1,ol.off(Jl).off(Xl),"touchend"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),l(t)}}))}}(e),!1})),!st){var ld=function(){(_n||Rn||Rn.duration)&&(Gt.off(Jl,d).off("mouseout",ld),ol.off("mouseout.mvp",ld),Rn.previewSeek&&($t.hide(),hr&&S()),rd.hide(),Yn=null)};Gt.on("mouseover",(function(){(_n||Rn||Rn.duration)&&(Gt.on(Jl,d).on("mouseout",ld),ol.on("mouseout.mvp",ld))}))}var dd=Zt.hasClass("mvp-volume-horizontal");dd?Zt.width():Zt.height();var cd,pd=dd?ei.width():ei.height();if(0>gn?gn=0:1<gn&&(gn=1),!Ra||st?(Zt.remove(),Xt.on("click",(function(e){c()}))):Xt.on("click",(function(e){st&&0!=Zt.length&&!Zt.hasClass("mvp-force-hide")||c()})),Zt.on(Ql,(function(e){return function(e){if(wn){if(!cd){if("touchstart"==e.type){if(!((e=e.originalEvent.touches)&&0<e.length))return!1}else e.preventDefault();cd=!0,ol.on(Jl,(function(e){e:{if("touchmove"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),p(t)}})).on(Xl,(function(e){e:if(cd){if(cd=!1,ol.off(Jl).off(Xl),"touchend"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),p(t)}}))}}}(e),!1})),!st){var ud=function(){Zt.off(Jl,m).off("mouseout",ud),ol.off("mouseout.mvp",ud),rd.hide()};Zt.on("mouseover",(function(){Zt.on(Jl,m).on("mouseout",ud),ol.on("mouseout.mvp",ud)}))}if(t.useShare)if("undefined"==typeof MVPShareManager)(Gl=document.createElement("script")).type="text/javascript",Gl.src=MVPUtils.qualifyURL(t.sourcePath+t.share_js),Gl.onload=Gl.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(md=new MVPShareManager(t))},Gl.onerror=function(){alert("Error loading "+this.src)},(Kl=document.getElementsByTagName("script")[0]).parentNode.insertBefore(Gl,Kl);else var md=new MVPShareManager(t);var hd=dt.find(".mvp-settings-wrap"),vd=dt.find(".mvp-settings-holder");dt.find(".mvp-settings-holder-inner");var fd=dt.find(".mvp-settings-home");Vi.on("click",(function(){vd.hasClass("mvp-holder-visible")?vd.one("transitionend",(function(){vd.css({display:"none",width:"auto",height:"auto"}),vd.find(".mvp-settings-menu").css("display","none"),fd.css("display","block"),vd.css("maxHeight","none").removeClass("mvp-settings-holder-scrollable")})).removeClass("mvp-holder-visible"):(vd.css("display","block"),setTimeout((function(){vd.addClass("mvp-holder-visible")}),20),Sr&&x(!1))})),fd.find(".mvp-menu-item").on("click",(function(){var t=e(this).attr("data-target"),i=vd.width(),a=vd.height();fd.css("display","none"),vd.find(".mvp-settings-menu").css("display","none"),vd.css("maxHeight","none").removeClass("mvp-settings-holder-scrollable"),vd.css({width:"auto",height:"auto"});var n=(t=vd.find("."+t).css("display","block")).width(),o=t.height();o>Lt.height()-60&&vd.css("maxHeight",Lt.height()-60).addClass("mvp-settings-holder-scrollable"),vd.css({width:i+"px",height:a+"px"}),setTimeout((function(){vd.css({width:n+"px",height:o+"px"})}),20)})),vd.find(".mvp-menu-header").on("click",(function(){h()})),Ri.find(".mvp-menu-item").on("click",(function(){if(e(this).hasClass("mvp-menu-active"))return t.closeSettingsMenuOnSelect?Vi.click():h(),!1;var i=e(this).attr("data-value");Rn.playbackRate=i,v(i),_n&&ot.setPlaybackRate(i),t.closeSettingsMenuOnSelect?Vi.click():h()})),this.toggleSubtitle=function(){if(!wn||!Es)return!1;if(Rn&&Rn.subtitles&&t.rememeberCaptionState&&sn&&localStorage.getItem(pn)){var e=JSON.parse(localStorage.getItem(pn));(e=e.active?t.subtitleOffText:e.value)&&ot.setSubtitle(e)}},this.setSubtitle=function(e){if(!wn||!Es)return!1;if(Rt.empty(),Vt.show(),e==t.subtitleOffText||""==e)""==e&&(e=t.subtitleOffText),tr=!1,ir=null,er&&er.removeClass("mvp-menu-active"),er=Ui.find(".mvp-menu-item[data-label='"+e+"']").addClass("mvp-menu-active"),Wi.addClass("mvp-btn-disabled");else{if(El[e])tr=!0,ir=null,er&&er.removeClass("mvp-menu-active"),er=Ui.find(".mvp-menu-item[data-label='"+e+"']").addClass("mvp-menu-active"),Sl=El[e],Rl=null,je(!0);else{var i,a=Rn.subtitles.length;for(i=0;i<a;i++){var n=Rn.subtitles[i];if(n.label==e){tr=!1,ir=null,er&&er.removeClass("mvp-menu-active"),er=Ui.find(".mvp-menu-item[data-label='"+e+"']").addClass("mvp-menu-active"),"hls"==Ss?T(n):"dash"!=Ss&&P(n);break}}}Wi.removeClass("mvp-btn-disabled")}for(a=Rn.subtitles.length,i=0;i<a;i++)delete(n=Rn.subtitles[i]).default,n.value==e&&(n.default=!0);vd.find(".mvp-subtitle-menu-value").text(e),t.rememeberCaptionState&&sn&&(i=localStorage.getItem(pn)?JSON.parse(localStorage.getItem(pn)):{},e==t.subtitleOffText?i.active=!1:(i.active=!0,i.value=e),localStorage.setItem(pn,JSON.stringify(i)))},t.useKeyboardNavigationForPlayback&&t.keyboardControls.length&&(Array.isArray(t.keyboardControls)||(t.keyboardControls=t.keyboardControls.split(";")),dt.hover((function(){ol.on("keydown",(function(i){if(!wn)return!1;var a=i.keyCode,n=e(i.target);if(n.hasClass("mvp-search-field")||n.hasClass("mvp-pwd-field"))return!0;if(t.modifierKey){var s=t.keyboardControls.length;for(n=0;n<s;n++){var r=t.keyboardControls[n];if(i[t.modifierKey]&&a==r.keycode){if("seekBackward"==r.action)ot.seekBackward(t.seekTime);else if("seekForward"==r.action)ot.seekForward(t.seekTime);else if("togglePlayback"==r.action)ot.togglePlayback();else if("volumeUp"==r.action)t.volume+=.1,1<t.volume&&(t.volume=1),ot.setVolume(t.volume);else if("volumeDown"==r.action)t.volume-=.1,0>t.volume&&(t.volume=0),ot.setVolume(t.volume);else if("toggleMute"==r.action)ot.toggleMute();else if("nextMedia"==r.action)ot.nextMedia();else if("previousMedia"==r.action)ot.previousMedia();else if("rewind"==r.action)ot.seek(0);else if("toggleFullscreen"==r.action)o();else if("toggleTheater"==r.action){if("fullscreen"==ed)break;Yi.click()}else"toggleSubtitle"==r.action?ot.toggleSubtitle():"subtitleSizeUp"==r.action?ir&&(i=parseInt(Rt.css("fontSize"),10)+1,Rt.css("fontSize",i+"px")):"subtitleSizeDown"==r.action&&ir&&(10>(i=parseInt(Rt.css("fontSize"),10)-1)&&(i=10),Rt.css("fontSize",i+"px"));break}}}else for(s=t.keyboardControls.length,n=0;n<s;n++)if(a==(r=t.keyboardControls[n]).keycode){if("seekBackward"==r.action)ot.seekBackward(t.seekTime);else if("seekForward"==r.action)ot.seekForward(t.seekTime);else if("togglePlayback"==r.action)ot.togglePlayback();else if("volumeUp"==r.action)t.volume+=.1,1<t.volume&&(t.volume=1),ot.setVolume(t.volume);else if("volumeDown"==r.action)t.volume-=.1,0>t.volume&&(t.volume=0),ot.setVolume(t.volume);else if("toggleMute"==r.action)ot.toggleMute();else if("nextMedia"==r.action)ot.nextMedia();else if("previousMedia"==r.action)ot.previousMedia();else if("rewind"==r.action)ot.seek(0);else if("toggleFullscreen"==r.action)o();else if("toggleTheater"==r.action){if("fullscreen"==ed)break;Yi.click()}else if("toggleSubtitle"==r.action)ot.toggleSubtitle();else if("subtitleSizeUp"==r.action)ir&&(i=parseInt(Rt.css("fontSize"),10)+1,Rt.css("fontSize",i+"px"));else{if("subtitleSizeDown"!=r.action)return!0;ir&&(10>(i=parseInt(Rt.css("fontSize"),10)-1)&&(i=10),Rt.css("fontSize",i+"px"))}break}return!1}))}),(function(){ol.off("keydown")})));var gd=[Bt,di,pi,Jt,ai,vi,ui,mi,_i,Ii,ji,Oi,Ai,Hi,Yi,Wi,Gi,oa,dt.find(".mvp-chapter-menu-close"),dt.find(".mvp-pwd-confirm"),dt.find(".mvp-info-close"),dt.find(".mvp-share-item"),dt.find(".mvp-share-close"),dt.find(".mvp-redirect-login-cancel"),dt.find(".mvp-minimize-close"),dt.find(".mvp-resume-continue"),dt.find(".mvp-resume-restart")];for(et=gd.length,Xe=0;Xe<et;Xe++)e(gd[Xe]).css("cursor","pointer").on("click",_);!st&&t.showPrevNextVideoThumb?(_i.on("mouseenter",(function(){Mi.html(Mi.attr("data-next-title")),V(_i,1)})).on("mouseleave",(function(){xi.removeClass("mvp-upnext-wrap2-visible")})),Ii.on("mouseenter",(function(){Mi.html(Mi.attr("data-prev-title")),V(Ii,-1)})).on("mouseleave",(function(){xi.removeClass("mvp-upnext-wrap2-visible")}))):xi.remove();var yd,bd=new MVPPlaylistManager(t);if(e(bd).on("MVPPlaylistManager.COUNTER_READY",(function(i,a){if(Nn=null,Hs=Fn=vo=!1,Ns=0,Rr=!1,Vr=null,Lr=0,jl=[],Al=[],Ur=null,Ol=[],Or=null,Yt.find(".mvp-ad-indicator").remove(),Fr=!1,Yt.find(".mvp-chapter-indicator").remove(),_l=[],kr=xr=!1,Er=Mr=null,Gt.removeClass("mvp-seekbar-chapters"),qr=!1,Vn=$r=null,Qt.removeClass("mvp-progress-sizing"),Es&&Ce(),Rn=Pl[In=a].data,function(){if(Un&&A(),(Un=Ot.children(".mvp-playlist-item").eq(In)).length){if(Un.addClass("mvp-playlist-item-selected"),lt&&0<Dn){if(!js&&("buttons"==ka||"scroll"==ka))if($n)$n.scrollTo(Un);else var i=setInterval((function(){$n&&(clearInterval(i),$n.scrollTo(Un))}),100);js=!1}e(ot).trigger("playlistItemDisabled",{instance:ot,instanceName:t.instanceName})}}(),tl=!0,Zr&&Rn.lockVideoUserRoles&&(tl=MVPUtils.arrayContainsAnotherArray(Rn.lockVideoUserRoles,Zr)),qr||(qr=!0,Rn.annotationSection&&(0==($r=Rn.annotationSection)instanceof e&&($r=e($r)))),Ul&&!Rr)if(Rr=!0,Rn.adPre||Rn.adMid||Rn.adEnd){if(Nn=Rn,Rn.adMid){var n=Rn.adMid.length;for(Xe=0;Xe<n;Xe++){var o=Rn.adMid[Xe];Al.push({begin:o.begin,data:o,type:o.type})}}if(Rn.adEnd){for(n=Rn.adEnd.length,Xe=0;Xe<n;Xe++)o=Rn.adEnd[Xe],Ol.push({data:o,type:o.type});Lr=-1}if(Rn.adPre){for(n=Rn.adPre.length,Xe=0;Xe<n;Xe++)o=Rn.adPre[Xe],jl.push({data:o,type:o.type});Rn=jl[Lr=0].data,Nr=!0}}else Rn.adSection&&(0==(Or=Rn.adSection)instanceof e&&(Or=e(Or)),Nn=Rn,Or.find(".mvp-ad").each((function(){var t=e(this);if(t.hasClass("mvp-ad-pre"))jl.push(t);else if(t.hasClass("mvp-ad-mid")){var i=parseInt(t.attr("data-begin"),10);Al.push({begin:i,data:t})}else t.hasClass("mvp-ad-end")&&Ol.push(t)})),jl.length?(Rn=Be(jl[Lr=0]),Nr=!0):Ol.length&&(Lr=-1));e(ot).trigger("mediaRequest",{instance:ot,instanceName:t.instanceName,media:Rn}),J()})).on("MVPPlaylistManager.RANDOM_CHANGE",(function(e,t){t?mi.addClass("mvp-contr-btn-hover"):mi.removeClass("mvp-contr-btn-hover")})).on("MVPPlaylistManager.LOOP_CHANGE",(function(e,t){t?ui.addClass("mvp-contr-btn-hover"):ui.removeClass("mvp-contr-btn-hover")})),window.onYouTubeIframeAPIReady=function(){},ot.toggleRel=function(){Qr?(na.addClass("mvp-holder-visible-top"),setTimeout((function(){na.css("display","none").removeClass("mvp-holder-visible-top"),Qr=!1}),500)):(na.addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){na.removeClass("mvp-holder-visible-top"),Qr=!0,Kr.build()}),20))},window.onbeforeunload=function(e){Rn&&Me()},t.addResizeEvent&&(nl.on("resize",(function(){if(!wn)return!1;Sn&&clearTimeout(Sn),Sn=setTimeout(Ne,250)})),window.addEventListener("orientationchange",(function(){setTimeout((function(){Ne()}),50)}))),this.playMedia=function(){if(!wn||!Es||Is)return!1;if("audio"==Es){if(co){var e=co.play();void 0!==e&&e.then((function(){})).catch((function(e){pi.show(),ci.hide()}))}}else"video"==Es?ho&&!_n?(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),pi.hide(),ee()):go&&(void 0!==(e=go.play())&&e.then((function(){})).catch((function(e){pi.show(),ci.hide()}))):"youtube"==Es?ho&&!_n?(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),ee()):Po.playVideo():"vimeo"==Es&&(ho&&!_n?(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),ee()):jo.play());Is=!0},this.pauseMedia=function(){if(!wn||!Es||!Is)return!1;"audio"==Es?co&&co.pause():"video"==Es?go&&go.pause():"youtube"==Es?Po.pauseVideo():"vimeo"==Es&&jo.pause(),Is=!1},this.togglePlayback=function(){if(!wn||!Es)return!1;if(!t.displayPosterOnMobile||!Rn.poster){if(nl.off(pl),Rn.pwd)return si.addClass("mvp-holder-visible-top").css("display","block"),setTimeout((function(){si.removeClass("mvp-holder-visible-top")}),20),!1;if("audio"==Es)if(!ho&&!Rn.slideshowImages||_n){if(co)if(co.paused){var e=co.play();void 0!==e&&e.then((function(){})).catch((function(e){pi.show(),ci.hide()}))}else co.pause()}else 0!=yn&&(gn=yn),pi.hide(),ci.show(),ee();else"video"==Es?ho&&!_n?(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),pi.hide(),ci.show(),ee()):go&&(go.paused?void 0!==(e=go.play())&&e.then((function(){})).catch((function(e){pi.show(),ci.hide()})):go.pause()):"youtube"==Es?ho&&!_n?(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),pi.hide(),ee()):Po&&(1==(e=Po.getPlayerState())?Po.pauseVideo():(2==e||-1==e||5==e||0==e)&&Po.playVideo()):"vimeo"==Es?ho&&!_n?(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),pi.hide(),ee()):jo&&jo.getPaused().then((function(e){e?jo.play():jo.pause()})):"custom"!=Es&&"custom_html"!=Es||!ho||_n||(t.showPosterOnPause?Pt.hide():(Pt.hide().empty(),ho=null),pi.hide(),ee())}},this.nextMedia=function(){if(!wn)return!1;ke()},this.previousMedia=function(){if(!wn)return!1;Se()},this.setVolume=function(e){if(!wn)return!1;0>e?e=0:1<e&&(e=1),u(e)},this.toggleMute=function(){if(!wn)return!1;c()},this.seek=function(e){if(!wn||!Es)return!1;"audio"==Es?co&&(co.currentTime=e):"video"==Es?go&&(go.currentTime=e):"youtube"==Es?Po&&Po.seekTo(e):"vimeo"==Es&&jo&&jo.setCurrentTime(e)},this.seekBackward=function(e){if(!wn||!Es)return!1;if("audio"==Es){if(co)try{co.currentTime=Math.max(co.currentTime-(e||t.seekTime),0)}catch(e){console.log(e)}}else if("video"==Es){if(go)try{go.currentTime=Math.max(go.currentTime-(e||t.seekTime),0)}catch(e){console.log(e)}}else if("youtube"==Es){var i=Math.max(Po.getCurrentTime()-(e||t.seekTime),0);Po.seekTo(i)}else"vimeo"==Es&&jo.getCurrentTime().then((function(i){jo.setCurrentTime(Math.max(i-(e||t.seekTime),0))}))},this.seekForward=function(e){if(!wn||!Es)return!1;if("audio"==Es){if(co)try{co.currentTime=Math.min(co.currentTime+(e||t.seekTime),co.duration)}catch(e){console.log(e)}}else if("video"==Es){if(go)try{go.currentTime=Math.min(go.currentTime+(e||t.seekTime),go.duration)}catch(e){console.log(e)}}else if("youtube"==Es){var i=Math.min(Po.getCurrentTime()+(e||t.seekTime),Po.getDuration());Po.seekTo(i)}else"vimeo"==Es&&(0!=fl&&0!=gl?(i=Math.min(gl+(e||t.seekTime),fl),jo.setCurrentTime(i)):jo.getCurrentTime().then((function(i){jo.getDuration().then((function(a){jo.setCurrentTime(Math.min(i+(e||t.seekTime),a))}))})))},this.getCurrentMediaData=function(){return!!wn&&(Es?Rn:null)},this.getCurrentMediaUrl=function(){if(!wn)return!1;if(!Es)return"";var e=-1==window.location.href.indexOf("?")?"?":"&",i="mvp-query-instance="+encodeURIComponent(t.instanceName);return e=e+i+"&mvp-scroll-to-player=1"+(null!=Rn.mediaId?"&mvp-media-id="+Rn.mediaId:"&mvp-active-item="+In)+(_n&&"image"!=Es?"&mvp-playback-position-time="+Math.floor(ot.getCurrentTime()):""),null!=Rn.mediaId&&-1==ml.indexOf(Rn.origtype)&&Rn.title&&(e+=i="&mvp-media-title="+encodeURIComponent(Rn.title)),e},this.getCurrentTime=function(){return!(!wn||!Es)&&(_n?"audio"==Es?co.currentTime:"video"==Es?go.currentTime:"youtube"==Es?Po?Po.getCurrentTime():"0":"vimeo"==Es?gl:void 0:"0")},this.getDuration=function(){return!(!wn||!Es)&&("audio"==Es?co.duration:"video"==Es?go.duration:"youtube"==Es?Po.getDuration():"vimeo"==Es?fl:void 0)},this.getLoadProgress=function(){if(!wn||!Es)return!1;var e;if("audio"==Es){if(void 0!==co.buffered&&0!=co.buffered.length){try{var t=co.buffered.end(co.buffered.length-1)}catch(e){}isNaN(t)||(e=t/Math.floor(co.duration))}}else if("video"==Es){if(void 0!==go.buffered&&0!=go.buffered.length){try{t=go.buffered.end(go.buffered.length-1)}catch(e){}isNaN(t)||(e=t/Math.floor(go.duration))}}else"youtube"==Es?e=Po.getVideoLoadedFraction():"vimeo"==Es&&(e=yl);return e},this.togglePlaylist=function(e){if(!wn)return!1;Ue(e)},this.toggleRandom=function(e){if(!wn||void 0===bd)return!1;bd.setRandom(e)},this.toggleLoop=function(e){if(!wn||void 0===bd)return!1;bd.setLooping(e)},this.setPlaybackRate=function(e){if(!wn||!Es)return!1;Rn.playbackRate=e,_n&&("audio"==Es?co&&(co.playbackRate=e):"video"==Es?go&&(go.playbackRate=e):"youtube"==Es?Po.setPlaybackRate(Number(e)):"vimeo"==Es&&jo.setPlaybackRate(e).then((function(e){})).catch((function(e){console.log(e.name)})))},this.setPlaybackQuality=function(e){if(!wn||!Es)return!1;if(_n&&("audio"==Es||"video"==Es))if("hls"==Ss)e=parseInt(e,10),Rn.quality?Kn.currentLevel=e:(Kn.currentLevel=e,Kn.nextLevel=e,Kn.loadLevel=e);else if("dash"==Ss)e=parseInt(e,10),io.setQualityFor("video",e);else{if(Rn.quality=e,y(e),ks=!0,is=!1,On&&(cancelAnimationFrame(On),On=null),An&&(Xo&&Xo.setAnimationLoop(null),An=!1),jn&&(clearInterval(jn),jn=null),Ms=null,"audio"==Es)co&&(Ms=co.currentTime,co.pause(),co.src=""),lo&&lo.off("ended pause play canplay ratechange loadedmetadata error"),hn&&uo&&uo.clean();else if("video"==Es){if(bl&&Rn.is360&&("monoscopic"==Rn.vrMode?Go&&Go.hide():Jo&&Jo.hide()),go){Ms=go.currentTime,go.pause();try{go.currentTime=0}catch(e){}go.src="",go=null}yo&&yo.off("ended loadedmetadata canplay canplaythrough ratechange waiting playing play pause error seeked")}pi.hide(),_n=Is=!1,X(),ee()}},this.toggleInfo=function(e){if(!wn||!Es)return!1;N(e)},this.toggleShare=function(e){if(!wn||!Es)return!1;L(e)},this.toggleFullscreen=function(){if(!wn)return!1;o()},this.openLightbox=function(e){if(!wn||Hn)return!1;ut.css("display","block"),setTimeout((function(){clearTimeout(this),ut.css("opacity",1)}),50),void 0!==e?0!=(e=Ot.find(".mvp-playlist-item[data-media-id="+e+"]")).length?(e=e.attr("data-id"),bd.processPlaylistRequest(e)):bd.processPlaylistRequest(bd.getCounter()):bd.processPlaylistRequest(bd.getCounter())},this.closeLightbox=function(){if(!wn)return!1;ut.one("transitionend",(function(){ut.css("display","none"),Hn=!1,A()})).css("opacity",0),t.displayWatchedPercentage&&Rn&&"image"!=Es&&_n&&Ee(),Es&&Ce()},this.destroyMedia=function(){if(!wn)return!1;Pe()},this.destroyPlaylist=function(){if(!wn)return!1;xe()},this.destroyInstance=function(){xe(),bd&&(e(bd).off(),bd=null),Co&&(e(Co).off(),Co=null),_o&&(e(_o).off(),_o=null),uo&&(_o=null),Kn&&(Kn.off(),Kn.destroy(),Kn=null),io&&(io.off(),dashjs.MediaPlayer().reset(),io=null),ol.off(".mvp"),al.off(".mvp")},this.loadPlaylist=function(e,i){return!(!wn||Cn)&&("string"!=typeof e?(alert("Invalid value loadPlaylist!"),!1):(t.mediaId=i,Ln!=e&&void B(e)))},this.setAutoPlay=function(e){fn=e},this.inputMedia=function(e){if(!wn||Cn)return!1;Un&&A(),0<Dn&&bd.reSetCounter(),Rn=e,Es=e.type,Dn&&0!=Dn||(t.mediaEndAction="loop"),J()},this.loadMedia=function(e,t,i){if(!wn||Cn||!Bs)return!1;var a=-1;if("title"==e){for(e=0;e<Dn;e++)if(t==Pl[e].data.title){a=e;var n=!0;break}if(!n)return alert('No media with title "'+t+'" to load! LoadMedia failed.'),!1}else if("counter"==e){if(0>t||t>Dn-1)return alert('Invalid track number. Track number  "'+t+'" doesnt exist. LoadMedia failed.'),!1;a=t}else if("id"==e){if(0==(a=Ot.find(".mvp-playlist-item[data-media-id="+t+"]")).length)return alert("No media with media ID "+t+" to load! LoadMedia failed."),!1;a=a.attr("data-id")}else{if("id-title"!=e)return console.log("loadMedia function requires format parameter!"),!1;if(0==(a=Ot.find('.mvp-playlist-item[data-media-id="'+t+'"][title="'+i+'"]')).length)return alert("No media with media ID "+t+" to load! LoadMedia failed."),!1;a=a.attr("data-id")}Me(),bd.processPlaylistRequest(a)},this.addTrack=function(t,i,a,n){if(!wn||Cn)return!1;dr=!1,void 0!==a&&(dr=a),a=1;var o=!1;if("string"!=typeof i&&"[object Object]"!==Object.prototype.toString.call(i)){if("[object Array]"!==Object.prototype.toString.call(i))return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;a=i.length,o=!0}for(rr=n,sr=!1,lr=!0,Bs?void 0!==rr?0>rr?rr=0:(rr=Dn,sr=!0):(sr=!0,rr=Dn):(rr=0,sr=!0),Cn=!0,ci.show(),Tl=-1,kl=[],Ml=[],n=0;n<a;n++){var s=o?i[n]:i;s="html"==t?De(e(s)):s,Ml.push(s)}Dn=Ml.length,Bs=Ot,Xr=!1,F()},this.removeTrack=function(e,t){if(!wn||Cn)return!1;if(0!=Dn){if("title"==e){var i;for(i=0;i<Dn;i++)if(t==Pl[i].data.title){var a=Ot.children(".mvp-playlist-item").eq(i),n=!0;break}if(!n)return alert('Track with title "'+t+'" doesnt exist. RemoveTrack failed.'),!1}else if("counter"==e){if(0>(t=parseInt(t,10))||t>Dn-1)return alert('Track number  "'+t+'" doesnt exist. RemoveTrack failed.'),!1;a=Ot.find(".mvp-playlist-item").eq(t)}else{if("id"!=e)return alert("removeTrack method failed."),!1;if(0==(a=Ot.find(".mvp-playlist-item[data-media-id="+t+"]")).length)return alert('Track with media id "'+t+'" doesnt exist. RemoveTrack failed.'),!1}a.remove(),Pl.splice(parseInt(a.attr("data-id"),10),1),H(),0<Dn?t==(a=bd.getCounter())?(Ce(),bd.setPlaylistItems(Dn)):(bd.setPlaylistItems(Dn,!1),t<a&&bd.reSetCounter(bd.getCounter()-1)):xe(),Nl&&He()}},this.totalScrollAction=function(){on?nn&&$a&&(Cn||ot.loadMore()):Tn&&(qa||ze())},this.loadMore=function(){if(!wn||!$a||!nn||Cn)return!1;if(Cn=!0,ci.show(),qa=!0,kl=[],"youtube"==$a)if(Co)Co.resumeLoad(nn);else{z("youtube");var e=setInterval((function(){Co&&(clearInterval(e),Co.resumeLoad(nn))}),100)}else"vimeo"==$a&&(_o?_o.resumeLoad(nn):(z("vimeo"),e=setInterval((function(){_o&&(clearInterval(e),_o.resumeLoad(nn))}),100)))},this.setLoadMore=function(e){on=e},this.endLoadMore=function(){Cn=!1,ci.hide(),qa=!1},this.addMore=function(){if(!wn||Cn)return!1;Tn&&(qa||ze())},this.setAddMore=function(e){Tn=e},this.getTitle=function(){return!(!wn||!Rn)&&Rn.title},this.getMediaPlaying=function(){return!!wn&&Is},this.getPlaylistLength=function(){return!!wn&&Dn},this.getPlaylistData=function(){return!!wn&&Pl},this.getLastPlaylistData=function(){return!!wn&&xl},this.getMediaType=function(){return!!wn&&Es},this.getSetupDone=function(){return wn},this.isPlaylistLoading=function(){return Cn},this.getSettings=function(){return t},this.getActiveItemId=function(){return!!wn&&(void 0!==bd?bd.getCounter():null)},this.adSkip=function(){if(!wn||!Nr||!Br)return!1;ma&&ma.trigger("click")},this.resize=function(){if(!wn)return!1;Ne()},sn&&t.playbackPositionKey)if(dn){if(localStorage.getItem(cn)){var wd=JSON.parse(localStorage.getItem(cn));wd.activePlaylist==t.activePlaylist&&(t.playbackPositionTime=wd.playbackPositionTime,gn=wd.volume,t.activeItem=wd.activeItem),localStorage.removeItem(cn)}}else localStorage.removeItem(cn);return Nl?"undefined"==typeof MVPCacheManager&&((Gl=document.createElement("script")).type="text/javascript",Gl.src=MVPUtils.qualifyURL(t.sourcePath+t.cache_js),Gl.onload=Gl.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(Jr=new MVPCacheManager("TeanCacheMVP"),e(Jr).on("MVPCacheManager.GET_DATA",(function(e,i){if(i){var a=i.value;if(a.date+t.cacheTime>Math.floor(Date.now()/1e3))if(a.activePlaylist==t.activePlaylist){Ln=t.activePlaylist,Xr=!0,console.log("Playlist is loading from cache!"),a.globalPlaylistData&&Ot.html(a.globalPlaylistData);var n=JSON.parse(a.playlist);kl=[];var o,s=n.length;for(o=0;o<s;o++)kl.push(n[o].data);a.loadMoreOnTotalScroll&&(on=a.loadMoreOnTotalScroll,nn=a.nextPageToken,an=a.loadMoreItem,$a=a.loadMoreType)}else Jr.deleteData();else Jr.deleteData()}$e()})))},Gl.onerror=function(){alert("Error loading "+this.src)},(Kl=document.getElementsByTagName("script")[0]).parentNode.insertBefore(Gl,Kl)):$e(),t.showControlsBeforeStart&&(Bt.find(".mvp-btn-play").show(),u()),this}}(jQuery);